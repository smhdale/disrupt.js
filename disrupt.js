(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
const html2canvas = require('../vendor/html2canvas.min.js')

/**
 * MOUSE class, for basic mouse tracking
 */

class Mouse {
  constructor () {
    this.x = window.innerWidth / 2
    this.y = window.innerHeight / 2

    window.addEventListener('mousemove', e => {
      this.x = e.clientX
      this.y = e.clientY
    })
  }

  get pos () {
    return {
      x: this.x,
      y: this.y
    }
  }
}

const MOUSE = new Mouse()

/**
 * Trigonometry class
 */

class Trig {
  static distanceBetween (p1, p2) {
    return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2))
  }

  static angleBetween (p1, p2) {
    return Math.atan2(p2.y - p1.y, p2.x - p1.x)
  }

  static lengthdirX (len, dir) {
    return len * Math.cos(dir)
  }

  static lengthdirY (len, dir) {
    return len * Math.sin(dir)
  }
}

/**
 * DISRUPT class, for handling disruptions
 */

class DISRUPT {
  constructor () {
    this.DOMURL = window.URL || window.webkitURL || window

    this.targetClass = 'disrupt'
    this.disruptables = {}

    this.disruptionCounter = 0

    this.GENERATORS = {
      randomRect: canvas => {
        let x = canvas.width * Math.random()
        let y = canvas.height * Math.random()
        let w = (canvas.width - x) * Math.random()
        let h = (canvas.height - y) * Math.random()

        return {
          sx: x,
          sy: y,
          w: w,
          h: h,
          dx: x,
          dy: y
        }
      }
    }

    // Disruption animations
    this.DISRUPTIONS = {
      /**
       * Horizontal bars that shake left-to-right
       */
      'dsrpt-horizontal': {
        setup: canvas => {
          let numLines = 7
          let lineHeight = canvas.height / numLines
          let lines = []
          for (let i = 0; i < numLines; i++) {
            lines.push({
              sx: 0,
              sy: lineHeight * i,
              w: canvas.width,
              h: lineHeight,
              dx: 0,
              dy: lineHeight * i,
              nextMovement: 0,
              offset: 0
            })
          }

          return {
            runtime: 2000,
            lines: lines
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          let lines = setupData.lines
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          // Animate lines
          for (let i = 0; i < lines.length; i++) {
            let line = lines[i]

            // Should this line move this frame?
            if (progress > line.nextMovement) {
              // Offset should be 0 if animation is finished
              if (progress >= 1) {
                line.offset = 0
              } else {
                let offset = Math.random() * line.h * 2 - line.h
                let dampener = Math.max(0, 1 - progress)
                line.offset = offset * dampener
              }

              // Set time for next movement
              line.nextMovement += Math.random() * 0.3
              line.nextMovement = Math.min(1, line.nextMovement)
            }

            // Draw the line
            ctx.drawImage(domImage, line.sx, line.sy, line.w, line.h, line.dx + line.offset, line.dy, line.w, line.h)
          }
        }
      },

      /**
       * A distorted checkerboard effect that slowly dissolves in
       */
      'dsrpt-dissolve': {
        setup: canvas => {
          let rows = 30
          let columns = 8

          let w = canvas.width / rows
          let h = canvas.height / columns

          let grid = []
          for (let r = 0; r < rows; r++) {
            for (let c = 0; c < columns; c++) {
              grid.push({
                x: r * w,
                y: c * h,
                w: w,
                h: h,
                xOff: w * (Math.random() * 2 - 1),
                yOff: h * (Math.random() * 2 - 1),
                showAt: Math.random(),
                correctAt: Math.random()
              })
            }
          }

          return {
            runtime: 1500,
            grid: grid
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          let grid = setupData.grid
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          /* ANIMATION CODE */
          for (let i = 0; i < grid.length; i++) {
            let square = grid[i]
            let x = square.x
            let y = square.y
            if (progress > square.showAt) {
              if (progress < square.correctAt) {
                x += square.xOff
                y += square.yOff
              }
              ctx.drawImage(domImage, square.x, square.y, square.w, square.h, x, y, square.w, square.h)
            }
          }
        }
      },

      /**
       * Blocks of the source image render "incorrectly" then snap into place
       */
      'dsrpt-blocks': {
        setup: (canvas, domImage, generators) => {
          let numblocks = 15
          let blocks = []
          for (let i = 0; i < numblocks; i++) {
            let block = generators.randomRect(canvas)

            let maxOffset = 20

            let xOff = Math.random() * maxOffset * 2 - maxOffset
            let yOff = Math.random() * maxOffset * 2 - maxOffset
            block.dx += xOff
            block.dy += yOff
            block.showAt = Math.random() * 0.1
            block.repositionAt = Math.random() * 0.9 + 0.1

            blocks.push(block)
          }

          return {
            runtime: 2500,
            blocks: blocks
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          let blocks = setupData.blocks

          // Clear canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          // Draw base image and erase sections
          ctx.drawImage(domImage, 0, 0)

          // Clear areas behind blocks
          for (let i = 0; i < blocks.length; i++) {
            let block = blocks[i]
            if (block.repositionAt > progress) {
              ctx.clearRect(block.sx, block.sy, block.w, block.h)
            }
          }

          // Draw blocks
          for (let i = 0; i < blocks.length; i++) {
            let block = blocks[i]
            if (block.repositionAt > progress) {
              ctx.drawImage(domImage, block.sx, block.sy, block.w, block.h, block.dx, block.dy, block.w, block.h)
            }
          }
        }
      },

      /**
       * The source images fades in and scales down, with some sections
       * glitching & freezing along the way
       */
      'dsrpt-scale-down': {
        setup: (canvas, domImage, generators) => {
          let numBlocks = 15
          let blocks = []
          for (let i = 0; i < numBlocks; i++) {
            let block = generators.randomRect(canvas)
            block.animTime = Math.min(0.4 + Math.random() * 0.7, 1)
            block.stopAt = Math.random() * block.animTime
            block.stopLength = Math.random() * Math.min(0.4, block.animTime)
            block.stopScale = 0
            blocks.push(block)
          }

          return new function () {
            // Props
            this.runtime = 1500
            this.blocks = blocks
            this.scale = {
              min: 1,
              max: 1.5
            }

            this.baseX = scale => -canvas.width * (scale - 1) / 2,
            this.baseY = scale => -canvas.height * (scale - 1) / 2,
            this.getScale = progress => this.scale.max - this.parabola(progress) * (this.scale.max - this.scale.min),
            this.scaleProgress = (progress, max) => Math.min(progress / max, 1),
            this.parabola = x => -Math.pow(x - 1, 2) + 1
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          let blocks = setupData.blocks

          // Clear canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          // Animate base image
          let baseProgress = setupData.scaleProgress(progress, 0.3)
          let baseScale = setupData.getScale(baseProgress)

          ctx.globalAlpha = baseProgress
          ctx.drawImage(
            domImage, 0, 0, canvas.width, canvas.height,
            setupData.baseX(baseScale), setupData.baseY(baseScale), canvas.width * baseScale, canvas.height * baseScale
          )

          for (let i = 0; i < blocks.length; i++) {
            let block = blocks[i]

            // Remove section from base image
            ctx.globalAlpha = 1
            ctx.clearRect(setupData.baseX(baseScale) + block.sx * baseScale, setupData.baseY(baseScale) + block.sy * baseScale, block.w * baseScale, block.h * baseScale)

            let myProg = setupData.scaleProgress(progress, block.animTime)
            let scale = setupData.getScale(myProg)
            let finalScale = scale

            if (block.stopAt < progress && progress <= block.stopAt + block.stopLength) {
              if (block.stopScale === 0) {
                block.stopScale = scale
              }
              finalScale = block.stopScale
            }

            ctx.globalAlpha = myProg
            ctx.drawImage(
              domImage, block.sx, block.sy, block.w, block.h,
              setupData.baseX(finalScale) + block.sx * finalScale, setupData.baseY(finalScale) + block.sy * finalScale, block.w * finalScale, block.h * finalScale
            )
          }
        }
      },

      /**
       * Okay let's give RGB shifting a go again
       */
      'dsrpt-rgb-shift': {
        setup: (canvas, domImage) => {
          let ctx = canvas.getContext('2d')

          // Set up colour-shifted images
          let colourNames = [ 'red', 'green', 'blue' ]
          let colours = []


          for (let i = 0; i < colourNames.length; i++) {
            ctx.clearRect(0, 0, canvas.width, canvas.height)

            // Draw basic image
            ctx.globalCompositeOperation = 'source-over'
            ctx.drawImage(domImage, 0, 0)

            // Recolour it
            ctx.globalCompositeOperation = 'source-in'
            ctx.fillStyle = colourNames[i]
            ctx.rect(0, 0, canvas.width, canvas.height)
            ctx.fill()

            let img = new Image()
            img.crossOrigin = 'anonymous'
            img.src = canvas.toDataURL('image/png')

            colours.push({
              image: img,
              x: 0,
              dx: 0,
              changeFreq: 0.1,
              changeAt: 0
            })
          }

          // Reset comp mode
          ctx.globalCompositeOperation = 'source-over'

          return new function () {
            this.runtime = 2500
            this.colours = colours
            this.amplitude = 5

            this.glitchAt = 0
            this.glitchTime = 0.05

            this.maxGlitchDelay = 0.8
            this.glitchAmplitudeModifier = 10

            this.isGlitching = progress => (progress > this.glitchAt && progress <= this.glitchAt + this.glitchTime)
            this.setGlitchAt = progress => {
              this.glitchAt = progress + Math.random() * this.maxGlitchDelay
            }
            this.setGlitchAt(0)

            // Glitch bars
            let numBars = 3
            this.glitchBars = []
            for (let i = 0; i < numBars; i++) {
              this.glitchBars.push(new function () {
                this.w = 0
                this.h = 1
                this.x = 0
                this.y = 0
                this.dx = 0
                this.maxOffset = 20
                this.maxMoveTime = 0.03
                this.moveAt = 0

                this.update = progress => {
                  if (progress > this.moveAt) {
                    this.updateSize()
                    this.updatePos()
                    this.moveAt = progress + this.maxMoveTime * Math.random()
                  }
                }

                this.updateSize = () => {
                  this.w = Math.random() * canvas.width
                  let xLeft = canvas.width - this.w
                  this.x = Math.random() * xLeft
                }

                this.updatePos = () => {
                  this.y = Math.floor(Math.random() * (canvas.height - this.h))
                  this.dx = this.maxOffset * (Math.random() * 2 - 1)
                }
              })
            }
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          /* ANIMATION CODE */

          // Draw colours
          ctx.globalAlpha = 1/3

          for (let colour of setupData.colours) {
            // Update dx every now and then
            if (progress > colour.changeAt) {
              colour.changeAt = progress + Math.random() * colour.changeFreq
              colour.x = setupData.amplitude * (Math.random() * 2 - 1)
              colour.dx = colour.x * (setupData.isGlitching(progress) ? setupData.glitchAmplitudeModifier : 1)
            }

            ctx.drawImage(colour.image, colour.dx, 0)
          }

          if (!setupData.isGlitching(progress)) {
            ctx.globalAlpha = 2/3
            ctx.drawImage(domImage, 0, 0)
          }

          // When glitch has finished, schedule another
          if (progress > setupData.glitchAt + setupData.glitchTime) {
            setupData.setGlitchAt(progress)
          }

          // Glitch bars
          for (let bar of setupData.glitchBars) {
            // Update bar
            bar.update(progress)

            ctx.globalAlpha = 1
            ctx.clearRect(bar.x, bar.y, bar.w, bar.h)

            // Re-draw source image but offset
            ctx.globalAlpha = 1/3
            for (let colour of setupData.colours) {
              ctx.drawImage(colour.image, bar.x, bar.y, bar.w, bar.h, bar.x + bar.dx + colour.dx, bar.y, bar.w, bar.h)
            }

            if (!setupData.isGlitching(progress)) {
              ctx.globalAlpha = 2/3
              ctx.drawImage(domImage, bar.x, bar.y, bar.w, bar.h, bar.x + bar.dx, bar.y, bar.w, bar.h)
            }
          }
        }
      },

      /**
       * RGB split with a slight parallax effect that follows the mouse
       */
      'dsrpt-rgb-follow': {
        setup: (canvas, domImage) => {
          let ctx = canvas.getContext('2d')

          // Set up colour-shifted images
          let colourNames = [ '#00f', '#f00', '#0f0' ]
          let colours = []


          for (let i = 0; i < colourNames.length; i++) {
            ctx.clearRect(0, 0, canvas.width, canvas.height)

            // Draw coloured background
            ctx.globalCompositeOperation = 'source-over'
            ctx.fillStyle = colourNames[i]
            ctx.fillRect(0, 0, canvas.width, canvas.height)

            // Mask to source image
            ctx.globalCompositeOperation = 'destination-atop'
            ctx.drawImage(domImage, 0, 0)

            // Multiply with source image to create alpha channel
            ctx.globalCompositeOperation = 'multiply'
            ctx.drawImage(domImage, 0, 0)

            let img = new Image()
            img.crossOrigin = 'anonymous'
            img.src = canvas.toDataURL('image/png')

            colours.push(img)
          }

          // Reset comp mode
          ctx.globalCompositeOperation = 'source-over'

          // Get canvas bounds
          let canvBounds = canvas.getBoundingClientRect()

          return {
            runtime: -1,
            colours: colours,
            mouseEffect: {
              x: canvBounds.left + canvas.width / 2,
              y: canvBounds.top + canvas.height / 2,
              len: 0,
              maxLen: 10,
              dir: 0,
              spd: 0.1
            }
          }
        },
        animate: (canvas, domImage, setupData, progress) => {
          let ctx = canvas.getContext('2d')
          ctx.clearRect(0, 0, canvas.width, canvas.height)

          /* ANIMATION CODE */

          let canvasPos = {
            x: setupData.mouseEffect.x,
            y: setupData.mouseEffect.y
          }

          let spd = setupData.mouseEffect.spd

          /* EFFECT DIRECTION */

          let dir = setupData.mouseEffect.dir
          let dirTarget = Trig.angleBetween(canvasPos, MOUSE.pos)

          // Difference between angles
          let dirDiff = dirTarget - dir
          dirDiff = Math.atan2(Math.sin(dirDiff), Math.cos(dirDiff))

          // Move towards target angle
          dir += dirDiff * spd
          let wrap = Math.PI * 2
          while (dir > wrap) { dir -= wrap }
          while (dir < 0) { dir += wrap }

          /* EFFECT MAGNITUDE */

          // Mouse pos as percentage
          let mouseMax = Trig.distanceBetween(canvasPos, { x: 0, y: 0})
          let mouseCurrent = Trig.distanceBetween(canvasPos, MOUSE.pos)

          // Move length towards target
          let len = setupData.mouseEffect.len
          let targetLen = (mouseCurrent / mouseMax) * setupData.mouseEffect.maxLen
          let lenDiff = targetLen - len
          len += lenDiff * spd

          // Store current dir for next animation loop
          setupData.mouseEffect.dir = dir
          setupData.mouseEffect.len = len

          // Draw three RGB shifted imagesa

          // Scale is (maxLen * 2)px smaller than canvas size
          let smallestAxis = Math.min(canvas.width, canvas.height)
          let targetSize = smallestAxis - setupData.mouseEffect.maxLen * 2
          let scale = targetSize / smallestAxis

          // Draw the images offset correctly
          let scaleW = canvas.width * scale
          let scaleH = canvas.height * scale
          let xOrigin = (canvas.width - scaleW) / 2
          let yOrigin = (canvas.height - scaleH) / 2
          let dx = Trig.lengthdirX(len, dir)
          let dy = Trig.lengthdirY(len, dir)

          ctx.globalCompositeOperation = 'lighten'

          let n = setupData.colours.length
          for (let i = 0; i < n; i++) {
            let offset = i - 1
            ctx.drawImage(setupData.colours[i], 0, 0, canvas.width, canvas.height, xOrigin + dx * offset, yOrigin + dy * offset, scaleW, scaleH)
          }
          ctx.globalCompositeOperation = 'source-over'
        }
      }
    }
  }

  get disruptionTypes () {
    return Object.keys(this.DISRUPTIONS)
  }

  getDisruption (id) {
    return this.disruptables[id]
  }

  removeDisruption (id) {
    let disruption = this.disruptables[id]

    // Stop animation
    disruption.disruptionAnim.stop()

    // Re-show source element
    disruption.elem.style.visibility = 'visible'

    // Remove disruption canvas
    disruption.canvas.parentElement.removeChild(disruption.canvas)

    // Delete disruption
    delete this.disruptables[id]
  }

  forceStopDisruptions () {
    Object.keys(this.disruptables).forEach(key => {
      let d = this.disruptables[key]
      this.removeDisruption(d.id)
    })
  }

  /* DISRUPTION FUNCTIONS */

  addDisruptions () {
    let me = this

    // Scan through DOM and find disruptable elements
    let disruptables = Array.from(document.getElementsByClassName(this.targetClass))

    let canvasLoads = disruptables.map(elem => {
      // Determine disruption type - pick first found class
      let disruptionType = 'dsrpt-horizontal'
      for (let anim of this.disruptionTypes) {
        if (elem.classList.contains(anim)) {
          disruptionType = anim
          break
        }
      }

      let disruption = {
        id: this.disruptionCounter++,
        elem: elem,
        disruptionType: disruptionType,
        loop: elem.classList.contains('loop')
      }

      // Use html2canvas to create canvas and image
      return new Promise((resolve, reject) => {
        html2canvas(elem, {
          onrendered: canvas => {
            let img = new Image()
            img.crossOrigin = 'anonymous'
            img.src = canvas.toDataURL('data/image')

            disruption.image = img
            disruption.canvas = canvas

            me.disruptables[disruption.id] = disruption

            // Position canvas
            this.positionCanvas(elem, disruption.canvas)
            elem.parentNode.insertBefore(disruption.canvas, elem)
            resolve()
          }
        })
      })
    })

    Promise.all(canvasLoads).then(() => {
      me.triggerDisrupt()
    })
  }

  positionCanvas (elem, canvas) {
    // Get element bounds
    let bounds = elem.getBoundingClientRect()
    let parentBounds = elem.parentElement.getBoundingClientRect()

    // Position the canvas
    let scroll = document.body.scrollTop
    canvas.style.position = 'absolute'
    canvas.style.top = `${bounds.top + scroll - parentBounds.top}px`
    canvas.style.left = `${bounds.left - parentBounds.left}px`
  }

  triggerDisrupt () {
    Object.keys(this.disruptables).forEach(key => {
      let d = this.disruptables[key]
      let disruption = this.DISRUPTIONS[d.disruptionType]

      // Run setup
      let setupData = disruption.setup(d.canvas, d.image, this.GENERATORS)
      let animFunction = disruption.animate

      // Hide original element
      d.elem.style.visibility = 'hidden'

      // Do animation
      d.disruptionAnim = new DisruptAnimation(this, d.id, setupData, animFunction, d.loop)
    })
  }
}

class DisruptAnimation {
  constructor (parent, disruptionId, setupData, animFunction, loop) {
    this.parent = parent
    this.data = parent.getDisruption(disruptionId)
    this.setupData = setupData
    this.animFunction = animFunction
    this.loop = loop

    this.running = true

    this.animStart = null
    this.currentFrame = window.requestAnimationFrame(this.doAnimation.bind(this))
  }

  get animationFrame () {
    return this.currentFrame
  }

  stop () {
    window.cancelAnimationFrame(this.currentFrame)
  }

  doAnimation (timestamp) {
    if (this.animStart === null) {
      this.animStart = timestamp
    }

    // Determine animation progress (from 0 to 1)
    let progress = (timestamp - this.animStart) / this.setupData.runtime

    // Run custom animation function
    this.animFunction(this.data.canvas, this.data.image, this.setupData, progress)

    if (progress < 1 || this.loop) {
      this.currentFrame = window.requestAnimationFrame(this.doAnimation.bind(this))
    } else {
      this.stop()

      // Delete self from parent
      this.parent.removeDisruption(this.data.id)
    }
  }
}

// Auto-create global instance and trigger disruptions
window.DISRUPT = new DISRUPT()

// TODO: add ability to wait until revealed by scroll
window.DISRUPT.addDisruptions()

},{"../vendor/html2canvas.min.js":2}],2:[function(require,module,exports){
(function (global){
/*
  html2canvas 0.5.0-beta3 <http://html2canvas.hertzen.com>
  Copyright (c) 2016 Niklas von Hertzen

  Released under  License
*/
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.html2canvas=e()}}(function(){var e;return function n(e,f,o){function d(t,l){if(!f[t]){if(!e[t]){var s="function"==typeof require&&require;if(!l&&s)return s(t,!0);if(i)return i(t,!0);var u=new Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}var a=f[t]={exports:{}};e[t][0].call(a.exports,function(n){var f=e[t][1][n];return d(f?f:n)},a,a.exports,n,e,f,o)}return f[t].exports}for(var i="function"==typeof require&&require,t=0;t<o.length;t++)d(o[t]);return d}({1:[function(n,f,o){(function(n){!function(d){function i(e){throw RangeError(I[e])}function t(e,n){for(var f=e.length;f--;)e[f]=n(e[f]);return e}function l(e,n){return t(e.split(H),n).join(".")}function s(e){for(var n,f,o=[],d=0,i=e.length;i>d;)n=e.charCodeAt(d++),n>=55296&&56319>=n&&i>d?(f=e.charCodeAt(d++),56320==(64512&f)?o.push(((1023&n)<<10)+(1023&f)+65536):(o.push(n),d--)):o.push(n);return o}function u(e){return t(e,function(e){var n="";return e>65535&&(e-=65536,n+=L(e>>>10&1023|55296),e=56320|1023&e),n+=L(e)}).join("")}function a(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:k}function p(e,n){return e+22+75*(26>e)-((0!=n)<<5)}function c(e,n,f){var o=0;for(e=f?K(e/B):e>>1,e+=K(e/n);e>J*z>>1;o+=k)e=K(e/J);return K(o+(J+1)*e/(e+A))}function y(e){var n,f,o,d,t,l,s,p,y,m,r=[],v=e.length,w=0,b=D,g=C;for(f=e.lastIndexOf(E),0>f&&(f=0),o=0;f>o;++o)e.charCodeAt(o)>=128&&i("not-basic"),r.push(e.charCodeAt(o));for(d=f>0?f+1:0;v>d;){for(t=w,l=1,s=k;d>=v&&i("invalid-input"),p=a(e.charCodeAt(d++)),(p>=k||p>K((j-w)/l))&&i("overflow"),w+=p*l,y=g>=s?q:s>=g+z?z:s-g,!(y>p);s+=k)m=k-y,l>K(j/m)&&i("overflow"),l*=m;n=r.length+1,g=c(w-t,n,0==t),K(w/n)>j-b&&i("overflow"),b+=K(w/n),w%=n,r.splice(w++,0,b)}return u(r)}function m(e){var n,f,o,d,t,l,u,a,y,m,r,v,w,b,g,h=[];for(e=s(e),v=e.length,n=D,f=0,t=C,l=0;v>l;++l)r=e[l],128>r&&h.push(L(r));for(o=d=h.length,d&&h.push(E);v>o;){for(u=j,l=0;v>l;++l)r=e[l],r>=n&&u>r&&(u=r);for(w=o+1,u-n>K((j-f)/w)&&i("overflow"),f+=(u-n)*w,n=u,l=0;v>l;++l)if(r=e[l],n>r&&++f>j&&i("overflow"),r==n){for(a=f,y=k;m=t>=y?q:y>=t+z?z:y-t,!(m>a);y+=k)g=a-m,b=k-m,h.push(L(p(m+g%b,0))),a=K(g/b);h.push(L(p(a,0))),t=c(f,w,o==d),f=0,++o}++f,++n}return h.join("")}function r(e){return l(e,function(e){return F.test(e)?y(e.slice(4).toLowerCase()):e})}function v(e){return l(e,function(e){return G.test(e)?"xn--"+m(e):e})}var w="object"==typeof o&&o,b="object"==typeof f&&f&&f.exports==w&&f,g="object"==typeof n&&n;(g.global===g||g.window===g)&&(d=g);var h,x,j=2147483647,k=36,q=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^ -~]/,H=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=k-q,K=Math.floor,L=String.fromCharCode;if(h={version:"1.2.4",ucs2:{decode:s,encode:u},decode:y,encode:m,toASCII:v,toUnicode:r},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return h});else if(w&&!w.nodeType)if(b)b.exports=h;else for(x in h)h.hasOwnProperty(x)&&(w[x]=h[x]);else d.punycode=h}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n){function f(e,n,f){!e.defaultView||n===e.defaultView.pageXOffset&&f===e.defaultView.pageYOffset||e.defaultView.scrollTo(n,f)}function o(e,n){try{n&&(n.width=e.width,n.height=e.height,n.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(f){t("Unable to copy canvas content from",e,f)}}function d(e,n){for(var f=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;)(n===!0||1!==i.nodeType||"SCRIPT"!==i.nodeName)&&f.appendChild(d(i,n)),i=i.nextSibling;return 1===e.nodeType&&(f._scrollTop=e.scrollTop,f._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?o(e,f):("TEXTAREA"===e.nodeName||"SELECT"===e.nodeName)&&(f.value=e.value)),f}function i(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var n=e.firstChild;n;)i(n),n=n.nextSibling}}var t=e("./log");n.exports=function(e,n,o,t,l,s,u){var a=d(e.documentElement,l.javascriptEnabled),p=n.createElement("iframe");return p.className="html2canvas-container",p.style.visibility="hidden",p.style.position="fixed",p.style.left="-10000px",p.style.top="0px",p.style.border="0",p.width=o,p.height=t,p.scrolling="no",n.body.appendChild(p),new Promise(function(n){var o=p.contentWindow.document;p.contentWindow.onload=p.onload=function(){var e=setInterval(function(){o.body.childNodes.length>0&&(i(o.documentElement),clearInterval(e),"view"===l.type&&(p.contentWindow.scrollTo(s,u),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||p.contentWindow.scrollY===u&&p.contentWindow.scrollX===s||(o.documentElement.style.top=-u+"px",o.documentElement.style.left=-s+"px",o.documentElement.style.position="absolute")),n(p))},50)},o.open(),o.write("<!DOCTYPE html><html></html>"),f(e,s,u),o.replaceChild(o.adoptNode(a),o.documentElement),o.close()})}},{"./log":13}],3:[function(e,n){function f(e){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}f.prototype.darken=function(e){var n=1-e;return new f([Math.round(this.r*n),Math.round(this.g*n),Math.round(this.b*n),this.a])},f.prototype.isTransparent=function(){return 0===this.a},f.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},f.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var o=/^#([a-f0-9]{3})$/i;f.prototype.hex3=function(e){var n=null;return null!==(n=e.match(o))&&(this.r=parseInt(n[1][0]+n[1][0],16),this.g=parseInt(n[1][1]+n[1][1],16),this.b=parseInt(n[1][2]+n[1][2],16)),null!==n};var d=/^#([a-f0-9]{6})$/i;f.prototype.hex6=function(e){var n=null;return null!==(n=e.match(d))&&(this.r=parseInt(n[1].substring(0,2),16),this.g=parseInt(n[1].substring(2,4),16),this.b=parseInt(n[1].substring(4,6),16)),null!==n};var i=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;f.prototype.rgb=function(e){var n=null;return null!==(n=e.match(i))&&(this.r=Number(n[1]),this.g=Number(n[2]),this.b=Number(n[3])),null!==n};var t=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;f.prototype.rgba=function(e){var n=null;return null!==(n=e.match(t))&&(this.r=Number(n[1]),this.g=Number(n[2]),this.b=Number(n[3]),this.a=Number(n[4])),null!==n},f.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},f.prototype.namedColor=function(e){e=e.toLowerCase();var n=l[e];if(n)this.r=n[0],this.g=n[1],this.b=n[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!n},f.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};n.exports=f},{}],4:[function(n,f){function o(e,n){var f=j++;if(n=n||{},n.logging&&(v.options.logging=!0,v.options.start=Date.now()),n.async="undefined"==typeof n.async?!0:n.async,n.allowTaint="undefined"==typeof n.allowTaint?!1:n.allowTaint,n.removeContainer="undefined"==typeof n.removeContainer?!0:n.removeContainer,n.javascriptEnabled="undefined"==typeof n.javascriptEnabled?!1:n.javascriptEnabled,n.imageTimeout="undefined"==typeof n.imageTimeout?1e4:n.imageTimeout,n.renderer="function"==typeof n.renderer?n.renderer:c,n.strict=!!n.strict,"string"==typeof e){if("string"!=typeof n.proxy)return Promise.reject("Proxy must be used when rendering url");var o=null!=n.width?n.width:window.innerWidth,t=null!=n.height?n.height:window.innerHeight;return g(a(e),n.proxy,document,o,t,n).then(function(e){return i(e.contentWindow.document.documentElement,e,n,o,t)})}var l=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return l.setAttribute(x+f,f),d(l.ownerDocument,n,l.ownerDocument.defaultView.innerWidth,l.ownerDocument.defaultView.innerHeight,f).then(function(e){return"function"==typeof n.onrendered&&(v("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),n.onrendered(e)),e})}function d(e,n,f,o,d){return b(e,e,f,o,n,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(t){v("Document cloned");var l=x+d,s="["+l+"='"+d+"']";e.querySelector(s).removeAttribute(l);var u=t.contentWindow,a=u.document.querySelector(s),p=Promise.resolve("function"==typeof n.onclone?n.onclone(u.document):!0);return p.then(function(){return i(a,t,n,f,o)})})}function i(e,n,f,o,d){var i=n.contentWindow,a=new p(i.document),c=new y(f,a),r=h(e),w="view"===f.type?o:s(i.document),b="view"===f.type?d:u(i.document),g=new f.renderer(w,b,c,f,document),x=new m(e,g,a,c,f);return x.ready.then(function(){v("Finished rendering");var o;return o="view"===f.type?l(g.canvas,{width:g.canvas.width,height:g.canvas.height,top:0,left:0,x:0,y:0}):e===i.document.body||e===i.document.documentElement||null!=f.canvas?g.canvas:l(g.canvas,{width:null!=f.width?f.width:r.width,height:null!=f.height?f.height:r.height,top:r.top,left:r.left,x:0,y:0}),t(n,f),o})}function t(e,n){n.removeContainer&&(e.parentNode.removeChild(e),v("Cleaned up container"))}function l(e,n){var f=document.createElement("canvas"),o=Math.min(e.width-1,Math.max(0,n.left)),d=Math.min(e.width,Math.max(1,n.left+n.width)),i=Math.min(e.height-1,Math.max(0,n.top)),t=Math.min(e.height,Math.max(1,n.top+n.height));f.width=n.width,f.height=n.height;var l=d-o,s=t-i;return v("Cropping canvas at:","left:",n.left,"top:",n.top,"width:",l,"height:",s),v("Resulting crop with width",n.width,"and height",n.height,"with x",o,"and y",i),f.getContext("2d").drawImage(e,o,i,l,s,n.x,n.y,l,s),f}function s(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function u(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function a(e){var n=document.createElement("a");return n.href=e,n.href=n.href,n}var p=n("./support"),c=n("./renderers/canvas"),y=n("./imageloader"),m=n("./nodeparser"),r=n("./nodecontainer"),v=n("./log"),w=n("./utils"),b=n("./clone"),g=n("./proxy").loadUrlDocument,h=w.getBounds,x="data-html2canvas-node",j=0;o.CanvasRenderer=c,o.NodeContainer=r,o.log=v,o.utils=w;var k="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:o;f.exports=k,"function"==typeof e&&e.amd&&e("html2canvas",[],function(){return k})},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(e,n){function f(e){if(this.src=e,o("DummyImageContainer for",e),!this.promise||!this.image){o("Initiating DummyImageContainer"),f.prototype.image=new Image;var n=this.image;f.prototype.promise=new Promise(function(e,f){n.onload=e,n.onerror=f,n.src=d(),n.complete===!0&&e(n)})}}var o=e("./log"),d=e("./utils").smallImage;n.exports=f},{"./log":13,"./utils":26}],6:[function(e,n){function f(e,n){var f,d,i=document.createElement("div"),t=document.createElement("img"),l=document.createElement("span"),s="Hidden Text";i.style.visibility="hidden",i.style.fontFamily=e,i.style.fontSize=n,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),t.src=o(),t.width=1,t.height=1,t.style.margin=0,t.style.padding=0,t.style.verticalAlign="baseline",l.style.fontFamily=e,l.style.fontSize=n,l.style.margin=0,l.style.padding=0,l.appendChild(document.createTextNode(s)),i.appendChild(l),i.appendChild(t),f=t.offsetTop-l.offsetTop+1,i.removeChild(l),i.appendChild(document.createTextNode(s)),i.style.lineHeight="normal",t.style.verticalAlign="super",d=t.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=f,this.lineWidth=1,this.middle=d}var o=e("./utils").smallImage;n.exports=f},{"./utils":26}],7:[function(e,n){function f(){this.data={}}var o=e("./font");f.prototype.getMetrics=function(e,n){return void 0===this.data[e+"-"+n]&&(this.data[e+"-"+n]=new o(e,n)),this.data[e+"-"+n]},n.exports=f},{"./font":6}],8:[function(e,n){function f(n,f,o){this.image=null,this.src=n;var i=this,t=d(n);this.promise=(f?new Promise(function(e){"about:blank"===n.contentWindow.document.URL||null==n.contentWindow.document.documentElement?n.contentWindow.onload=n.onload=function(){e(n)}:e(n)}):this.proxyLoad(o.proxy,t,o)).then(function(n){var f=e("./core");return f(n.contentWindow.document.documentElement,{type:"view",width:n.width,height:n.height,proxy:o.proxy,javascriptEnabled:o.javascriptEnabled,removeContainer:o.removeContainer,allowTaint:o.allowTaint,imageTimeout:o.imageTimeout/2})}).then(function(e){return i.image=e})}var o=e("./utils"),d=o.getBounds,i=e("./proxy").loadUrlDocument;f.prototype.proxyLoad=function(e,n,f){var o=this.src;return i(o.src,e,o.ownerDocument,n.width,n.height,f)},n.exports=f},{"./core":4,"./proxy":16,"./utils":26}],9:[function(e,n){function f(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}f.TYPES={LINEAR:1,RADIAL:2},f.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,n.exports=f},{}],10:[function(e,n){function f(e,n){this.src=e,this.image=new Image;var f=this;this.tainted=null,this.promise=new Promise(function(o,d){f.image.onload=o,f.image.onerror=d,n&&(f.image.crossOrigin="anonymous"),f.image.src=e,f.image.complete===!0&&o(f.image)})}n.exports=f},{}],11:[function(e,n){function f(e,n){this.link=null,this.options=e,this.support=n,this.origin=this.getOrigin(window.location.href)}var o=e("./log"),d=e("./imagecontainer"),i=e("./dummyimagecontainer"),t=e("./proxyimagecontainer"),l=e("./framecontainer"),s=e("./svgcontainer"),u=e("./svgnodecontainer"),a=e("./lineargradientcontainer"),p=e("./webkitgradientcontainer"),c=e("./utils").bind;f.prototype.findImages=function(e){var n=[];return e.reduce(function(e,n){switch(n.node.nodeName){case"IMG":return e.concat([{args:[n.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[n.node],method:n.node.nodeName}])}return e},[]).forEach(this.addImage(n,this.loadImage),this),n},f.prototype.findBackgroundImage=function(e,n){return n.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},f.prototype.addImage=function(e,n){return function(f){f.args.forEach(function(d){this.imageExists(e,d)||(e.splice(0,0,n.call(this,f)),o("Added image #"+e.length,"string"==typeof d?d.substring(0,100):d))},this)}},f.prototype.hasImageBackground=function(e){return"none"!==e.method},f.prototype.loadImage=function(e){if("url"===e.method){var n=e.args[0];return!this.isSVG(n)||this.support.svg||this.options.allowTaint?n.match(/data:image\/.*;base64,/i)?new d(n.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(n)||this.options.allowTaint===!0||this.isSVG(n)?new d(n,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new d(n,!0):this.options.proxy?new t(n,this.options.proxy):new i(n):new s(n)}return"linear-gradient"===e.method?new a(e):"gradient"===e.method?new p(e):"svg"===e.method?new u(e.args[0],this.support.svg):"IFRAME"===e.method?new l(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new i(e)},f.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||s.prototype.isInline(e)},f.prototype.imageExists=function(e,n){return e.some(function(e){return e.src===n})},f.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},f.prototype.getOrigin=function(e){var n=this.link||(this.link=document.createElement("a"));return n.href=e,n.href=n.href,n.protocol+n.hostname+n.port},f.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout)["catch"](function(){var n=new i(e.src);return n.promise.then(function(n){e.image=n})})},f.prototype.get=function(e){var n=null;return this.images.some(function(f){return(n=f).src===e})?n:null},f.prototype.fetch=function(e){return this.images=e.reduce(c(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,n){e.promise.then(function(){o("Succesfully loaded image #"+(n+1),e)},function(f){o("Failed loading image #"+(n+1),e,f)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),o("Finished searching images"),this},f.prototype.timeout=function(e,n){var f,d=Promise.race([e.promise,new Promise(function(d,i){f=setTimeout(function(){o("Timed out loading image",e),i(e)},n)})]).then(function(e){return clearTimeout(f),e});return d["catch"](function(){clearTimeout(f)}),d},n.exports=f},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(e,n){function f(e){o.apply(this,arguments),this.type=o.TYPES.LINEAR;var n=f.REGEXP_DIRECTION.test(e.args[0])||!o.REGEXP_COLORSTOP.test(e.args[0]);n?e.args[0].split(/\s+/).reverse().forEach(function(e,n){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var f=this.y0,o=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=o,this.y1=f;break;case"center":break;default:var d=.01*parseFloat(e,10);if(isNaN(d))break;0===n?(this.y0=d,this.y1=1-this.y0):(this.x0=d,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(n?1:0).map(function(e){var n=e.match(o.REGEXP_COLORSTOP),f=+n[2],i=0===f?"%":n[3];return{color:new d(n[1]),stop:"%"===i?f/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,n){null===e.stop&&this.colorStops.slice(n).some(function(f,o){return null!==f.stop?(e.stop=(f.stop-this.colorStops[n-1].stop)/(o+1)+this.colorStops[n-1].stop,!0):!1},this)},this)}var o=e("./gradientcontainer"),d=e("./color");f.prototype=Object.create(o.prototype),f.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,n.exports=f},{"./color":3,"./gradientcontainer":9}],13:[function(e,n){var f=function(){f.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-f.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};f.options={logging:!1},n.exports=f},{}],14:[function(e,n){function f(e,n){this.node=e,this.parent=n,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function o(e){var n=e.options[e.selectedIndex||0];return n?n.text||"":""}function d(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var n=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[n[0],n[1],n[4],n[5],n[12],n[13]]}}function i(e){return-1!==e.toString().indexOf("%")}function t(e){return e.replace("px","")}function l(e){return parseFloat(e)}var s=e("./color"),u=e("./utils"),a=u.getBounds,p=u.parseBackgrounds,c=u.offsetBounds;f.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},f.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},f.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},f.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},f.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},f.prototype.prefixedCss=function(e){var n=["webkit","moz","ms","o"],f=this.css(e);return void 0===f&&n.some(function(n){return f=this.css(n+e.substr(0,1).toUpperCase()+e.substr(1)),void 0!==f},this),void 0===f?null:f},f.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},f.prototype.cssInt=function(e){var n=parseInt(this.css(e),10);return isNaN(n)?0:n},f.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new s(this.css(e)))},f.prototype.cssFloat=function(e){var n=parseFloat(this.css(e));return isNaN(n)?0:n},f.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},f.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},f.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=p(this.css("backgroundImage")))},f.prototype.cssList=function(e,n){var f=(this.css(e)||"").split(",");return f=f[n||0]||f[0]||"auto",f=f.trim().split(" "),1===f.length&&(f=[f[0],i(f[0])?"auto":f[0]]),f},f.prototype.parseBackgroundSize=function(e,n,f){var o,d,t=this.cssList("backgroundSize",f);if(i(t[0]))o=e.width*parseFloat(t[0])/100;else{if(/contain|cover/.test(t[0])){var l=e.width/e.height,s=n.width/n.height;return s>l^"contain"===t[0]?{width:e.height*s,height:e.height}:{width:e.width,height:e.width/s}}o=parseInt(t[0],10)}return d="auto"===t[0]&&"auto"===t[1]?n.height:"auto"===t[1]?o/n.width*n.height:i(t[1])?e.height*parseFloat(t[1])/100:parseInt(t[1],10),"auto"===t[0]&&(o=d/n.height*n.width),{width:o,height:d}},f.prototype.parseBackgroundPosition=function(e,n,f,o){var d,t,l=this.cssList("backgroundPosition",f);return d=i(l[0])?(e.width-(o||n).width)*(parseFloat(l[0])/100):parseInt(l[0],10),t="auto"===l[1]?d/n.width*n.height:i(l[1])?(e.height-(o||n).height)*parseFloat(l[1])/100:parseInt(l[1],10),"auto"===l[0]&&(d=t/n.height*n.width),{left:d,top:t}},f.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},f.prototype.parseTextShadows=function(){var e=this.css("textShadow"),n=[];if(e&&"none"!==e)for(var f=e.match(this.TEXT_SHADOW_PROPERTY),o=0;f&&o<f.length;o++){var d=f[o].match(this.TEXT_SHADOW_VALUES);n.push({color:new s(d[0]),offsetX:d[1]?parseFloat(d[1].replace("px","")):0,offsetY:d[2]?parseFloat(d[2].replace("px","")):0,blur:d[3]?d[3].replace("px",""):0})}return n},f.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),n=this.prefixedCss("transformOrigin").split(" ").map(t).map(l);n[0]+=e.left,n[1]+=e.top,this.transformData={origin:n,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},f.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),n=e?d(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=n?n:[1,0,0,1,0,0]}return this.transformMatrix},f.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?c(this.node):a(this.node))},f.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},f.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=o(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("")),0===e.length?this.node.placeholder||"":e},f.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,f.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,f.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,f.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,n.exports=f},{"./color":3,"./utils":26}],15:[function(e,n){function f(e,n,f,o,d){N("Starting NodeParser"),this.renderer=n,this.options=d,this.range=null,this.support=f,this.renderQueue=[],this.stack=new U(!0,1,e.ownerDocument,null);var i=new P(e,null);if(d.background&&n.rectangle(0,0,n.width,n.height,new T(d.background)),e===e.ownerDocument.documentElement){var t=new P(i.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);n.rectangle(0,0,n.width,n.height,t.color("backgroundColor"))}i.visibile=i.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=I([i].concat(this.getChildren(i)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new S,N("Fetched nodes, total:",this.nodes.length),N("Calculate overflow clips"),this.calculateOverflowClips(),N("Start fetching images"),this.images=o.fetch(this.nodes.filter(A)),this.ready=this.images.ready.then(W(function(){return N("Images loaded, starting parsing"),N("Creating stacking contexts"),this.createStackingContexts(),N("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),N("Render queue created with "+this.renderQueue.length+" items"),new Promise(W(function(e){d.async?"function"==typeof d.async?d.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function o(e){return e.parent&&e.parent.clip.length}function d(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function i(){}function t(e,n,f,o){return e.map(function(d,i){if(d.width>0){var t=n.left,l=n.top,s=n.width,u=n.height-e[2].width;switch(i){case 0:u=e[0].width,d.args=a({c1:[t,l],c2:[t+s,l],c3:[t+s-e[1].width,l+u],c4:[t+e[3].width,l+u]},o[0],o[1],f.topLeftOuter,f.topLeftInner,f.topRightOuter,f.topRightInner);break;case 1:t=n.left+n.width-e[1].width,s=e[1].width,d.args=a({c1:[t+s,l],c2:[t+s,l+u+e[2].width],c3:[t,l+u],c4:[t,l+e[0].width]},o[1],o[2],f.topRightOuter,f.topRightInner,f.bottomRightOuter,f.bottomRightInner);break;case 2:l=l+n.height-e[2].width,u=e[2].width,d.args=a({c1:[t+s,l+u],c2:[t,l+u],c3:[t+e[3].width,l],c4:[t+s-e[3].width,l]},o[2],o[3],f.bottomRightOuter,f.bottomRightInner,f.bottomLeftOuter,f.bottomLeftInner);break;case 3:s=e[3].width,d.args=a({c1:[t,l+u+e[2].width],c2:[t,l],c3:[t+s,l+e[0].width],c4:[t+s,l+u]},o[3],o[0],f.bottomLeftOuter,f.bottomLeftInner,f.topLeftOuter,f.topLeftInner)}}return d})}function l(e,n,f,o){var d=4*((Math.sqrt(2)-1)/3),i=f*d,t=o*d,l=e+f,s=n+o;return{topLeft:u({x:e,y:s},{x:e,y:s-t},{x:l-i,y:n},{x:l,y:n}),topRight:u({x:e,y:n},{x:e+i,y:n},{x:l,y:s-t},{x:l,y:s}),bottomRight:u({x:l,y:n},{x:l,y:n+t},{x:e+i,y:s},{x:e,y:s}),bottomLeft:u({x:l,y:s},{x:l-i,y:s},{x:e,y:n+t},{x:e,y:n})}}function s(e,n,f){var o=e.left,d=e.top,i=e.width,t=e.height,s=n[0][0]<i/2?n[0][0]:i/2,u=n[0][1]<t/2?n[0][1]:t/2,a=n[1][0]<i/2?n[1][0]:i/2,p=n[1][1]<t/2?n[1][1]:t/2,c=n[2][0]<i/2?n[2][0]:i/2,y=n[2][1]<t/2?n[2][1]:t/2,m=n[3][0]<i/2?n[3][0]:i/2,r=n[3][1]<t/2?n[3][1]:t/2,v=i-a,w=t-y,b=i-c,g=t-r;return{topLeftOuter:l(o,d,s,u).topLeft.subdivide(.5),topLeftInner:l(o+f[3].width,d+f[0].width,Math.max(0,s-f[3].width),Math.max(0,u-f[0].width)).topLeft.subdivide(.5),topRightOuter:l(o+v,d,a,p).topRight.subdivide(.5),topRightInner:l(o+Math.min(v,i+f[3].width),d+f[0].width,v>i+f[3].width?0:a-f[3].width,p-f[0].width).topRight.subdivide(.5),bottomRightOuter:l(o+b,d+w,c,y).bottomRight.subdivide(.5),bottomRightInner:l(o+Math.min(b,i-f[3].width),d+Math.min(w,t+f[0].width),Math.max(0,c-f[1].width),y-f[2].width).bottomRight.subdivide(.5),bottomLeftOuter:l(o,d+g,m,r).bottomLeft.subdivide(.5),bottomLeftInner:l(o+f[3].width,d+g,Math.max(0,m-f[3].width),r-f[2].width).bottomLeft.subdivide(.5)}
}function u(e,n,f,o){var d=function(e,n,f){return{x:e.x+(n.x-e.x)*f,y:e.y+(n.y-e.y)*f}};return{start:e,startControl:n,endControl:f,end:o,subdivide:function(i){var t=d(e,n,i),l=d(n,f,i),s=d(f,o,i),a=d(t,l,i),p=d(l,s,i),c=d(a,p,i);return[u(e,t,a,c),u(c,p,s,o)]},curveTo:function(e){e.push(["bezierCurve",n.x,n.y,f.x,f.y,o.x,o.y])},curveToReversed:function(o){o.push(["bezierCurve",f.x,f.y,n.x,n.y,e.x,e.y])}}}function a(e,n,f,o,d,i,t){var l=[];return n[0]>0||n[1]>0?(l.push(["line",o[1].start.x,o[1].start.y]),o[1].curveTo(l)):l.push(["line",e.c1[0],e.c1[1]]),f[0]>0||f[1]>0?(l.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(l),l.push(["line",t[0].end.x,t[0].end.y]),t[0].curveToReversed(l)):(l.push(["line",e.c2[0],e.c2[1]]),l.push(["line",e.c3[0],e.c3[1]])),n[0]>0||n[1]>0?(l.push(["line",d[1].end.x,d[1].end.y]),d[1].curveToReversed(l)):l.push(["line",e.c4[0],e.c4[1]]),l}function p(e,n,f,o,d,i,t){n[0]>0||n[1]>0?(e.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(e),o[1].curveTo(e)):e.push(["line",i,t]),(f[0]>0||f[1]>0)&&e.push(["line",d[0].start.x,d[0].start.y])}function c(e){return e.cssInt("zIndex")<0}function y(e){return e.cssInt("zIndex")>0}function m(e){return 0===e.cssInt("zIndex")}function r(e){return-1!==["inline","inline-block","inline-table"].indexOf(e.css("display"))}function v(e){return e instanceof U}function w(e){return e.node.data.trim().length>0}function b(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}function g(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(n){var f=e.css("border"+n+"Radius"),o=f.split(" ");return o.length<=1&&(o[1]=o[0]),o.map(F)})}function h(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function x(e){var n=e.css("position"),f=-1!==["absolute","relative","fixed"].indexOf(n)?e.css("zIndex"):"auto";return"auto"!==f}function j(e){return"static"!==e.css("position")}function k(e){return"none"!==e.css("float")}function q(e){return-1!==["inline-block","inline-table"].indexOf(e.css("display"))}function z(e){var n=this;return function(){return!e.apply(n,arguments)}}function A(e){return e.node.nodeType===Node.ELEMENT_NODE}function B(e){return e.isPseudoElement===!0}function C(e){return e.node.nodeType===Node.TEXT_NODE}function D(e){return function(n,f){return n.cssInt("zIndex")+e.indexOf(n)/e.length-(f.cssInt("zIndex")+e.indexOf(f)/e.length)}}function E(e){return e.getOpacity()<1}function F(e){return parseInt(e,10)}function G(e){return e.width}function H(e){return e.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)}function I(e){return[].concat.apply([],e)}function J(e){var n=e.substr(0,1);return n===e.substr(e.length-1)&&n.match(/'|"/)?e.substr(1,e.length-2):e}function K(e){for(var n,f=[],o=0,d=!1;e.length;)L(e[o])===d?(n=e.splice(0,o),n.length&&f.push(O.ucs2.encode(n)),d=!d,o=0):o++,o>=e.length&&(n=e.splice(0,o),n.length&&f.push(O.ucs2.encode(n)));return f}function L(e){return-1!==[32,13,10,9,45].indexOf(e)}function M(e){return/[^\u0000-\u00ff]/.test(e)}var N=e("./log"),O=e("punycode"),P=e("./nodecontainer"),Q=e("./textcontainer"),R=e("./pseudoelementcontainer"),S=e("./fontmetrics"),T=e("./color"),U=e("./stackingcontext"),V=e("./utils"),W=V.bind,X=V.getBounds,Y=V.parseBackgrounds,Z=V.offsetBounds;f.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(A(e)){B(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var n="hidden"===e.css("overflow")?[e.borders.clip]:[],f=e.parseClip();f&&-1!==["absolute","fixed"].indexOf(e.css("position"))&&n.push([["rect",e.bounds.left+f.left,e.bounds.top+f.top,f.right-f.left,f.bottom-f.top]]),e.clip=o(e)?e.parent.clip.concat(n):n,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,B(e)&&e.cleanDOM()}else C(e)&&(e.clip=o(e)?e.parent.clip:[]);B(e)||(e.bounds=null)},this)},f.prototype.asyncRenderer=function(e,n,f){f=f||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?n():f+20>Date.now()?this.asyncRenderer(e,n,f):setTimeout(W(function(){this.asyncRenderer(e,n)},this),0)},f.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+R.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+R.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},f.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},f.prototype.createStyles=function(e,n){var f=e.createElement("style");f.innerHTML=n,e.body.appendChild(f)},f.prototype.getPseudoElements=function(e){var n=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var f=this.getPseudoElement(e,":before"),o=this.getPseudoElement(e,":after");f&&n.push(f),o&&n.push(o)}return I(n)},f.prototype.getPseudoElement=function(e,n){var f=e.computedStyle(n);if(!f||!f.content||"none"===f.content||"-moz-alt-content"===f.content||"none"===f.display)return null;for(var o=J(f.content),i="url"===o.substr(0,3),t=document.createElement(i?"img":"html2canvaspseudoelement"),l=new R(t,e,n),s=f.length-1;s>=0;s--){var u=d(f.item(s));t.style[u]=f[u]}if(t.className=R.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+R.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,i)return t.src=Y(o)[0].args[0],[l];var a=document.createTextNode(o);return t.appendChild(a),[l,new Q(a,l)]},f.prototype.getChildren=function(e){return I([].filter.call(e.node.childNodes,h).map(function(n){var f=[n.nodeType===Node.TEXT_NODE?new Q(n,e):new P(n,e)].filter(H);return n.nodeType===Node.ELEMENT_NODE&&f.length&&"TEXTAREA"!==n.tagName?f[0].isElementVisible()?f.concat(this.getChildren(f[0])):[]:f},this))},f.prototype.newStackingContext=function(e,n){var f=new U(n,e.getOpacity(),e.node,e.parent);e.cloneTo(f);var o=n?f.getParentStack(this):f.parent.stack;o.contexts.push(f),e.stack=f},f.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){A(e)&&(this.isRootElement(e)||E(e)||x(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):A(e)&&(j(e)&&m(e)||q(e)||k(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},f.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},f.prototype.isRootElement=function(e){return null===e.parent},f.prototype.sortStackingContexts=function(e){e.contexts.sort(D(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},f.prototype.parseTextBounds=function(e){return function(n,f,o){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==n.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var d=o.slice(0,f).join("").length;return this.getRangeBounds(e.node,d,n.length)}if(e.node&&"string"==typeof e.node.data){var i=e.node.splitText(n.length),t=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=i,t}}else(!this.support.rangeBounds||e.parent.hasTransform())&&(e.node=e.node.splitText(n.length));return{}}},f.prototype.getWrapperBounds=function(e,n){var f=e.ownerDocument.createElement("html2canvaswrapper"),o=e.parentNode,d=e.cloneNode(!0);f.appendChild(e.cloneNode(!0)),o.replaceChild(f,e);var i=n?Z(f):X(f);return o.replaceChild(d,f),i},f.prototype.getRangeBounds=function(e,n,f){var o=this.range||(this.range=e.ownerDocument.createRange());return o.setStart(e,n),o.setEnd(e,n+f),o.getBoundingClientRect()},f.prototype.parse=function(e){var n=e.contexts.filter(c),f=e.children.filter(A),o=f.filter(z(k)),d=o.filter(z(j)).filter(z(r)),t=f.filter(z(j)).filter(k),l=o.filter(z(j)).filter(r),s=e.contexts.concat(o.filter(j)).filter(m),u=e.children.filter(C).filter(w),a=e.contexts.filter(y);n.concat(d).concat(t).concat(l).concat(s).concat(u).concat(a).forEach(function(e){this.renderQueue.push(e),v(e)&&(this.parse(e),this.renderQueue.push(new i))},this)},f.prototype.paint=function(e){try{e instanceof i?this.renderer.ctx.restore():C(e)?(B(e.parent)&&e.parent.appendToDOM(),this.paintText(e),B(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(n){if(N(n),this.options.strict)throw n}},f.prototype.paintNode=function(e){v(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},f.prototype.paintElement=function(e){var n=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,n,e.borders.borders.map(G))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var f=this.images.get(e.node);f?this.renderer.renderImage(e,n,e.borders,f):N("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var o=this.images.get(e.node.src);o?this.renderer.renderImage(e,n,e.borders,o):N("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,n,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},f.prototype.paintCheckbox=function(e){var n=e.parseBounds(),f=Math.min(n.width,n.height),o={width:f-1,height:f-1,top:n.top,left:n.left},d=[3,3],i=[d,d,d,d],l=[1,1,1,1].map(function(e){return{color:new T("#A5A5A5"),width:e}}),u=s(o,i,l);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(o.left+1,o.top+1,o.width-2,o.height-2,new T("#DEDEDE")),this.renderer.renderBorders(t(l,o,u,i)),e.node.checked&&(this.renderer.font(new T("#424242"),"normal","normal","bold",f-3+"px","arial"),this.renderer.text("",o.left+f/6,o.top+f-1))},this)},f.prototype.paintRadio=function(e){var n=e.parseBounds(),f=Math.min(n.width,n.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(n.left+1,n.top+1,f,new T("#DEDEDE"),1,new T("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(n.left+f/4)+1,Math.ceil(n.top+f/4)+1,Math.floor(f/2),new T("#424242"))},this)},f.prototype.paintFormValue=function(e){var n=e.getValue();if(n.length>0){var f=e.node.ownerDocument,o=f.createElement("html2canvaswrapper"),d=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];d.forEach(function(n){try{o.style[n]=e.css(n)}catch(f){N("html2canvas: Parse: Exception caught in renderFormValue: "+f.message)}});var i=e.parseBounds();o.style.position="fixed",o.style.left=i.left+"px",o.style.top=i.top+"px",o.textContent=n,f.body.appendChild(o),this.paintText(new Q(o.firstChild,e)),f.body.removeChild(o)}},f.prototype.paintText=function(e){e.applyTextTransform();var n=O.ucs2.decode(e.node.data),f=this.options.letterRendering&&!b(e)||M(e.node.data)?n.map(function(e){return O.ucs2.encode([e])}):K(n),o=e.parent.fontWeight(),d=e.parent.css("fontSize"),i=e.parent.css("fontFamily"),t=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),o,d,i),t.length?this.renderer.fontShadow(t[0].color,t[0].offsetX,t[0].offsetY,t[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){f.map(this.parseTextBounds(e),this).forEach(function(n,o){n&&(this.renderer.text(f[o],n.left,n.bottom),this.renderTextDecoration(e.parent,n,this.fontMetrics.getMetrics(i,d)))},this)},this)},f.prototype.renderTextDecoration=function(e,n,f){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(n.left,Math.round(n.top+f.baseline+f.lineWidth),n.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(n.left,Math.round(n.top),n.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(n.left,Math.ceil(n.top+f.middle+f.lineWidth),n.width,1,e.color("color"))}};var $={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};f.prototype.parseBorders=function(e){var n=e.parseBounds(),f=g(e),o=["Top","Right","Bottom","Left"].map(function(n,f){var o=e.css("border"+n+"Style"),d=e.color("border"+n+"Color");"inset"===o&&d.isBlack()&&(d=new T([255,255,255,d.a]));var i=$[o]?$[o][f]:null;return{width:e.cssInt("border"+n+"Width"),color:i?d[i[0]](i[1]):d,args:null}}),d=s(n,f,o);return{clip:this.parseBackgroundClip(e,d,o,f,n),borders:t(o,n,d,f)}},f.prototype.parseBackgroundClip=function(e,n,f,o,d){var i=e.css("backgroundClip"),t=[];switch(i){case"content-box":case"padding-box":p(t,o[0],o[1],n.topLeftInner,n.topRightInner,d.left+f[3].width,d.top+f[0].width),p(t,o[1],o[2],n.topRightInner,n.bottomRightInner,d.left+d.width-f[1].width,d.top+f[0].width),p(t,o[2],o[3],n.bottomRightInner,n.bottomLeftInner,d.left+d.width-f[1].width,d.top+d.height-f[2].width),p(t,o[3],o[0],n.bottomLeftInner,n.topLeftInner,d.left+f[3].width,d.top+d.height-f[2].width);break;default:p(t,o[0],o[1],n.topLeftOuter,n.topRightOuter,d.left,d.top),p(t,o[1],o[2],n.topRightOuter,n.bottomRightOuter,d.left+d.width,d.top),p(t,o[2],o[3],n.bottomRightOuter,n.bottomLeftOuter,d.left+d.width,d.top+d.height),p(t,o[3],o[0],n.bottomLeftOuter,n.topLeftOuter,d.left,d.top+d.height)}return t},n.exports=f},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(e,n,f){function o(e,n,f){var o="withCredentials"in new XMLHttpRequest;if(!n)return Promise.reject("No proxy configured");var d=t(o),s=l(n,e,d);return o?a(s):i(f,s,d).then(function(e){return m(e.content)})}function d(e,n,f){var o="crossOrigin"in new Image,d=t(o),s=l(n,e,d);return o?Promise.resolve(s):i(f,s,d).then(function(e){return"data:"+e.type+";base64,"+e.content})}function i(e,n,f){return new Promise(function(o,d){var i=e.createElement("script"),t=function(){delete window.html2canvas.proxy[f],e.body.removeChild(i)};window.html2canvas.proxy[f]=function(e){t(),o(e)},i.src=n,i.onerror=function(e){t(),d(e)},e.body.appendChild(i)})}function t(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++r+"_"+Math.round(1e5*Math.random())}function l(e,n,f){return e+"?url="+encodeURIComponent(n)+(f.length?"&callback=html2canvas.proxy."+f:"")}function s(e){return function(n){var f,o=new DOMParser;try{f=o.parseFromString(n,"text/html")}catch(d){c("DOMParser not supported, falling back to createHTMLDocument"),f=document.implementation.createHTMLDocument("");try{f.open(),f.write(n),f.close()}catch(i){c("createHTMLDocument write not supported, falling back to document.body.innerHTML"),f.body.innerHTML=n}}var t=f.querySelector("base");if(!t||!t.href.host){var l=f.createElement("base");l.href=e,f.head.insertBefore(l,f.head.firstChild)}return f}}function u(e,n,f,d,i,t){return new o(e,n,window.document).then(s(e)).then(function(e){return y(e,f,d,i,t,0,0)})}var a=e("./xhr"),p=e("./utils"),c=e("./log"),y=e("./clone"),m=p.decode64,r=0;f.Proxy=o,f.ProxyURL=d,f.loadUrlDocument=u},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(e,n){function f(e,n){var f=document.createElement("a");f.href=e,e=f.href,this.src=e,this.image=new Image;var d=this;this.promise=new Promise(function(f,i){d.image.crossOrigin="Anonymous",d.image.onload=f,d.image.onerror=i,new o(e,n,document).then(function(e){d.image.src=e})["catch"](i)})}var o=e("./proxy").ProxyURL;n.exports=f},{"./proxy":16}],18:[function(e,n){function f(e,n,f){o.call(this,e,n),this.isPseudoElement=!0,this.before=":before"===f}var o=e("./nodecontainer");f.prototype.cloneTo=function(e){f.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},f.prototype=Object.create(o.prototype),f.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},f.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},f.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},f.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",f.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",n.exports=f},{"./nodecontainer":14}],19:[function(e,n){function f(e,n,f,o,d){this.width=e,this.height=n,this.images=f,this.options=o,this.document=d}var o=e("./log");f.prototype.renderImage=function(e,n,f,o){var d=e.cssInt("paddingLeft"),i=e.cssInt("paddingTop"),t=e.cssInt("paddingRight"),l=e.cssInt("paddingBottom"),s=f.borders,u=n.width-(s[1].width+s[3].width+d+t),a=n.height-(s[0].width+s[2].width+i+l);this.drawImage(o,0,0,o.image.width||u,o.image.height||a,n.left+d+s[3].width,n.top+i+s[0].width,u,a)},f.prototype.renderBackground=function(e,n,f){n.height>0&&n.width>0&&(this.renderBackgroundColor(e,n),this.renderBackgroundImage(e,n,f))},f.prototype.renderBackgroundColor=function(e,n){var f=e.color("backgroundColor");f.isTransparent()||this.rectangle(n.left,n.top,n.width,n.height,f)},f.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},f.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},f.prototype.renderBackgroundImage=function(e,n,f){var d=e.parseBackgroundImages();d.reverse().forEach(function(d,i,t){switch(d.method){case"url":var l=this.images.get(d.args[0]);l?this.renderBackgroundRepeating(e,n,l,t.length-(i+1),f):o("Error loading background-image",d.args[0]);break;case"linear-gradient":case"gradient":var s=this.images.get(d.value);s?this.renderBackgroundGradient(s,n,f):o("Error loading background-image",d.args[0]);break;case"none":break;default:o("Unknown background-image type",d.args[0])}},this)},f.prototype.renderBackgroundRepeating=function(e,n,f,o,d){var i=e.parseBackgroundSize(n,f.image,o),t=e.parseBackgroundPosition(n,f.image,o,i),l=e.parseBackgroundRepeat(o);switch(l){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(f,t,i,n,n.left+d[3],n.top+t.top+d[0],99999,i.height,d);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(f,t,i,n,n.left+t.left+d[3],n.top+d[0],i.width,99999,d);break;case"no-repeat":this.backgroundRepeatShape(f,t,i,n,n.left+t.left+d[3],n.top+t.top+d[0],i.width,i.height,d);break;default:this.renderBackgroundRepeat(f,t,i,{top:n.top,left:n.left},d[3],d[0])}},n.exports=f},{"./log":13}],20:[function(e,n){function f(e,n){d.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=n),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},t("Initialized CanvasRenderer with size",e,"x",n)}function o(e){return e.length>0}var d=e("../renderer"),i=e("../lineargradientcontainer"),t=e("../log");f.prototype=Object.create(d.prototype),f.prototype.setFillStyle=function(e){return this.ctx.fillStyle="object"==typeof e&&e.isColor?e.toString():e,this.ctx},f.prototype.rectangle=function(e,n,f,o,d){this.setFillStyle(d).fillRect(e,n,f,o)},f.prototype.circle=function(e,n,f,o){this.setFillStyle(o),this.ctx.beginPath(),this.ctx.arc(e+f/2,n+f/2,f/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},f.prototype.circleStroke=function(e,n,f,o,d,i){this.circle(e,n,f,o),this.ctx.strokeStyle=i.toString(),this.ctx.stroke()},f.prototype.drawShape=function(e,n){this.shape(e),this.setFillStyle(n).fill()},f.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(n){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},f.prototype.drawImage=function(e,n,f,o,d,i,t,l,s){(!this.taints(e)||this.options.allowTaint)&&this.ctx.drawImage(e.image,n,f,o,d,i,t,l,s)},f.prototype.clip=function(e,n,f){this.ctx.save(),e.filter(o).forEach(function(e){this.shape(e).clip()},this),n.call(f),this.ctx.restore()},f.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,n){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===n?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},f.prototype.font=function(e,n,f,o,d,i){this.setFillStyle(e).font=[n,f,o,d,i].join(" ").split(",")[0]},f.prototype.fontShadow=function(e,n,f,o){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",n).setVariable("shadowOffsetX",f).setVariable("shadowBlur",o)},f.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},f.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},f.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},f.prototype.setVariable=function(e,n){return this.variables[e]!==n&&(this.variables[e]=this.ctx[e]=n),this},f.prototype.text=function(e,n,f){this.ctx.fillText(e,n,f)},f.prototype.backgroundRepeatShape=function(e,n,f,o,d,i,t,l,s){var u=[["line",Math.round(d),Math.round(i)],["line",Math.round(d+t),Math.round(i)],["line",Math.round(d+t),Math.round(l+i)],["line",Math.round(d),Math.round(l+i)]];this.clip([u],function(){this.renderBackgroundRepeat(e,n,f,o,s[3],s[0])},this)},f.prototype.renderBackgroundRepeat=function(e,n,f,o,d,i){var t=Math.round(o.left+n.left+d),l=Math.round(o.top+n.top+i);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,f),"repeat")),this.ctx.translate(t,l),this.ctx.fill(),this.ctx.translate(-t,-l)},f.prototype.renderBackgroundGradient=function(e,n){if(e instanceof i){var f=this.ctx.createLinearGradient(n.left+n.width*e.x0,n.top+n.height*e.y0,n.left+n.width*e.x1,n.top+n.height*e.y1);e.colorStops.forEach(function(e){f.addColorStop(e.stop,e.color.toString())}),this.rectangle(n.left,n.top,n.width,n.height,f)}},f.prototype.resizeImage=function(e,n){var f=e.image;if(f.width===n.width&&f.height===n.height)return f;var o,d=document.createElement("canvas");return d.width=n.width,d.height=n.height,o=d.getContext("2d"),o.drawImage(f,0,0,f.width,f.height,0,0,n.width,n.height),d},n.exports=f},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(e,n){function f(e,n,f,d){o.call(this,f,d),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*n}var o=e("./nodecontainer");f.prototype=Object.create(o.prototype),f.prototype.getParentStack=function(e){var n=this.parent?this.parent.stack:null;return n?n.ownStacking?n:n.getParentStack(e):e.stack},n.exports=f},{"./nodecontainer":14}],22:[function(e,n){function f(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}f.prototype.testRangeBounds=function(e){var n,f,o,d,i=!1;return e.createRange&&(n=e.createRange(),n.getBoundingClientRect&&(f=e.createElement("boundtest"),f.style.height="123px",f.style.display="block",e.body.appendChild(f),n.selectNode(f),o=n.getBoundingClientRect(),d=o.height,123===d&&(i=!0),e.body.removeChild(f))),i},f.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},f.prototype.testSVG=function(){var e=new Image,n=document.createElement("canvas"),f=n.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{f.drawImage(e,0,0),n.toDataURL()}catch(o){return!1}return!0},n.exports=f},{}],23:[function(e,n){function f(e){this.src=e,this.image=null;var n=this;this.promise=this.hasFabric().then(function(){return n.isInline(e)?Promise.resolve(n.inlineFormatting(e)):o(e)}).then(function(e){return new Promise(function(f){window.html2canvas.svg.fabric.loadSVGFromString(e,n.createCanvas.call(n,f))})})}var o=e("./xhr"),d=e("./utils").decode64;f.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},f.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},f.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},f.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},f.prototype.createCanvas=function(e){var n=this;return function(f,o){var d=new window.html2canvas.svg.fabric.StaticCanvas("c");n.image=d.lowerCanvasEl,d.setWidth(o.width).setHeight(o.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(f,o)).renderAll(),e(d.lowerCanvasEl)}},f.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):d(e)},n.exports=f},{"./utils":26,"./xhr":28}],24:[function(e,n){function f(e,n){this.src=e,this.image=null;var f=this;this.promise=n?new Promise(function(n,o){f.image=new Image,f.image.onload=n,f.image.onerror=o,f.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),f.image.complete===!0&&n(f.image)}):this.hasFabric().then(function(){return new Promise(function(n){window.html2canvas.svg.fabric.parseSVGDocument(e,f.createCanvas.call(f,n))})})}var o=e("./svgcontainer");f.prototype=Object.create(o.prototype),n.exports=f},{"./svgcontainer":23}],25:[function(e,n){function f(e,n){d.call(this,e,n)}function o(e,n,f){return e.length>0?n+f.toUpperCase():void 0}var d=e("./nodecontainer");f.prototype=Object.create(d.prototype),f.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},f.prototype.transform=function(e){var n=this.node.data;switch(e){case"lowercase":return n.toLowerCase();case"capitalize":return n.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return n.toUpperCase();default:return n}},n.exports=f},{"./nodecontainer":14}],26:[function(e,n,f){f.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},f.bind=function(e,n){return function(){return e.apply(n,arguments)}},f.decode64=function(e){var n,f,o,d,i,t,l,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=e.length,p="";for(n=0;a>n;n+=4)f=u.indexOf(e[n]),o=u.indexOf(e[n+1]),d=u.indexOf(e[n+2]),i=u.indexOf(e[n+3]),t=f<<2|o>>4,l=(15&o)<<4|d>>2,s=(3&d)<<6|i,p+=64===d?String.fromCharCode(t):64===i||-1===i?String.fromCharCode(t,l):String.fromCharCode(t,l,s);return p},f.getBounds=function(e){if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),f=null==e.offsetWidth?n.width:e.offsetWidth;return{top:n.top,bottom:n.bottom||n.top+n.height,right:n.left+f,left:n.left,width:f,height:null==e.offsetHeight?n.height:e.offsetHeight}}return{}},f.offsetBounds=function(e){var n=e.offsetParent?f.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+n.top,bottom:e.offsetTop+e.offsetHeight+n.top,right:e.offsetLeft+n.left+e.offsetWidth,left:e.offsetLeft+n.left,width:e.offsetWidth,height:e.offsetHeight}},f.parseBackgrounds=function(e){var n,f,o,d,i,t,l,s=" \r\n	",u=[],a=0,p=0,c=function(){n&&('"'===f.substr(0,1)&&(f=f.substr(1,f.length-2)),f&&l.push(f),"-"===n.substr(0,1)&&(d=n.indexOf("-",1)+1)>0&&(o=n.substr(0,d),n=n.substr(d)),u.push({prefix:o,method:n.toLowerCase(),value:i,args:l,image:null})),l=[],n=o=f=i=""};return l=[],n=o=f=i="",e.split("").forEach(function(e){if(!(0===a&&s.indexOf(e)>-1)){switch(e){case'"':t?t===e&&(t=null):t=e;break;case"(":if(t)break;if(0===a)return a=1,void(i+=e);p++;break;case")":if(t)break;if(1===a){if(0===p)return a=0,i+=e,void c();p--}break;case",":if(t)break;if(0===a)return void c();if(1===a&&0===p&&!n.match(/^url$/i))return l.push(f),f="",void(i+=e)}i+=e,0===a?n+=e:f+=e}}),c(),u}},{}],27:[function(e,n){function f(e){o.apply(this,arguments),this.type="linear"===e.args[0]?o.TYPES.LINEAR:o.TYPES.RADIAL}var o=e("./gradientcontainer");f.prototype=Object.create(o.prototype),n.exports=f},{"./gradientcontainer":9}],28:[function(e,n){function f(e){return new Promise(function(n,f){var o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){200===o.status?n(o.responseText):f(new Error(o.statusText))},o.onerror=function(){f(new Error("Network Error"))},o.send()})}n.exports=f},{}]},{},[4])(4)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L0RvY3VtZW50cy9naXQvZGlzcnVwdC5qcy9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL21haW4uanMiLCJEOi9Eb2N1bWVudHMvZ2l0L2Rpc3J1cHQuanMvdmVuZG9yL2h0bWwyY2FudmFzLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdHZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNvbnN0IGh0bWwyY2FudmFzID0gcmVxdWlyZSgnLi4vdmVuZG9yL2h0bWwyY2FudmFzLm1pbi5qcycpXHJcblxyXG4vKipcclxuICogTU9VU0UgY2xhc3MsIGZvciBiYXNpYyBtb3VzZSB0cmFja2luZ1xyXG4gKi9cclxuXHJcbmNsYXNzIE1vdXNlIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLnggPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDJcclxuICAgIHRoaXMueSA9IHdpbmRvdy5pbm5lckhlaWdodCAvIDJcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZSA9PiB7XHJcbiAgICAgIHRoaXMueCA9IGUuY2xpZW50WFxyXG4gICAgICB0aGlzLnkgPSBlLmNsaWVudFlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXQgcG9zICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHg6IHRoaXMueCxcclxuICAgICAgeTogdGhpcy55XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBNT1VTRSA9IG5ldyBNb3VzZSgpXHJcblxyXG4vKipcclxuICogVHJpZ29ub21ldHJ5IGNsYXNzXHJcbiAqL1xyXG5cclxuY2xhc3MgVHJpZyB7XHJcbiAgc3RhdGljIGRpc3RhbmNlQmV0d2VlbiAocDEsIHAyKSB7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHAyLnggLSBwMS54LCAyKSArIE1hdGgucG93KHAyLnkgLSBwMS55LCAyKSlcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhbmdsZUJldHdlZW4gKHAxLCBwMikge1xyXG4gICAgcmV0dXJuIE1hdGguYXRhbjIocDIueSAtIHAxLnksIHAyLnggLSBwMS54KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGxlbmd0aGRpclggKGxlbiwgZGlyKSB7XHJcbiAgICByZXR1cm4gbGVuICogTWF0aC5jb3MoZGlyKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGxlbmd0aGRpclkgKGxlbiwgZGlyKSB7XHJcbiAgICByZXR1cm4gbGVuICogTWF0aC5zaW4oZGlyKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERJU1JVUFQgY2xhc3MsIGZvciBoYW5kbGluZyBkaXNydXB0aW9uc1xyXG4gKi9cclxuXHJcbmNsYXNzIERJU1JVUFQge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMuRE9NVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMIHx8IHdpbmRvd1xyXG5cclxuICAgIHRoaXMudGFyZ2V0Q2xhc3MgPSAnZGlzcnVwdCdcclxuICAgIHRoaXMuZGlzcnVwdGFibGVzID0ge31cclxuXHJcbiAgICB0aGlzLmRpc3J1cHRpb25Db3VudGVyID0gMFxyXG5cclxuICAgIHRoaXMuR0VORVJBVE9SUyA9IHtcclxuICAgICAgcmFuZG9tUmVjdDogY2FudmFzID0+IHtcclxuICAgICAgICBsZXQgeCA9IGNhbnZhcy53aWR0aCAqIE1hdGgucmFuZG9tKClcclxuICAgICAgICBsZXQgeSA9IGNhbnZhcy5oZWlnaHQgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgbGV0IHcgPSAoY2FudmFzLndpZHRoIC0geCkgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgbGV0IGggPSAoY2FudmFzLmhlaWdodCAtIHkpICogTWF0aC5yYW5kb20oKVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3g6IHgsXHJcbiAgICAgICAgICBzeTogeSxcclxuICAgICAgICAgIHc6IHcsXHJcbiAgICAgICAgICBoOiBoLFxyXG4gICAgICAgICAgZHg6IHgsXHJcbiAgICAgICAgICBkeTogeVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIERpc3J1cHRpb24gYW5pbWF0aW9uc1xyXG4gICAgdGhpcy5ESVNSVVBUSU9OUyA9IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEhvcml6b250YWwgYmFycyB0aGF0IHNoYWtlIGxlZnQtdG8tcmlnaHRcclxuICAgICAgICovXHJcbiAgICAgICdkc3JwdC1ob3Jpem9udGFsJzoge1xyXG4gICAgICAgIHNldHVwOiBjYW52YXMgPT4ge1xyXG4gICAgICAgICAgbGV0IG51bUxpbmVzID0gN1xyXG4gICAgICAgICAgbGV0IGxpbmVIZWlnaHQgPSBjYW52YXMuaGVpZ2h0IC8gbnVtTGluZXNcclxuICAgICAgICAgIGxldCBsaW5lcyA9IFtdXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUxpbmVzOyBpKyspIHtcclxuICAgICAgICAgICAgbGluZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgc3g6IDAsXHJcbiAgICAgICAgICAgICAgc3k6IGxpbmVIZWlnaHQgKiBpLFxyXG4gICAgICAgICAgICAgIHc6IGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgICAgICBoOiBsaW5lSGVpZ2h0LFxyXG4gICAgICAgICAgICAgIGR4OiAwLFxyXG4gICAgICAgICAgICAgIGR5OiBsaW5lSGVpZ2h0ICogaSxcclxuICAgICAgICAgICAgICBuZXh0TW92ZW1lbnQ6IDAsXHJcbiAgICAgICAgICAgICAgb2Zmc2V0OiAwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcnVudGltZTogMjAwMCxcclxuICAgICAgICAgICAgbGluZXM6IGxpbmVzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbmltYXRlOiAoY2FudmFzLCBkb21JbWFnZSwgc2V0dXBEYXRhLCBwcm9ncmVzcykgPT4ge1xyXG4gICAgICAgICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICAgICAgICBsZXQgbGluZXMgPSBzZXR1cERhdGEubGluZXNcclxuICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5cclxuICAgICAgICAgIC8vIEFuaW1hdGUgbGluZXNcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1tpXVxyXG5cclxuICAgICAgICAgICAgLy8gU2hvdWxkIHRoaXMgbGluZSBtb3ZlIHRoaXMgZnJhbWU/XHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzcyA+IGxpbmUubmV4dE1vdmVtZW50KSB7XHJcbiAgICAgICAgICAgICAgLy8gT2Zmc2V0IHNob3VsZCBiZSAwIGlmIGFuaW1hdGlvbiBpcyBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgIGlmIChwcm9ncmVzcyA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lLm9mZnNldCA9IDBcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9mZnNldCA9IE1hdGgucmFuZG9tKCkgKiBsaW5lLmggKiAyIC0gbGluZS5oXHJcbiAgICAgICAgICAgICAgICBsZXQgZGFtcGVuZXIgPSBNYXRoLm1heCgwLCAxIC0gcHJvZ3Jlc3MpXHJcbiAgICAgICAgICAgICAgICBsaW5lLm9mZnNldCA9IG9mZnNldCAqIGRhbXBlbmVyXHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAvLyBTZXQgdGltZSBmb3IgbmV4dCBtb3ZlbWVudFxyXG4gICAgICAgICAgICAgIGxpbmUubmV4dE1vdmVtZW50ICs9IE1hdGgucmFuZG9tKCkgKiAwLjNcclxuICAgICAgICAgICAgICBsaW5lLm5leHRNb3ZlbWVudCA9IE1hdGgubWluKDEsIGxpbmUubmV4dE1vdmVtZW50KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3IHRoZSBsaW5lXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZG9tSW1hZ2UsIGxpbmUuc3gsIGxpbmUuc3ksIGxpbmUudywgbGluZS5oLCBsaW5lLmR4ICsgbGluZS5vZmZzZXQsIGxpbmUuZHksIGxpbmUudywgbGluZS5oKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBBIGRpc3RvcnRlZCBjaGVja2VyYm9hcmQgZWZmZWN0IHRoYXQgc2xvd2x5IGRpc3NvbHZlcyBpblxyXG4gICAgICAgKi9cclxuICAgICAgJ2RzcnB0LWRpc3NvbHZlJzoge1xyXG4gICAgICAgIHNldHVwOiBjYW52YXMgPT4ge1xyXG4gICAgICAgICAgbGV0IHJvd3MgPSAzMFxyXG4gICAgICAgICAgbGV0IGNvbHVtbnMgPSA4XHJcblxyXG4gICAgICAgICAgbGV0IHcgPSBjYW52YXMud2lkdGggLyByb3dzXHJcbiAgICAgICAgICBsZXQgaCA9IGNhbnZhcy5oZWlnaHQgLyBjb2x1bW5zXHJcblxyXG4gICAgICAgICAgbGV0IGdyaWQgPSBbXVxyXG4gICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCByb3dzOyByKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBjb2x1bW5zOyBjKyspIHtcclxuICAgICAgICAgICAgICBncmlkLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgeDogciAqIHcsXHJcbiAgICAgICAgICAgICAgICB5OiBjICogaCxcclxuICAgICAgICAgICAgICAgIHc6IHcsXHJcbiAgICAgICAgICAgICAgICBoOiBoLFxyXG4gICAgICAgICAgICAgICAgeE9mZjogdyAqIChNYXRoLnJhbmRvbSgpICogMiAtIDEpLFxyXG4gICAgICAgICAgICAgICAgeU9mZjogaCAqIChNYXRoLnJhbmRvbSgpICogMiAtIDEpLFxyXG4gICAgICAgICAgICAgICAgc2hvd0F0OiBNYXRoLnJhbmRvbSgpLFxyXG4gICAgICAgICAgICAgICAgY29ycmVjdEF0OiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJ1bnRpbWU6IDE1MDAsXHJcbiAgICAgICAgICAgIGdyaWQ6IGdyaWRcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFuaW1hdGU6IChjYW52YXMsIGRvbUltYWdlLCBzZXR1cERhdGEsIHByb2dyZXNzKSA9PiB7XHJcbiAgICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcclxuICAgICAgICAgIGxldCBncmlkID0gc2V0dXBEYXRhLmdyaWRcclxuICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5cclxuICAgICAgICAgIC8qIEFOSU1BVElPTiBDT0RFICovXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyaWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHNxdWFyZSA9IGdyaWRbaV1cclxuICAgICAgICAgICAgbGV0IHggPSBzcXVhcmUueFxyXG4gICAgICAgICAgICBsZXQgeSA9IHNxdWFyZS55XHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzcyA+IHNxdWFyZS5zaG93QXQpIHtcclxuICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPCBzcXVhcmUuY29ycmVjdEF0KSB7XHJcbiAgICAgICAgICAgICAgICB4ICs9IHNxdWFyZS54T2ZmXHJcbiAgICAgICAgICAgICAgICB5ICs9IHNxdWFyZS55T2ZmXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZG9tSW1hZ2UsIHNxdWFyZS54LCBzcXVhcmUueSwgc3F1YXJlLncsIHNxdWFyZS5oLCB4LCB5LCBzcXVhcmUudywgc3F1YXJlLmgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQmxvY2tzIG9mIHRoZSBzb3VyY2UgaW1hZ2UgcmVuZGVyIFwiaW5jb3JyZWN0bHlcIiB0aGVuIHNuYXAgaW50byBwbGFjZVxyXG4gICAgICAgKi9cclxuICAgICAgJ2RzcnB0LWJsb2Nrcyc6IHtcclxuICAgICAgICBzZXR1cDogKGNhbnZhcywgZG9tSW1hZ2UsIGdlbmVyYXRvcnMpID0+IHtcclxuICAgICAgICAgIGxldCBudW1ibG9ja3MgPSAxNVxyXG4gICAgICAgICAgbGV0IGJsb2NrcyA9IFtdXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJsb2NrczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBibG9jayA9IGdlbmVyYXRvcnMucmFuZG9tUmVjdChjYW52YXMpXHJcblxyXG4gICAgICAgICAgICBsZXQgbWF4T2Zmc2V0ID0gMjBcclxuXHJcbiAgICAgICAgICAgIGxldCB4T2ZmID0gTWF0aC5yYW5kb20oKSAqIG1heE9mZnNldCAqIDIgLSBtYXhPZmZzZXRcclxuICAgICAgICAgICAgbGV0IHlPZmYgPSBNYXRoLnJhbmRvbSgpICogbWF4T2Zmc2V0ICogMiAtIG1heE9mZnNldFxyXG4gICAgICAgICAgICBibG9jay5keCArPSB4T2ZmXHJcbiAgICAgICAgICAgIGJsb2NrLmR5ICs9IHlPZmZcclxuICAgICAgICAgICAgYmxvY2suc2hvd0F0ID0gTWF0aC5yYW5kb20oKSAqIDAuMVxyXG4gICAgICAgICAgICBibG9jay5yZXBvc2l0aW9uQXQgPSBNYXRoLnJhbmRvbSgpICogMC45ICsgMC4xXHJcblxyXG4gICAgICAgICAgICBibG9ja3MucHVzaChibG9jaylcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBydW50aW1lOiAyNTAwLFxyXG4gICAgICAgICAgICBibG9ja3M6IGJsb2Nrc1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pbWF0ZTogKGNhbnZhcywgZG9tSW1hZ2UsIHNldHVwRGF0YSwgcHJvZ3Jlc3MpID0+IHtcclxuICAgICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG4gICAgICAgICAgbGV0IGJsb2NrcyA9IHNldHVwRGF0YS5ibG9ja3NcclxuXHJcbiAgICAgICAgICAvLyBDbGVhciBjYW52YXNcclxuICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5cclxuICAgICAgICAgIC8vIERyYXcgYmFzZSBpbWFnZSBhbmQgZXJhc2Ugc2VjdGlvbnNcclxuICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZG9tSW1hZ2UsIDAsIDApXHJcblxyXG4gICAgICAgICAgLy8gQ2xlYXIgYXJlYXMgYmVoaW5kIGJsb2Nrc1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9ja3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJsb2NrID0gYmxvY2tzW2ldXHJcbiAgICAgICAgICAgIGlmIChibG9jay5yZXBvc2l0aW9uQXQgPiBwcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoYmxvY2suc3gsIGJsb2NrLnN5LCBibG9jay53LCBibG9jay5oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gRHJhdyBibG9ja3NcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxvY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBibG9jayA9IGJsb2Nrc1tpXVxyXG4gICAgICAgICAgICBpZiAoYmxvY2sucmVwb3NpdGlvbkF0ID4gcHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGRvbUltYWdlLCBibG9jay5zeCwgYmxvY2suc3ksIGJsb2NrLncsIGJsb2NrLmgsIGJsb2NrLmR4LCBibG9jay5keSwgYmxvY2sudywgYmxvY2suaClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBUaGUgc291cmNlIGltYWdlcyBmYWRlcyBpbiBhbmQgc2NhbGVzIGRvd24sIHdpdGggc29tZSBzZWN0aW9uc1xyXG4gICAgICAgKiBnbGl0Y2hpbmcgJiBmcmVlemluZyBhbG9uZyB0aGUgd2F5XHJcbiAgICAgICAqL1xyXG4gICAgICAnZHNycHQtc2NhbGUtZG93bic6IHtcclxuICAgICAgICBzZXR1cDogKGNhbnZhcywgZG9tSW1hZ2UsIGdlbmVyYXRvcnMpID0+IHtcclxuICAgICAgICAgIGxldCBudW1CbG9ja3MgPSAxNVxyXG4gICAgICAgICAgbGV0IGJsb2NrcyA9IFtdXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUJsb2NrczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBibG9jayA9IGdlbmVyYXRvcnMucmFuZG9tUmVjdChjYW52YXMpXHJcbiAgICAgICAgICAgIGJsb2NrLmFuaW1UaW1lID0gTWF0aC5taW4oMC40ICsgTWF0aC5yYW5kb20oKSAqIDAuNywgMSlcclxuICAgICAgICAgICAgYmxvY2suc3RvcEF0ID0gTWF0aC5yYW5kb20oKSAqIGJsb2NrLmFuaW1UaW1lXHJcbiAgICAgICAgICAgIGJsb2NrLnN0b3BMZW5ndGggPSBNYXRoLnJhbmRvbSgpICogTWF0aC5taW4oMC40LCBibG9jay5hbmltVGltZSlcclxuICAgICAgICAgICAgYmxvY2suc3RvcFNjYWxlID0gMFxyXG4gICAgICAgICAgICBibG9ja3MucHVzaChibG9jaylcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gbmV3IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gUHJvcHNcclxuICAgICAgICAgICAgdGhpcy5ydW50aW1lID0gMTUwMFxyXG4gICAgICAgICAgICB0aGlzLmJsb2NrcyA9IGJsb2Nrc1xyXG4gICAgICAgICAgICB0aGlzLnNjYWxlID0ge1xyXG4gICAgICAgICAgICAgIG1pbjogMSxcclxuICAgICAgICAgICAgICBtYXg6IDEuNVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJhc2VYID0gc2NhbGUgPT4gLWNhbnZhcy53aWR0aCAqIChzY2FsZSAtIDEpIC8gMixcclxuICAgICAgICAgICAgdGhpcy5iYXNlWSA9IHNjYWxlID0+IC1jYW52YXMuaGVpZ2h0ICogKHNjYWxlIC0gMSkgLyAyLFxyXG4gICAgICAgICAgICB0aGlzLmdldFNjYWxlID0gcHJvZ3Jlc3MgPT4gdGhpcy5zY2FsZS5tYXggLSB0aGlzLnBhcmFib2xhKHByb2dyZXNzKSAqICh0aGlzLnNjYWxlLm1heCAtIHRoaXMuc2NhbGUubWluKSxcclxuICAgICAgICAgICAgdGhpcy5zY2FsZVByb2dyZXNzID0gKHByb2dyZXNzLCBtYXgpID0+IE1hdGgubWluKHByb2dyZXNzIC8gbWF4LCAxKSxcclxuICAgICAgICAgICAgdGhpcy5wYXJhYm9sYSA9IHggPT4gLU1hdGgucG93KHggLSAxLCAyKSArIDFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFuaW1hdGU6IChjYW52YXMsIGRvbUltYWdlLCBzZXR1cERhdGEsIHByb2dyZXNzKSA9PiB7XHJcbiAgICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcclxuICAgICAgICAgIGxldCBibG9ja3MgPSBzZXR1cERhdGEuYmxvY2tzXHJcblxyXG4gICAgICAgICAgLy8gQ2xlYXIgY2FudmFzXHJcbiAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHJcbiAgICAgICAgICAvLyBBbmltYXRlIGJhc2UgaW1hZ2VcclxuICAgICAgICAgIGxldCBiYXNlUHJvZ3Jlc3MgPSBzZXR1cERhdGEuc2NhbGVQcm9ncmVzcyhwcm9ncmVzcywgMC4zKVxyXG4gICAgICAgICAgbGV0IGJhc2VTY2FsZSA9IHNldHVwRGF0YS5nZXRTY2FsZShiYXNlUHJvZ3Jlc3MpXHJcblxyXG4gICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gYmFzZVByb2dyZXNzXHJcbiAgICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICBkb21JbWFnZSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICBzZXR1cERhdGEuYmFzZVgoYmFzZVNjYWxlKSwgc2V0dXBEYXRhLmJhc2VZKGJhc2VTY2FsZSksIGNhbnZhcy53aWR0aCAqIGJhc2VTY2FsZSwgY2FudmFzLmhlaWdodCAqIGJhc2VTY2FsZVxyXG4gICAgICAgICAgKVxyXG5cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxvY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBibG9jayA9IGJsb2Nrc1tpXVxyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHNlY3Rpb24gZnJvbSBiYXNlIGltYWdlXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDFcclxuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdChzZXR1cERhdGEuYmFzZVgoYmFzZVNjYWxlKSArIGJsb2NrLnN4ICogYmFzZVNjYWxlLCBzZXR1cERhdGEuYmFzZVkoYmFzZVNjYWxlKSArIGJsb2NrLnN5ICogYmFzZVNjYWxlLCBibG9jay53ICogYmFzZVNjYWxlLCBibG9jay5oICogYmFzZVNjYWxlKVxyXG5cclxuICAgICAgICAgICAgbGV0IG15UHJvZyA9IHNldHVwRGF0YS5zY2FsZVByb2dyZXNzKHByb2dyZXNzLCBibG9jay5hbmltVGltZSlcclxuICAgICAgICAgICAgbGV0IHNjYWxlID0gc2V0dXBEYXRhLmdldFNjYWxlKG15UHJvZylcclxuICAgICAgICAgICAgbGV0IGZpbmFsU2NhbGUgPSBzY2FsZVxyXG5cclxuICAgICAgICAgICAgaWYgKGJsb2NrLnN0b3BBdCA8IHByb2dyZXNzICYmIHByb2dyZXNzIDw9IGJsb2NrLnN0b3BBdCArIGJsb2NrLnN0b3BMZW5ndGgpIHtcclxuICAgICAgICAgICAgICBpZiAoYmxvY2suc3RvcFNjYWxlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBibG9jay5zdG9wU2NhbGUgPSBzY2FsZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBmaW5hbFNjYWxlID0gYmxvY2suc3RvcFNjYWxlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IG15UHJvZ1xyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICAgIGRvbUltYWdlLCBibG9jay5zeCwgYmxvY2suc3ksIGJsb2NrLncsIGJsb2NrLmgsXHJcbiAgICAgICAgICAgICAgc2V0dXBEYXRhLmJhc2VYKGZpbmFsU2NhbGUpICsgYmxvY2suc3ggKiBmaW5hbFNjYWxlLCBzZXR1cERhdGEuYmFzZVkoZmluYWxTY2FsZSkgKyBibG9jay5zeSAqIGZpbmFsU2NhbGUsIGJsb2NrLncgKiBmaW5hbFNjYWxlLCBibG9jay5oICogZmluYWxTY2FsZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE9rYXkgbGV0J3MgZ2l2ZSBSR0Igc2hpZnRpbmcgYSBnbyBhZ2FpblxyXG4gICAgICAgKi9cclxuICAgICAgJ2RzcnB0LXJnYi1zaGlmdCc6IHtcclxuICAgICAgICBzZXR1cDogKGNhbnZhcywgZG9tSW1hZ2UpID0+IHtcclxuICAgICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG5cclxuICAgICAgICAgIC8vIFNldCB1cCBjb2xvdXItc2hpZnRlZCBpbWFnZXNcclxuICAgICAgICAgIGxldCBjb2xvdXJOYW1lcyA9IFsgJ3JlZCcsICdncmVlbicsICdibHVlJyBdXHJcbiAgICAgICAgICBsZXQgY29sb3VycyA9IFtdXHJcblxyXG5cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3VyTmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3IGJhc2ljIGltYWdlXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZG9tSW1hZ2UsIDAsIDApXHJcblxyXG4gICAgICAgICAgICAvLyBSZWNvbG91ciBpdFxyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1pbidcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG91ck5hbWVzW2ldXHJcbiAgICAgICAgICAgIGN0eC5yZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuICAgICAgICAgICAgY3R4LmZpbGwoKVxyXG5cclxuICAgICAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpXHJcbiAgICAgICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnXHJcbiAgICAgICAgICAgIGltZy5zcmMgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKVxyXG5cclxuICAgICAgICAgICAgY29sb3Vycy5wdXNoKHtcclxuICAgICAgICAgICAgICBpbWFnZTogaW1nLFxyXG4gICAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgICAgZHg6IDAsXHJcbiAgICAgICAgICAgICAgY2hhbmdlRnJlcTogMC4xLFxyXG4gICAgICAgICAgICAgIGNoYW5nZUF0OiAwXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gUmVzZXQgY29tcCBtb2RlXHJcbiAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJ1xyXG5cclxuICAgICAgICAgIHJldHVybiBuZXcgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLnJ1bnRpbWUgPSAyNTAwXHJcbiAgICAgICAgICAgIHRoaXMuY29sb3VycyA9IGNvbG91cnNcclxuICAgICAgICAgICAgdGhpcy5hbXBsaXR1ZGUgPSA1XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdsaXRjaEF0ID0gMFxyXG4gICAgICAgICAgICB0aGlzLmdsaXRjaFRpbWUgPSAwLjA1XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1heEdsaXRjaERlbGF5ID0gMC44XHJcbiAgICAgICAgICAgIHRoaXMuZ2xpdGNoQW1wbGl0dWRlTW9kaWZpZXIgPSAxMFxyXG5cclxuICAgICAgICAgICAgdGhpcy5pc0dsaXRjaGluZyA9IHByb2dyZXNzID0+IChwcm9ncmVzcyA+IHRoaXMuZ2xpdGNoQXQgJiYgcHJvZ3Jlc3MgPD0gdGhpcy5nbGl0Y2hBdCArIHRoaXMuZ2xpdGNoVGltZSlcclxuICAgICAgICAgICAgdGhpcy5zZXRHbGl0Y2hBdCA9IHByb2dyZXNzID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmdsaXRjaEF0ID0gcHJvZ3Jlc3MgKyBNYXRoLnJhbmRvbSgpICogdGhpcy5tYXhHbGl0Y2hEZWxheVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2V0R2xpdGNoQXQoMClcclxuXHJcbiAgICAgICAgICAgIC8vIEdsaXRjaCBiYXJzXHJcbiAgICAgICAgICAgIGxldCBudW1CYXJzID0gM1xyXG4gICAgICAgICAgICB0aGlzLmdsaXRjaEJhcnMgPSBbXVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUJhcnM7IGkrKykge1xyXG4gICAgICAgICAgICAgIHRoaXMuZ2xpdGNoQmFycy5wdXNoKG5ldyBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLncgPSAwXHJcbiAgICAgICAgICAgICAgICB0aGlzLmggPSAxXHJcbiAgICAgICAgICAgICAgICB0aGlzLnggPSAwXHJcbiAgICAgICAgICAgICAgICB0aGlzLnkgPSAwXHJcbiAgICAgICAgICAgICAgICB0aGlzLmR4ID0gMFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhPZmZzZXQgPSAyMFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhNb3ZlVGltZSA9IDAuMDNcclxuICAgICAgICAgICAgICAgIHRoaXMubW92ZUF0ID0gMFxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlID0gcHJvZ3Jlc3MgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPiB0aGlzLm1vdmVBdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQb3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZUF0ID0gcHJvZ3Jlc3MgKyB0aGlzLm1heE1vdmVUaW1lICogTWF0aC5yYW5kb20oKVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTaXplID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLncgPSBNYXRoLnJhbmRvbSgpICogY2FudmFzLndpZHRoXHJcbiAgICAgICAgICAgICAgICAgIGxldCB4TGVmdCA9IGNhbnZhcy53aWR0aCAtIHRoaXMud1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnggPSBNYXRoLnJhbmRvbSgpICogeExlZnRcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBvcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy55ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGNhbnZhcy5oZWlnaHQgLSB0aGlzLmgpKVxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmR4ID0gdGhpcy5tYXhPZmZzZXQgKiAoTWF0aC5yYW5kb20oKSAqIDIgLSAxKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFuaW1hdGU6IChjYW52YXMsIGRvbUltYWdlLCBzZXR1cERhdGEsIHByb2dyZXNzKSA9PiB7XHJcbiAgICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcclxuICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5cclxuICAgICAgICAgIC8qIEFOSU1BVElPTiBDT0RFICovXHJcblxyXG4gICAgICAgICAgLy8gRHJhdyBjb2xvdXJzXHJcbiAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxLzNcclxuXHJcbiAgICAgICAgICBmb3IgKGxldCBjb2xvdXIgb2Ygc2V0dXBEYXRhLmNvbG91cnMpIHtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGR4IGV2ZXJ5IG5vdyBhbmQgdGhlblxyXG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPiBjb2xvdXIuY2hhbmdlQXQpIHtcclxuICAgICAgICAgICAgICBjb2xvdXIuY2hhbmdlQXQgPSBwcm9ncmVzcyArIE1hdGgucmFuZG9tKCkgKiBjb2xvdXIuY2hhbmdlRnJlcVxyXG4gICAgICAgICAgICAgIGNvbG91ci54ID0gc2V0dXBEYXRhLmFtcGxpdHVkZSAqIChNYXRoLnJhbmRvbSgpICogMiAtIDEpXHJcbiAgICAgICAgICAgICAgY29sb3VyLmR4ID0gY29sb3VyLnggKiAoc2V0dXBEYXRhLmlzR2xpdGNoaW5nKHByb2dyZXNzKSA/IHNldHVwRGF0YS5nbGl0Y2hBbXBsaXR1ZGVNb2RpZmllciA6IDEpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoY29sb3VyLmltYWdlLCBjb2xvdXIuZHgsIDApXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKCFzZXR1cERhdGEuaXNHbGl0Y2hpbmcocHJvZ3Jlc3MpKSB7XHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDIvM1xyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGRvbUltYWdlLCAwLCAwKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIFdoZW4gZ2xpdGNoIGhhcyBmaW5pc2hlZCwgc2NoZWR1bGUgYW5vdGhlclxyXG4gICAgICAgICAgaWYgKHByb2dyZXNzID4gc2V0dXBEYXRhLmdsaXRjaEF0ICsgc2V0dXBEYXRhLmdsaXRjaFRpbWUpIHtcclxuICAgICAgICAgICAgc2V0dXBEYXRhLnNldEdsaXRjaEF0KHByb2dyZXNzKVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIEdsaXRjaCBiYXJzXHJcbiAgICAgICAgICBmb3IgKGxldCBiYXIgb2Ygc2V0dXBEYXRhLmdsaXRjaEJhcnMpIHtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGJhclxyXG4gICAgICAgICAgICBiYXIudXBkYXRlKHByb2dyZXNzKVxyXG5cclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMVxyXG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KGJhci54LCBiYXIueSwgYmFyLncsIGJhci5oKVxyXG5cclxuICAgICAgICAgICAgLy8gUmUtZHJhdyBzb3VyY2UgaW1hZ2UgYnV0IG9mZnNldFxyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxLzNcclxuICAgICAgICAgICAgZm9yIChsZXQgY29sb3VyIG9mIHNldHVwRGF0YS5jb2xvdXJzKSB7XHJcbiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShjb2xvdXIuaW1hZ2UsIGJhci54LCBiYXIueSwgYmFyLncsIGJhci5oLCBiYXIueCArIGJhci5keCArIGNvbG91ci5keCwgYmFyLnksIGJhci53LCBiYXIuaClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFzZXR1cERhdGEuaXNHbGl0Y2hpbmcocHJvZ3Jlc3MpKSB7XHJcbiAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMi8zXHJcbiAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShkb21JbWFnZSwgYmFyLngsIGJhci55LCBiYXIudywgYmFyLmgsIGJhci54ICsgYmFyLmR4LCBiYXIueSwgYmFyLncsIGJhci5oKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJHQiBzcGxpdCB3aXRoIGEgc2xpZ2h0IHBhcmFsbGF4IGVmZmVjdCB0aGF0IGZvbGxvd3MgdGhlIG1vdXNlXHJcbiAgICAgICAqL1xyXG4gICAgICAnZHNycHQtcmdiLWZvbGxvdyc6IHtcclxuICAgICAgICBzZXR1cDogKGNhbnZhcywgZG9tSW1hZ2UpID0+IHtcclxuICAgICAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG5cclxuICAgICAgICAgIC8vIFNldCB1cCBjb2xvdXItc2hpZnRlZCBpbWFnZXNcclxuICAgICAgICAgIGxldCBjb2xvdXJOYW1lcyA9IFsgJyMwMGYnLCAnI2YwMCcsICcjMGYwJyBdXHJcbiAgICAgICAgICBsZXQgY29sb3VycyA9IFtdXHJcblxyXG5cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3VyTmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3IGNvbG91cmVkIGJhY2tncm91bmRcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3ZlcidcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG91ck5hbWVzW2ldXHJcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXHJcblxyXG4gICAgICAgICAgICAvLyBNYXNrIHRvIHNvdXJjZSBpbWFnZVxyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLWF0b3AnXHJcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoZG9tSW1hZ2UsIDAsIDApXHJcblxyXG4gICAgICAgICAgICAvLyBNdWx0aXBseSB3aXRoIHNvdXJjZSBpbWFnZSB0byBjcmVhdGUgYWxwaGEgY2hhbm5lbFxyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ211bHRpcGx5J1xyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGRvbUltYWdlLCAwLCAwKVxyXG5cclxuICAgICAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpXHJcbiAgICAgICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnXHJcbiAgICAgICAgICAgIGltZy5zcmMgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKVxyXG5cclxuICAgICAgICAgICAgY29sb3Vycy5wdXNoKGltZylcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBSZXNldCBjb21wIG1vZGVcclxuICAgICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInXHJcblxyXG4gICAgICAgICAgLy8gR2V0IGNhbnZhcyBib3VuZHNcclxuICAgICAgICAgIGxldCBjYW52Qm91bmRzID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblxyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcnVudGltZTogLTEsXHJcbiAgICAgICAgICAgIGNvbG91cnM6IGNvbG91cnMsXHJcbiAgICAgICAgICAgIG1vdXNlRWZmZWN0OiB7XHJcbiAgICAgICAgICAgICAgeDogY2FudkJvdW5kcy5sZWZ0ICsgY2FudmFzLndpZHRoIC8gMixcclxuICAgICAgICAgICAgICB5OiBjYW52Qm91bmRzLnRvcCArIGNhbnZhcy5oZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICAgIGxlbjogMCxcclxuICAgICAgICAgICAgICBtYXhMZW46IDEwLFxyXG4gICAgICAgICAgICAgIGRpcjogMCxcclxuICAgICAgICAgICAgICBzcGQ6IDAuMVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhbmltYXRlOiAoY2FudmFzLCBkb21JbWFnZSwgc2V0dXBEYXRhLCBwcm9ncmVzcykgPT4ge1xyXG4gICAgICAgICAgbGV0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuXHJcbiAgICAgICAgICAvKiBBTklNQVRJT04gQ09ERSAqL1xyXG5cclxuICAgICAgICAgIGxldCBjYW52YXNQb3MgPSB7XHJcbiAgICAgICAgICAgIHg6IHNldHVwRGF0YS5tb3VzZUVmZmVjdC54LFxyXG4gICAgICAgICAgICB5OiBzZXR1cERhdGEubW91c2VFZmZlY3QueVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGxldCBzcGQgPSBzZXR1cERhdGEubW91c2VFZmZlY3Quc3BkXHJcblxyXG4gICAgICAgICAgLyogRUZGRUNUIERJUkVDVElPTiAqL1xyXG5cclxuICAgICAgICAgIGxldCBkaXIgPSBzZXR1cERhdGEubW91c2VFZmZlY3QuZGlyXHJcbiAgICAgICAgICBsZXQgZGlyVGFyZ2V0ID0gVHJpZy5hbmdsZUJldHdlZW4oY2FudmFzUG9zLCBNT1VTRS5wb3MpXHJcblxyXG4gICAgICAgICAgLy8gRGlmZmVyZW5jZSBiZXR3ZWVuIGFuZ2xlc1xyXG4gICAgICAgICAgbGV0IGRpckRpZmYgPSBkaXJUYXJnZXQgLSBkaXJcclxuICAgICAgICAgIGRpckRpZmYgPSBNYXRoLmF0YW4yKE1hdGguc2luKGRpckRpZmYpLCBNYXRoLmNvcyhkaXJEaWZmKSlcclxuXHJcbiAgICAgICAgICAvLyBNb3ZlIHRvd2FyZHMgdGFyZ2V0IGFuZ2xlXHJcbiAgICAgICAgICBkaXIgKz0gZGlyRGlmZiAqIHNwZFxyXG4gICAgICAgICAgbGV0IHdyYXAgPSBNYXRoLlBJICogMlxyXG4gICAgICAgICAgd2hpbGUgKGRpciA+IHdyYXApIHsgZGlyIC09IHdyYXAgfVxyXG4gICAgICAgICAgd2hpbGUgKGRpciA8IDApIHsgZGlyICs9IHdyYXAgfVxyXG5cclxuICAgICAgICAgIC8qIEVGRkVDVCBNQUdOSVRVREUgKi9cclxuXHJcbiAgICAgICAgICAvLyBNb3VzZSBwb3MgYXMgcGVyY2VudGFnZVxyXG4gICAgICAgICAgbGV0IG1vdXNlTWF4ID0gVHJpZy5kaXN0YW5jZUJldHdlZW4oY2FudmFzUG9zLCB7IHg6IDAsIHk6IDB9KVxyXG4gICAgICAgICAgbGV0IG1vdXNlQ3VycmVudCA9IFRyaWcuZGlzdGFuY2VCZXR3ZWVuKGNhbnZhc1BvcywgTU9VU0UucG9zKVxyXG5cclxuICAgICAgICAgIC8vIE1vdmUgbGVuZ3RoIHRvd2FyZHMgdGFyZ2V0XHJcbiAgICAgICAgICBsZXQgbGVuID0gc2V0dXBEYXRhLm1vdXNlRWZmZWN0LmxlblxyXG4gICAgICAgICAgbGV0IHRhcmdldExlbiA9IChtb3VzZUN1cnJlbnQgLyBtb3VzZU1heCkgKiBzZXR1cERhdGEubW91c2VFZmZlY3QubWF4TGVuXHJcbiAgICAgICAgICBsZXQgbGVuRGlmZiA9IHRhcmdldExlbiAtIGxlblxyXG4gICAgICAgICAgbGVuICs9IGxlbkRpZmYgKiBzcGRcclxuXHJcbiAgICAgICAgICAvLyBTdG9yZSBjdXJyZW50IGRpciBmb3IgbmV4dCBhbmltYXRpb24gbG9vcFxyXG4gICAgICAgICAgc2V0dXBEYXRhLm1vdXNlRWZmZWN0LmRpciA9IGRpclxyXG4gICAgICAgICAgc2V0dXBEYXRhLm1vdXNlRWZmZWN0LmxlbiA9IGxlblxyXG5cclxuICAgICAgICAgIC8vIERyYXcgdGhyZWUgUkdCIHNoaWZ0ZWQgaW1hZ2VzYVxyXG5cclxuICAgICAgICAgIC8vIFNjYWxlIGlzIChtYXhMZW4gKiAyKXB4IHNtYWxsZXIgdGhhbiBjYW52YXMgc2l6ZVxyXG4gICAgICAgICAgbGV0IHNtYWxsZXN0QXhpcyA9IE1hdGgubWluKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcclxuICAgICAgICAgIGxldCB0YXJnZXRTaXplID0gc21hbGxlc3RBeGlzIC0gc2V0dXBEYXRhLm1vdXNlRWZmZWN0Lm1heExlbiAqIDJcclxuICAgICAgICAgIGxldCBzY2FsZSA9IHRhcmdldFNpemUgLyBzbWFsbGVzdEF4aXNcclxuXHJcbiAgICAgICAgICAvLyBEcmF3IHRoZSBpbWFnZXMgb2Zmc2V0IGNvcnJlY3RseVxyXG4gICAgICAgICAgbGV0IHNjYWxlVyA9IGNhbnZhcy53aWR0aCAqIHNjYWxlXHJcbiAgICAgICAgICBsZXQgc2NhbGVIID0gY2FudmFzLmhlaWdodCAqIHNjYWxlXHJcbiAgICAgICAgICBsZXQgeE9yaWdpbiA9IChjYW52YXMud2lkdGggLSBzY2FsZVcpIC8gMlxyXG4gICAgICAgICAgbGV0IHlPcmlnaW4gPSAoY2FudmFzLmhlaWdodCAtIHNjYWxlSCkgLyAyXHJcbiAgICAgICAgICBsZXQgZHggPSBUcmlnLmxlbmd0aGRpclgobGVuLCBkaXIpXHJcbiAgICAgICAgICBsZXQgZHkgPSBUcmlnLmxlbmd0aGRpclkobGVuLCBkaXIpXHJcblxyXG4gICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdsaWdodGVuJ1xyXG5cclxuICAgICAgICAgIGxldCBuID0gc2V0dXBEYXRhLmNvbG91cnMubGVuZ3RoXHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gaSAtIDFcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShzZXR1cERhdGEuY29sb3Vyc1tpXSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0LCB4T3JpZ2luICsgZHggKiBvZmZzZXQsIHlPcmlnaW4gKyBkeSAqIG9mZnNldCwgc2NhbGVXLCBzY2FsZUgpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJ1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IGRpc3J1cHRpb25UeXBlcyAoKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5ESVNSVVBUSU9OUylcclxuICB9XHJcblxyXG4gIGdldERpc3J1cHRpb24gKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kaXNydXB0YWJsZXNbaWRdXHJcbiAgfVxyXG5cclxuICByZW1vdmVEaXNydXB0aW9uIChpZCkge1xyXG4gICAgbGV0IGRpc3J1cHRpb24gPSB0aGlzLmRpc3J1cHRhYmxlc1tpZF1cclxuXHJcbiAgICAvLyBTdG9wIGFuaW1hdGlvblxyXG4gICAgZGlzcnVwdGlvbi5kaXNydXB0aW9uQW5pbS5zdG9wKClcclxuXHJcbiAgICAvLyBSZS1zaG93IHNvdXJjZSBlbGVtZW50XHJcbiAgICBkaXNydXB0aW9uLmVsZW0uc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJ1xyXG5cclxuICAgIC8vIFJlbW92ZSBkaXNydXB0aW9uIGNhbnZhc1xyXG4gICAgZGlzcnVwdGlvbi5jYW52YXMucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChkaXNydXB0aW9uLmNhbnZhcylcclxuXHJcbiAgICAvLyBEZWxldGUgZGlzcnVwdGlvblxyXG4gICAgZGVsZXRlIHRoaXMuZGlzcnVwdGFibGVzW2lkXVxyXG4gIH1cclxuXHJcbiAgZm9yY2VTdG9wRGlzcnVwdGlvbnMgKCkge1xyXG4gICAgT2JqZWN0LmtleXModGhpcy5kaXNydXB0YWJsZXMpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgbGV0IGQgPSB0aGlzLmRpc3J1cHRhYmxlc1trZXldXHJcbiAgICAgIHRoaXMucmVtb3ZlRGlzcnVwdGlvbihkLmlkKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qIERJU1JVUFRJT04gRlVOQ1RJT05TICovXHJcblxyXG4gIGFkZERpc3J1cHRpb25zICgpIHtcclxuICAgIGxldCBtZSA9IHRoaXNcclxuXHJcbiAgICAvLyBTY2FuIHRocm91Z2ggRE9NIGFuZCBmaW5kIGRpc3J1cHRhYmxlIGVsZW1lbnRzXHJcbiAgICBsZXQgZGlzcnVwdGFibGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHRoaXMudGFyZ2V0Q2xhc3MpKVxyXG5cclxuICAgIGxldCBjYW52YXNMb2FkcyA9IGRpc3J1cHRhYmxlcy5tYXAoZWxlbSA9PiB7XHJcbiAgICAgIC8vIERldGVybWluZSBkaXNydXB0aW9uIHR5cGUgLSBwaWNrIGZpcnN0IGZvdW5kIGNsYXNzXHJcbiAgICAgIGxldCBkaXNydXB0aW9uVHlwZSA9ICdkc3JwdC1ob3Jpem9udGFsJ1xyXG4gICAgICBmb3IgKGxldCBhbmltIG9mIHRoaXMuZGlzcnVwdGlvblR5cGVzKSB7XHJcbiAgICAgICAgaWYgKGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGFuaW0pKSB7XHJcbiAgICAgICAgICBkaXNydXB0aW9uVHlwZSA9IGFuaW1cclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgZGlzcnVwdGlvbiA9IHtcclxuICAgICAgICBpZDogdGhpcy5kaXNydXB0aW9uQ291bnRlcisrLFxyXG4gICAgICAgIGVsZW06IGVsZW0sXHJcbiAgICAgICAgZGlzcnVwdGlvblR5cGU6IGRpc3J1cHRpb25UeXBlLFxyXG4gICAgICAgIGxvb3A6IGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdsb29wJylcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVXNlIGh0bWwyY2FudmFzIHRvIGNyZWF0ZSBjYW52YXMgYW5kIGltYWdlXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaHRtbDJjYW52YXMoZWxlbSwge1xyXG4gICAgICAgICAgb25yZW5kZXJlZDogY2FudmFzID0+IHtcclxuICAgICAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpXHJcbiAgICAgICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnXHJcbiAgICAgICAgICAgIGltZy5zcmMgPSBjYW52YXMudG9EYXRhVVJMKCdkYXRhL2ltYWdlJylcclxuXHJcbiAgICAgICAgICAgIGRpc3J1cHRpb24uaW1hZ2UgPSBpbWdcclxuICAgICAgICAgICAgZGlzcnVwdGlvbi5jYW52YXMgPSBjYW52YXNcclxuXHJcbiAgICAgICAgICAgIG1lLmRpc3J1cHRhYmxlc1tkaXNydXB0aW9uLmlkXSA9IGRpc3J1cHRpb25cclxuXHJcbiAgICAgICAgICAgIC8vIFBvc2l0aW9uIGNhbnZhc1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uQ2FudmFzKGVsZW0sIGRpc3J1cHRpb24uY2FudmFzKVxyXG4gICAgICAgICAgICBlbGVtLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRpc3J1cHRpb24uY2FudmFzLCBlbGVtKVxyXG4gICAgICAgICAgICByZXNvbHZlKClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBQcm9taXNlLmFsbChjYW52YXNMb2FkcykudGhlbigoKSA9PiB7XHJcbiAgICAgIG1lLnRyaWdnZXJEaXNydXB0KClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwb3NpdGlvbkNhbnZhcyAoZWxlbSwgY2FudmFzKSB7XHJcbiAgICAvLyBHZXQgZWxlbWVudCBib3VuZHNcclxuICAgIGxldCBib3VuZHMgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcbiAgICBsZXQgcGFyZW50Qm91bmRzID0gZWxlbS5wYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblxyXG4gICAgLy8gUG9zaXRpb24gdGhlIGNhbnZhc1xyXG4gICAgbGV0IHNjcm9sbCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wXHJcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXHJcbiAgICBjYW52YXMuc3R5bGUudG9wID0gYCR7Ym91bmRzLnRvcCArIHNjcm9sbCAtIHBhcmVudEJvdW5kcy50b3B9cHhgXHJcbiAgICBjYW52YXMuc3R5bGUubGVmdCA9IGAke2JvdW5kcy5sZWZ0IC0gcGFyZW50Qm91bmRzLmxlZnR9cHhgXHJcbiAgfVxyXG5cclxuICB0cmlnZ2VyRGlzcnVwdCAoKSB7XHJcbiAgICBPYmplY3Qua2V5cyh0aGlzLmRpc3J1cHRhYmxlcykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICBsZXQgZCA9IHRoaXMuZGlzcnVwdGFibGVzW2tleV1cclxuICAgICAgbGV0IGRpc3J1cHRpb24gPSB0aGlzLkRJU1JVUFRJT05TW2QuZGlzcnVwdGlvblR5cGVdXHJcblxyXG4gICAgICAvLyBSdW4gc2V0dXBcclxuICAgICAgbGV0IHNldHVwRGF0YSA9IGRpc3J1cHRpb24uc2V0dXAoZC5jYW52YXMsIGQuaW1hZ2UsIHRoaXMuR0VORVJBVE9SUylcclxuICAgICAgbGV0IGFuaW1GdW5jdGlvbiA9IGRpc3J1cHRpb24uYW5pbWF0ZVxyXG5cclxuICAgICAgLy8gSGlkZSBvcmlnaW5hbCBlbGVtZW50XHJcbiAgICAgIGQuZWxlbS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbidcclxuXHJcbiAgICAgIC8vIERvIGFuaW1hdGlvblxyXG4gICAgICBkLmRpc3J1cHRpb25BbmltID0gbmV3IERpc3J1cHRBbmltYXRpb24odGhpcywgZC5pZCwgc2V0dXBEYXRhLCBhbmltRnVuY3Rpb24sIGQubG9vcClcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBEaXNydXB0QW5pbWF0aW9uIHtcclxuICBjb25zdHJ1Y3RvciAocGFyZW50LCBkaXNydXB0aW9uSWQsIHNldHVwRGF0YSwgYW5pbUZ1bmN0aW9uLCBsb29wKSB7XHJcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudFxyXG4gICAgdGhpcy5kYXRhID0gcGFyZW50LmdldERpc3J1cHRpb24oZGlzcnVwdGlvbklkKVxyXG4gICAgdGhpcy5zZXR1cERhdGEgPSBzZXR1cERhdGFcclxuICAgIHRoaXMuYW5pbUZ1bmN0aW9uID0gYW5pbUZ1bmN0aW9uXHJcbiAgICB0aGlzLmxvb3AgPSBsb29wXHJcblxyXG4gICAgdGhpcy5ydW5uaW5nID0gdHJ1ZVxyXG5cclxuICAgIHRoaXMuYW5pbVN0YXJ0ID0gbnVsbFxyXG4gICAgdGhpcy5jdXJyZW50RnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZG9BbmltYXRpb24uYmluZCh0aGlzKSlcclxuICB9XHJcblxyXG4gIGdldCBhbmltYXRpb25GcmFtZSAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RnJhbWVcclxuICB9XHJcblxyXG4gIHN0b3AgKCkge1xyXG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuY3VycmVudEZyYW1lKVxyXG4gIH1cclxuXHJcbiAgZG9BbmltYXRpb24gKHRpbWVzdGFtcCkge1xyXG4gICAgaWYgKHRoaXMuYW5pbVN0YXJ0ID09PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuYW5pbVN0YXJ0ID0gdGltZXN0YW1wXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIGFuaW1hdGlvbiBwcm9ncmVzcyAoZnJvbSAwIHRvIDEpXHJcbiAgICBsZXQgcHJvZ3Jlc3MgPSAodGltZXN0YW1wIC0gdGhpcy5hbmltU3RhcnQpIC8gdGhpcy5zZXR1cERhdGEucnVudGltZVxyXG5cclxuICAgIC8vIFJ1biBjdXN0b20gYW5pbWF0aW9uIGZ1bmN0aW9uXHJcbiAgICB0aGlzLmFuaW1GdW5jdGlvbih0aGlzLmRhdGEuY2FudmFzLCB0aGlzLmRhdGEuaW1hZ2UsIHRoaXMuc2V0dXBEYXRhLCBwcm9ncmVzcylcclxuXHJcbiAgICBpZiAocHJvZ3Jlc3MgPCAxIHx8IHRoaXMubG9vcCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5kb0FuaW1hdGlvbi5iaW5kKHRoaXMpKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zdG9wKClcclxuXHJcbiAgICAgIC8vIERlbGV0ZSBzZWxmIGZyb20gcGFyZW50XHJcbiAgICAgIHRoaXMucGFyZW50LnJlbW92ZURpc3J1cHRpb24odGhpcy5kYXRhLmlkKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gQXV0by1jcmVhdGUgZ2xvYmFsIGluc3RhbmNlIGFuZCB0cmlnZ2VyIGRpc3J1cHRpb25zXHJcbndpbmRvdy5ESVNSVVBUID0gbmV3IERJU1JVUFQoKVxyXG5cclxuLy8gVE9ETzogYWRkIGFiaWxpdHkgdG8gd2FpdCB1bnRpbCByZXZlYWxlZCBieSBzY3JvbGxcclxud2luZG93LkRJU1JVUFQuYWRkRGlzcnVwdGlvbnMoKVxyXG4iLCIvKlxuICBodG1sMmNhbnZhcyAwLjUuMC1iZXRhMyA8aHR0cDovL2h0bWwyY2FudmFzLmhlcnR6ZW4uY29tPlxuICBDb3B5cmlnaHQgKGMpIDIwMTYgTmlrbGFzIHZvbiBIZXJ0emVuXG5cbiAgUmVsZWFzZWQgdW5kZXIgIExpY2Vuc2VcbiovXG4hZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciBuO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/bj13aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9uPWdsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmKG49c2VsZiksbi5odG1sMmNhbnZhcz1lKCl9fShmdW5jdGlvbigpe3ZhciBlO3JldHVybiBmdW5jdGlvbiBuKGUsZixvKXtmdW5jdGlvbiBkKHQsbCl7aWYoIWZbdF0pe2lmKCFlW3RdKXt2YXIgcz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFsJiZzKXJldHVybiBzKHQsITApO2lmKGkpcmV0dXJuIGkodCwhMCk7dmFyIHU9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIit0K1wiJ1wiKTt0aHJvdyB1LmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsdX12YXIgYT1mW3RdPXtleHBvcnRzOnt9fTtlW3RdWzBdLmNhbGwoYS5leHBvcnRzLGZ1bmN0aW9uKG4pe3ZhciBmPWVbdF1bMV1bbl07cmV0dXJuIGQoZj9mOm4pfSxhLGEuZXhwb3J0cyxuLGUsZixvKX1yZXR1cm4gZlt0XS5leHBvcnRzfWZvcih2YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHQ9MDt0PG8ubGVuZ3RoO3QrKylkKG9bdF0pO3JldHVybiBkfSh7MTpbZnVuY3Rpb24obixmLG8peyhmdW5jdGlvbihuKXshZnVuY3Rpb24oZCl7ZnVuY3Rpb24gaShlKXt0aHJvdyBSYW5nZUVycm9yKElbZV0pfWZ1bmN0aW9uIHQoZSxuKXtmb3IodmFyIGY9ZS5sZW5ndGg7Zi0tOyllW2ZdPW4oZVtmXSk7cmV0dXJuIGV9ZnVuY3Rpb24gbChlLG4pe3JldHVybiB0KGUuc3BsaXQoSCksbikuam9pbihcIi5cIil9ZnVuY3Rpb24gcyhlKXtmb3IodmFyIG4sZixvPVtdLGQ9MCxpPWUubGVuZ3RoO2k+ZDspbj1lLmNoYXJDb2RlQXQoZCsrKSxuPj01NTI5NiYmNTYzMTk+PW4mJmk+ZD8oZj1lLmNoYXJDb2RlQXQoZCsrKSw1NjMyMD09KDY0NTEyJmYpP28ucHVzaCgoKDEwMjMmbik8PDEwKSsoMTAyMyZmKSs2NTUzNik6KG8ucHVzaChuKSxkLS0pKTpvLnB1c2gobik7cmV0dXJuIG99ZnVuY3Rpb24gdShlKXtyZXR1cm4gdChlLGZ1bmN0aW9uKGUpe3ZhciBuPVwiXCI7cmV0dXJuIGU+NjU1MzUmJihlLT02NTUzNixuKz1MKGU+Pj4xMCYxMDIzfDU1Mjk2KSxlPTU2MzIwfDEwMjMmZSksbis9TChlKX0pLmpvaW4oXCJcIil9ZnVuY3Rpb24gYShlKXtyZXR1cm4gMTA+ZS00OD9lLTIyOjI2PmUtNjU/ZS02NToyNj5lLTk3P2UtOTc6a31mdW5jdGlvbiBwKGUsbil7cmV0dXJuIGUrMjIrNzUqKDI2PmUpLSgoMCE9bik8PDUpfWZ1bmN0aW9uIGMoZSxuLGYpe3ZhciBvPTA7Zm9yKGU9Zj9LKGUvQik6ZT4+MSxlKz1LKGUvbik7ZT5KKno+PjE7bys9ayllPUsoZS9KKTtyZXR1cm4gSyhvKyhKKzEpKmUvKGUrQSkpfWZ1bmN0aW9uIHkoZSl7dmFyIG4sZixvLGQsdCxsLHMscCx5LG0scj1bXSx2PWUubGVuZ3RoLHc9MCxiPUQsZz1DO2ZvcihmPWUubGFzdEluZGV4T2YoRSksMD5mJiYoZj0wKSxvPTA7Zj5vOysrbyllLmNoYXJDb2RlQXQobyk+PTEyOCYmaShcIm5vdC1iYXNpY1wiKSxyLnB1c2goZS5jaGFyQ29kZUF0KG8pKTtmb3IoZD1mPjA/ZisxOjA7dj5kOyl7Zm9yKHQ9dyxsPTEscz1rO2Q+PXYmJmkoXCJpbnZhbGlkLWlucHV0XCIpLHA9YShlLmNoYXJDb2RlQXQoZCsrKSksKHA+PWt8fHA+Sygoai13KS9sKSkmJmkoXCJvdmVyZmxvd1wiKSx3Kz1wKmwseT1nPj1zP3E6cz49Zyt6P3o6cy1nLCEoeT5wKTtzKz1rKW09ay15LGw+SyhqL20pJiZpKFwib3ZlcmZsb3dcIiksbCo9bTtuPXIubGVuZ3RoKzEsZz1jKHctdCxuLDA9PXQpLEsody9uKT5qLWImJmkoXCJvdmVyZmxvd1wiKSxiKz1LKHcvbiksdyU9bixyLnNwbGljZSh3KyssMCxiKX1yZXR1cm4gdShyKX1mdW5jdGlvbiBtKGUpe3ZhciBuLGYsbyxkLHQsbCx1LGEseSxtLHIsdix3LGIsZyxoPVtdO2ZvcihlPXMoZSksdj1lLmxlbmd0aCxuPUQsZj0wLHQ9QyxsPTA7dj5sOysrbClyPWVbbF0sMTI4PnImJmgucHVzaChMKHIpKTtmb3Iobz1kPWgubGVuZ3RoLGQmJmgucHVzaChFKTt2Pm87KXtmb3IodT1qLGw9MDt2Pmw7KytsKXI9ZVtsXSxyPj1uJiZ1PnImJih1PXIpO2Zvcih3PW8rMSx1LW4+Sygoai1mKS93KSYmaShcIm92ZXJmbG93XCIpLGYrPSh1LW4pKncsbj11LGw9MDt2Pmw7KytsKWlmKHI9ZVtsXSxuPnImJisrZj5qJiZpKFwib3ZlcmZsb3dcIikscj09bil7Zm9yKGE9Zix5PWs7bT10Pj15P3E6eT49dCt6P3o6eS10LCEobT5hKTt5Kz1rKWc9YS1tLGI9ay1tLGgucHVzaChMKHAobStnJWIsMCkpKSxhPUsoZy9iKTtoLnB1c2goTChwKGEsMCkpKSx0PWMoZix3LG89PWQpLGY9MCwrK299KytmLCsrbn1yZXR1cm4gaC5qb2luKFwiXCIpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGwoZSxmdW5jdGlvbihlKXtyZXR1cm4gRi50ZXN0KGUpP3koZS5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKTplfSl9ZnVuY3Rpb24gdihlKXtyZXR1cm4gbChlLGZ1bmN0aW9uKGUpe3JldHVybiBHLnRlc3QoZSk/XCJ4bi0tXCIrbShlKTplfSl9dmFyIHc9XCJvYmplY3RcIj09dHlwZW9mIG8mJm8sYj1cIm9iamVjdFwiPT10eXBlb2YgZiYmZiYmZi5leHBvcnRzPT13JiZmLGc9XCJvYmplY3RcIj09dHlwZW9mIG4mJm47KGcuZ2xvYmFsPT09Z3x8Zy53aW5kb3c9PT1nKSYmKGQ9Zyk7dmFyIGgseCxqPTIxNDc0ODM2NDcsaz0zNixxPTEsej0yNixBPTM4LEI9NzAwLEM9NzIsRD0xMjgsRT1cIi1cIixGPS9eeG4tLS8sRz0vW14gLX5dLyxIPS9cXHgyRXxcXHUzMDAyfFxcdUZGMEV8XFx1RkY2MS9nLEk9e292ZXJmbG93OlwiT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3NcIixcIm5vdC1iYXNpY1wiOlwiSWxsZWdhbCBpbnB1dCA+PSAweDgwIChub3QgYSBiYXNpYyBjb2RlIHBvaW50KVwiLFwiaW52YWxpZC1pbnB1dFwiOlwiSW52YWxpZCBpbnB1dFwifSxKPWstcSxLPU1hdGguZmxvb3IsTD1TdHJpbmcuZnJvbUNoYXJDb2RlO2lmKGg9e3ZlcnNpb246XCIxLjIuNFwiLHVjczI6e2RlY29kZTpzLGVuY29kZTp1fSxkZWNvZGU6eSxlbmNvZGU6bSx0b0FTQ0lJOnYsdG9Vbmljb2RlOnJ9LFwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmFtZCYmZS5hbWQpZShcInB1bnljb2RlXCIsZnVuY3Rpb24oKXtyZXR1cm4gaH0pO2Vsc2UgaWYodyYmIXcubm9kZVR5cGUpaWYoYiliLmV4cG9ydHM9aDtlbHNlIGZvcih4IGluIGgpaC5oYXNPd25Qcm9wZXJ0eSh4KSYmKHdbeF09aFt4XSk7ZWxzZSBkLnB1bnljb2RlPWh9KHRoaXMpfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sMjpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUsbixmKXshZS5kZWZhdWx0Vmlld3x8bj09PWUuZGVmYXVsdFZpZXcucGFnZVhPZmZzZXQmJmY9PT1lLmRlZmF1bHRWaWV3LnBhZ2VZT2Zmc2V0fHxlLmRlZmF1bHRWaWV3LnNjcm9sbFRvKG4sZil9ZnVuY3Rpb24gbyhlLG4pe3RyeXtuJiYobi53aWR0aD1lLndpZHRoLG4uaGVpZ2h0PWUuaGVpZ2h0LG4uZ2V0Q29udGV4dChcIjJkXCIpLnB1dEltYWdlRGF0YShlLmdldENvbnRleHQoXCIyZFwiKS5nZXRJbWFnZURhdGEoMCwwLGUud2lkdGgsZS5oZWlnaHQpLDAsMCkpfWNhdGNoKGYpe3QoXCJVbmFibGUgdG8gY29weSBjYW52YXMgY29udGVudCBmcm9tXCIsZSxmKX19ZnVuY3Rpb24gZChlLG4pe2Zvcih2YXIgZj0zPT09ZS5ub2RlVHlwZT9kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlLm5vZGVWYWx1ZSk6ZS5jbG9uZU5vZGUoITEpLGk9ZS5maXJzdENoaWxkO2k7KShuPT09ITB8fDEhPT1pLm5vZGVUeXBlfHxcIlNDUklQVFwiIT09aS5ub2RlTmFtZSkmJmYuYXBwZW5kQ2hpbGQoZChpLG4pKSxpPWkubmV4dFNpYmxpbmc7cmV0dXJuIDE9PT1lLm5vZGVUeXBlJiYoZi5fc2Nyb2xsVG9wPWUuc2Nyb2xsVG9wLGYuX3Njcm9sbExlZnQ9ZS5zY3JvbGxMZWZ0LFwiQ0FOVkFTXCI9PT1lLm5vZGVOYW1lP28oZSxmKTooXCJURVhUQVJFQVwiPT09ZS5ub2RlTmFtZXx8XCJTRUxFQ1RcIj09PWUubm9kZU5hbWUpJiYoZi52YWx1ZT1lLnZhbHVlKSksZn1mdW5jdGlvbiBpKGUpe2lmKDE9PT1lLm5vZGVUeXBlKXtlLnNjcm9sbFRvcD1lLl9zY3JvbGxUb3AsZS5zY3JvbGxMZWZ0PWUuX3Njcm9sbExlZnQ7Zm9yKHZhciBuPWUuZmlyc3RDaGlsZDtuOylpKG4pLG49bi5uZXh0U2libGluZ319dmFyIHQ9ZShcIi4vbG9nXCIpO24uZXhwb3J0cz1mdW5jdGlvbihlLG4sbyx0LGwscyx1KXt2YXIgYT1kKGUuZG9jdW1lbnRFbGVtZW50LGwuamF2YXNjcmlwdEVuYWJsZWQpLHA9bi5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO3JldHVybiBwLmNsYXNzTmFtZT1cImh0bWwyY2FudmFzLWNvbnRhaW5lclwiLHAuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLHAuc3R5bGUucG9zaXRpb249XCJmaXhlZFwiLHAuc3R5bGUubGVmdD1cIi0xMDAwMHB4XCIscC5zdHlsZS50b3A9XCIwcHhcIixwLnN0eWxlLmJvcmRlcj1cIjBcIixwLndpZHRoPW8scC5oZWlnaHQ9dCxwLnNjcm9sbGluZz1cIm5vXCIsbi5ib2R5LmFwcGVuZENoaWxkKHApLG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3ZhciBvPXAuY29udGVudFdpbmRvdy5kb2N1bWVudDtwLmNvbnRlbnRXaW5kb3cub25sb2FkPXAub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGU9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtvLmJvZHkuY2hpbGROb2Rlcy5sZW5ndGg+MCYmKGkoby5kb2N1bWVudEVsZW1lbnQpLGNsZWFySW50ZXJ2YWwoZSksXCJ2aWV3XCI9PT1sLnR5cGUmJihwLmNvbnRlbnRXaW5kb3cuc2Nyb2xsVG8ocyx1KSwhLyhpUGFkfGlQaG9uZXxpUG9kKS9nLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl8fHAuY29udGVudFdpbmRvdy5zY3JvbGxZPT09dSYmcC5jb250ZW50V2luZG93LnNjcm9sbFg9PT1zfHwoby5kb2N1bWVudEVsZW1lbnQuc3R5bGUudG9wPS11K1wicHhcIixvLmRvY3VtZW50RWxlbWVudC5zdHlsZS5sZWZ0PS1zK1wicHhcIixvLmRvY3VtZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIpKSxuKHApKX0sNTApfSxvLm9wZW4oKSxvLndyaXRlKFwiPCFET0NUWVBFIGh0bWw+PGh0bWw+PC9odG1sPlwiKSxmKGUscyx1KSxvLnJlcGxhY2VDaGlsZChvLmFkb3B0Tm9kZShhKSxvLmRvY3VtZW50RWxlbWVudCksby5jbG9zZSgpfSl9fSx7XCIuL2xvZ1wiOjEzfV0sMzpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUpe3RoaXMucj0wLHRoaXMuZz0wLHRoaXMuYj0wLHRoaXMuYT1udWxsO3RoaXMuZnJvbUFycmF5KGUpfHx0aGlzLm5hbWVkQ29sb3IoZSl8fHRoaXMucmdiKGUpfHx0aGlzLnJnYmEoZSl8fHRoaXMuaGV4NihlKXx8dGhpcy5oZXgzKGUpfWYucHJvdG90eXBlLmRhcmtlbj1mdW5jdGlvbihlKXt2YXIgbj0xLWU7cmV0dXJuIG5ldyBmKFtNYXRoLnJvdW5kKHRoaXMucipuKSxNYXRoLnJvdW5kKHRoaXMuZypuKSxNYXRoLnJvdW5kKHRoaXMuYipuKSx0aGlzLmFdKX0sZi5wcm90b3R5cGUuaXNUcmFuc3BhcmVudD1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hfSxmLnByb3RvdHlwZS5pc0JsYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnImJjA9PT10aGlzLmcmJjA9PT10aGlzLmJ9LGYucHJvdG90eXBlLmZyb21BcnJheT1mdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKSYmKHRoaXMucj1NYXRoLm1pbihlWzBdLDI1NSksdGhpcy5nPU1hdGgubWluKGVbMV0sMjU1KSx0aGlzLmI9TWF0aC5taW4oZVsyXSwyNTUpLGUubGVuZ3RoPjMmJih0aGlzLmE9ZVszXSkpLEFycmF5LmlzQXJyYXkoZSl9O3ZhciBvPS9eIyhbYS1mMC05XXszfSkkL2k7Zi5wcm90b3R5cGUuaGV4Mz1mdW5jdGlvbihlKXt2YXIgbj1udWxsO3JldHVybiBudWxsIT09KG49ZS5tYXRjaChvKSkmJih0aGlzLnI9cGFyc2VJbnQoblsxXVswXStuWzFdWzBdLDE2KSx0aGlzLmc9cGFyc2VJbnQoblsxXVsxXStuWzFdWzFdLDE2KSx0aGlzLmI9cGFyc2VJbnQoblsxXVsyXStuWzFdWzJdLDE2KSksbnVsbCE9PW59O3ZhciBkPS9eIyhbYS1mMC05XXs2fSkkL2k7Zi5wcm90b3R5cGUuaGV4Nj1mdW5jdGlvbihlKXt2YXIgbj1udWxsO3JldHVybiBudWxsIT09KG49ZS5tYXRjaChkKSkmJih0aGlzLnI9cGFyc2VJbnQoblsxXS5zdWJzdHJpbmcoMCwyKSwxNiksdGhpcy5nPXBhcnNlSW50KG5bMV0uc3Vic3RyaW5nKDIsNCksMTYpLHRoaXMuYj1wYXJzZUludChuWzFdLnN1YnN0cmluZyg0LDYpLDE2KSksbnVsbCE9PW59O3ZhciBpPS9ecmdiXFwoXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9KVxccypcXCkkLztmLnByb3RvdHlwZS5yZ2I9ZnVuY3Rpb24oZSl7dmFyIG49bnVsbDtyZXR1cm4gbnVsbCE9PShuPWUubWF0Y2goaSkpJiYodGhpcy5yPU51bWJlcihuWzFdKSx0aGlzLmc9TnVtYmVyKG5bMl0pLHRoaXMuYj1OdW1iZXIoblszXSkpLG51bGwhPT1ufTt2YXIgdD0vXnJnYmFcXChcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZD9cXC4/XFxkKylcXHMqXFwpJC87Zi5wcm90b3R5cGUucmdiYT1mdW5jdGlvbihlKXt2YXIgbj1udWxsO3JldHVybiBudWxsIT09KG49ZS5tYXRjaCh0KSkmJih0aGlzLnI9TnVtYmVyKG5bMV0pLHRoaXMuZz1OdW1iZXIoblsyXSksdGhpcy5iPU51bWJlcihuWzNdKSx0aGlzLmE9TnVtYmVyKG5bNF0pKSxudWxsIT09bn0sZi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMuYSYmMSE9PXRoaXMuYT9cInJnYmEoXCIrW3RoaXMucix0aGlzLmcsdGhpcy5iLHRoaXMuYV0uam9pbihcIixcIikrXCIpXCI6XCJyZ2IoXCIrW3RoaXMucix0aGlzLmcsdGhpcy5iXS5qb2luKFwiLFwiKStcIilcIn0sZi5wcm90b3R5cGUubmFtZWRDb2xvcj1mdW5jdGlvbihlKXtlPWUudG9Mb3dlckNhc2UoKTt2YXIgbj1sW2VdO2lmKG4pdGhpcy5yPW5bMF0sdGhpcy5nPW5bMV0sdGhpcy5iPW5bMl07ZWxzZSBpZihcInRyYW5zcGFyZW50XCI9PT1lKXJldHVybiB0aGlzLnI9dGhpcy5nPXRoaXMuYj10aGlzLmE9MCwhMDtyZXR1cm4hIW59LGYucHJvdG90eXBlLmlzQ29sb3I9ITA7dmFyIGw9e2FsaWNlYmx1ZTpbMjQwLDI0OCwyNTVdLGFudGlxdWV3aGl0ZTpbMjUwLDIzNSwyMTVdLGFxdWE6WzAsMjU1LDI1NV0sYXF1YW1hcmluZTpbMTI3LDI1NSwyMTJdLGF6dXJlOlsyNDAsMjU1LDI1NV0sYmVpZ2U6WzI0NSwyNDUsMjIwXSxiaXNxdWU6WzI1NSwyMjgsMTk2XSxibGFjazpbMCwwLDBdLGJsYW5jaGVkYWxtb25kOlsyNTUsMjM1LDIwNV0sYmx1ZTpbMCwwLDI1NV0sYmx1ZXZpb2xldDpbMTM4LDQzLDIyNl0sYnJvd246WzE2NSw0Miw0Ml0sYnVybHl3b29kOlsyMjIsMTg0LDEzNV0sY2FkZXRibHVlOls5NSwxNTgsMTYwXSxjaGFydHJldXNlOlsxMjcsMjU1LDBdLGNob2NvbGF0ZTpbMjEwLDEwNSwzMF0sY29yYWw6WzI1NSwxMjcsODBdLGNvcm5mbG93ZXJibHVlOlsxMDAsMTQ5LDIzN10sY29ybnNpbGs6WzI1NSwyNDgsMjIwXSxjcmltc29uOlsyMjAsMjAsNjBdLGN5YW46WzAsMjU1LDI1NV0sZGFya2JsdWU6WzAsMCwxMzldLGRhcmtjeWFuOlswLDEzOSwxMzldLGRhcmtnb2xkZW5yb2Q6WzE4NCwxMzQsMTFdLGRhcmtncmF5OlsxNjksMTY5LDE2OV0sZGFya2dyZWVuOlswLDEwMCwwXSxkYXJrZ3JleTpbMTY5LDE2OSwxNjldLGRhcmtraGFraTpbMTg5LDE4MywxMDddLGRhcmttYWdlbnRhOlsxMzksMCwxMzldLGRhcmtvbGl2ZWdyZWVuOls4NSwxMDcsNDddLGRhcmtvcmFuZ2U6WzI1NSwxNDAsMF0sZGFya29yY2hpZDpbMTUzLDUwLDIwNF0sZGFya3JlZDpbMTM5LDAsMF0sZGFya3NhbG1vbjpbMjMzLDE1MCwxMjJdLGRhcmtzZWFncmVlbjpbMTQzLDE4OCwxNDNdLGRhcmtzbGF0ZWJsdWU6WzcyLDYxLDEzOV0sZGFya3NsYXRlZ3JheTpbNDcsNzksNzldLGRhcmtzbGF0ZWdyZXk6WzQ3LDc5LDc5XSxkYXJrdHVycXVvaXNlOlswLDIwNiwyMDldLGRhcmt2aW9sZXQ6WzE0OCwwLDIxMV0sZGVlcHBpbms6WzI1NSwyMCwxNDddLGRlZXBza3libHVlOlswLDE5MSwyNTVdLGRpbWdyYXk6WzEwNSwxMDUsMTA1XSxkaW1ncmV5OlsxMDUsMTA1LDEwNV0sZG9kZ2VyYmx1ZTpbMzAsMTQ0LDI1NV0sZmlyZWJyaWNrOlsxNzgsMzQsMzRdLGZsb3JhbHdoaXRlOlsyNTUsMjUwLDI0MF0sZm9yZXN0Z3JlZW46WzM0LDEzOSwzNF0sZnVjaHNpYTpbMjU1LDAsMjU1XSxnYWluc2Jvcm86WzIyMCwyMjAsMjIwXSxnaG9zdHdoaXRlOlsyNDgsMjQ4LDI1NV0sZ29sZDpbMjU1LDIxNSwwXSxnb2xkZW5yb2Q6WzIxOCwxNjUsMzJdLGdyYXk6WzEyOCwxMjgsMTI4XSxncmVlbjpbMCwxMjgsMF0sZ3JlZW55ZWxsb3c6WzE3MywyNTUsNDddLGdyZXk6WzEyOCwxMjgsMTI4XSxob25leWRldzpbMjQwLDI1NSwyNDBdLGhvdHBpbms6WzI1NSwxMDUsMTgwXSxpbmRpYW5yZWQ6WzIwNSw5Miw5Ml0saW5kaWdvOls3NSwwLDEzMF0saXZvcnk6WzI1NSwyNTUsMjQwXSxraGFraTpbMjQwLDIzMCwxNDBdLGxhdmVuZGVyOlsyMzAsMjMwLDI1MF0sbGF2ZW5kZXJibHVzaDpbMjU1LDI0MCwyNDVdLGxhd25ncmVlbjpbMTI0LDI1MiwwXSxsZW1vbmNoaWZmb246WzI1NSwyNTAsMjA1XSxsaWdodGJsdWU6WzE3MywyMTYsMjMwXSxsaWdodGNvcmFsOlsyNDAsMTI4LDEyOF0sbGlnaHRjeWFuOlsyMjQsMjU1LDI1NV0sbGlnaHRnb2xkZW5yb2R5ZWxsb3c6WzI1MCwyNTAsMjEwXSxsaWdodGdyYXk6WzIxMSwyMTEsMjExXSxsaWdodGdyZWVuOlsxNDQsMjM4LDE0NF0sbGlnaHRncmV5OlsyMTEsMjExLDIxMV0sbGlnaHRwaW5rOlsyNTUsMTgyLDE5M10sbGlnaHRzYWxtb246WzI1NSwxNjAsMTIyXSxsaWdodHNlYWdyZWVuOlszMiwxNzgsMTcwXSxsaWdodHNreWJsdWU6WzEzNSwyMDYsMjUwXSxsaWdodHNsYXRlZ3JheTpbMTE5LDEzNiwxNTNdLGxpZ2h0c2xhdGVncmV5OlsxMTksMTM2LDE1M10sbGlnaHRzdGVlbGJsdWU6WzE3NiwxOTYsMjIyXSxsaWdodHllbGxvdzpbMjU1LDI1NSwyMjRdLGxpbWU6WzAsMjU1LDBdLGxpbWVncmVlbjpbNTAsMjA1LDUwXSxsaW5lbjpbMjUwLDI0MCwyMzBdLG1hZ2VudGE6WzI1NSwwLDI1NV0sbWFyb29uOlsxMjgsMCwwXSxtZWRpdW1hcXVhbWFyaW5lOlsxMDIsMjA1LDE3MF0sbWVkaXVtYmx1ZTpbMCwwLDIwNV0sbWVkaXVtb3JjaGlkOlsxODYsODUsMjExXSxtZWRpdW1wdXJwbGU6WzE0NywxMTIsMjE5XSxtZWRpdW1zZWFncmVlbjpbNjAsMTc5LDExM10sbWVkaXVtc2xhdGVibHVlOlsxMjMsMTA0LDIzOF0sbWVkaXVtc3ByaW5nZ3JlZW46WzAsMjUwLDE1NF0sbWVkaXVtdHVycXVvaXNlOls3MiwyMDksMjA0XSxtZWRpdW12aW9sZXRyZWQ6WzE5OSwyMSwxMzNdLG1pZG5pZ2h0Ymx1ZTpbMjUsMjUsMTEyXSxtaW50Y3JlYW06WzI0NSwyNTUsMjUwXSxtaXN0eXJvc2U6WzI1NSwyMjgsMjI1XSxtb2NjYXNpbjpbMjU1LDIyOCwxODFdLG5hdmFqb3doaXRlOlsyNTUsMjIyLDE3M10sbmF2eTpbMCwwLDEyOF0sb2xkbGFjZTpbMjUzLDI0NSwyMzBdLG9saXZlOlsxMjgsMTI4LDBdLG9saXZlZHJhYjpbMTA3LDE0MiwzNV0sb3JhbmdlOlsyNTUsMTY1LDBdLG9yYW5nZXJlZDpbMjU1LDY5LDBdLG9yY2hpZDpbMjE4LDExMiwyMTRdLHBhbGVnb2xkZW5yb2Q6WzIzOCwyMzIsMTcwXSxwYWxlZ3JlZW46WzE1MiwyNTEsMTUyXSxwYWxldHVycXVvaXNlOlsxNzUsMjM4LDIzOF0scGFsZXZpb2xldHJlZDpbMjE5LDExMiwxNDddLHBhcGF5YXdoaXA6WzI1NSwyMzksMjEzXSxwZWFjaHB1ZmY6WzI1NSwyMTgsMTg1XSxwZXJ1OlsyMDUsMTMzLDYzXSxwaW5rOlsyNTUsMTkyLDIwM10scGx1bTpbMjIxLDE2MCwyMjFdLHBvd2RlcmJsdWU6WzE3NiwyMjQsMjMwXSxwdXJwbGU6WzEyOCwwLDEyOF0scmViZWNjYXB1cnBsZTpbMTAyLDUxLDE1M10scmVkOlsyNTUsMCwwXSxyb3N5YnJvd246WzE4OCwxNDMsMTQzXSxyb3lhbGJsdWU6WzY1LDEwNSwyMjVdLHNhZGRsZWJyb3duOlsxMzksNjksMTldLHNhbG1vbjpbMjUwLDEyOCwxMTRdLHNhbmR5YnJvd246WzI0NCwxNjQsOTZdLHNlYWdyZWVuOls0NiwxMzksODddLHNlYXNoZWxsOlsyNTUsMjQ1LDIzOF0sc2llbm5hOlsxNjAsODIsNDVdLHNpbHZlcjpbMTkyLDE5MiwxOTJdLHNreWJsdWU6WzEzNSwyMDYsMjM1XSxzbGF0ZWJsdWU6WzEwNiw5MCwyMDVdLHNsYXRlZ3JheTpbMTEyLDEyOCwxNDRdLHNsYXRlZ3JleTpbMTEyLDEyOCwxNDRdLHNub3c6WzI1NSwyNTAsMjUwXSxzcHJpbmdncmVlbjpbMCwyNTUsMTI3XSxzdGVlbGJsdWU6WzcwLDEzMCwxODBdLHRhbjpbMjEwLDE4MCwxNDBdLHRlYWw6WzAsMTI4LDEyOF0sdGhpc3RsZTpbMjE2LDE5MSwyMTZdLHRvbWF0bzpbMjU1LDk5LDcxXSx0dXJxdW9pc2U6WzY0LDIyNCwyMDhdLHZpb2xldDpbMjM4LDEzMCwyMzhdLHdoZWF0OlsyNDUsMjIyLDE3OV0sd2hpdGU6WzI1NSwyNTUsMjU1XSx3aGl0ZXNtb2tlOlsyNDUsMjQ1LDI0NV0seWVsbG93OlsyNTUsMjU1LDBdLHllbGxvd2dyZWVuOlsxNTQsMjA1LDUwXX07bi5leHBvcnRzPWZ9LHt9XSw0OltmdW5jdGlvbihuLGYpe2Z1bmN0aW9uIG8oZSxuKXt2YXIgZj1qKys7aWYobj1ufHx7fSxuLmxvZ2dpbmcmJih2Lm9wdGlvbnMubG9nZ2luZz0hMCx2Lm9wdGlvbnMuc3RhcnQ9RGF0ZS5ub3coKSksbi5hc3luYz1cInVuZGVmaW5lZFwiPT10eXBlb2Ygbi5hc3luYz8hMDpuLmFzeW5jLG4uYWxsb3dUYWludD1cInVuZGVmaW5lZFwiPT10eXBlb2Ygbi5hbGxvd1RhaW50PyExOm4uYWxsb3dUYWludCxuLnJlbW92ZUNvbnRhaW5lcj1cInVuZGVmaW5lZFwiPT10eXBlb2Ygbi5yZW1vdmVDb250YWluZXI/ITA6bi5yZW1vdmVDb250YWluZXIsbi5qYXZhc2NyaXB0RW5hYmxlZD1cInVuZGVmaW5lZFwiPT10eXBlb2Ygbi5qYXZhc2NyaXB0RW5hYmxlZD8hMTpuLmphdmFzY3JpcHRFbmFibGVkLG4uaW1hZ2VUaW1lb3V0PVwidW5kZWZpbmVkXCI9PXR5cGVvZiBuLmltYWdlVGltZW91dD8xZTQ6bi5pbWFnZVRpbWVvdXQsbi5yZW5kZXJlcj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuLnJlbmRlcmVyP24ucmVuZGVyZXI6YyxuLnN0cmljdD0hIW4uc3RyaWN0LFwic3RyaW5nXCI9PXR5cGVvZiBlKXtpZihcInN0cmluZ1wiIT10eXBlb2Ygbi5wcm94eSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJQcm94eSBtdXN0IGJlIHVzZWQgd2hlbiByZW5kZXJpbmcgdXJsXCIpO3ZhciBvPW51bGwhPW4ud2lkdGg/bi53aWR0aDp3aW5kb3cuaW5uZXJXaWR0aCx0PW51bGwhPW4uaGVpZ2h0P24uaGVpZ2h0OndpbmRvdy5pbm5lckhlaWdodDtyZXR1cm4gZyhhKGUpLG4ucHJveHksZG9jdW1lbnQsbyx0LG4pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGkoZS5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxlLG4sbyx0KX0pfXZhciBsPSh2b2lkIDA9PT1lP1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdOmUubGVuZ3RoP2U6W2VdKVswXTtyZXR1cm4gbC5zZXRBdHRyaWJ1dGUoeCtmLGYpLGQobC5vd25lckRvY3VtZW50LG4sbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmlubmVyV2lkdGgsbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmlubmVySGVpZ2h0LGYpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5vbnJlbmRlcmVkJiYodihcIm9wdGlvbnMub25yZW5kZXJlZCBpcyBkZXByZWNhdGVkLCBodG1sMmNhbnZhcyByZXR1cm5zIGEgUHJvbWlzZSBjb250YWluaW5nIHRoZSBjYW52YXNcIiksbi5vbnJlbmRlcmVkKGUpKSxlfSl9ZnVuY3Rpb24gZChlLG4sZixvLGQpe3JldHVybiBiKGUsZSxmLG8sbixlLmRlZmF1bHRWaWV3LnBhZ2VYT2Zmc2V0LGUuZGVmYXVsdFZpZXcucGFnZVlPZmZzZXQpLnRoZW4oZnVuY3Rpb24odCl7dihcIkRvY3VtZW50IGNsb25lZFwiKTt2YXIgbD14K2Qscz1cIltcIitsK1wiPSdcIitkK1wiJ11cIjtlLnF1ZXJ5U2VsZWN0b3IocykucmVtb3ZlQXR0cmlidXRlKGwpO3ZhciB1PXQuY29udGVudFdpbmRvdyxhPXUuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKSxwPVByb21pc2UucmVzb2x2ZShcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLm9uY2xvbmU/bi5vbmNsb25lKHUuZG9jdW1lbnQpOiEwKTtyZXR1cm4gcC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkoYSx0LG4sZixvKX0pfSl9ZnVuY3Rpb24gaShlLG4sZixvLGQpe3ZhciBpPW4uY29udGVudFdpbmRvdyxhPW5ldyBwKGkuZG9jdW1lbnQpLGM9bmV3IHkoZixhKSxyPWgoZSksdz1cInZpZXdcIj09PWYudHlwZT9vOnMoaS5kb2N1bWVudCksYj1cInZpZXdcIj09PWYudHlwZT9kOnUoaS5kb2N1bWVudCksZz1uZXcgZi5yZW5kZXJlcih3LGIsYyxmLGRvY3VtZW50KSx4PW5ldyBtKGUsZyxhLGMsZik7cmV0dXJuIHgucmVhZHkudGhlbihmdW5jdGlvbigpe3YoXCJGaW5pc2hlZCByZW5kZXJpbmdcIik7dmFyIG87cmV0dXJuIG89XCJ2aWV3XCI9PT1mLnR5cGU/bChnLmNhbnZhcyx7d2lkdGg6Zy5jYW52YXMud2lkdGgsaGVpZ2h0OmcuY2FudmFzLmhlaWdodCx0b3A6MCxsZWZ0OjAseDowLHk6MH0pOmU9PT1pLmRvY3VtZW50LmJvZHl8fGU9PT1pLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudHx8bnVsbCE9Zi5jYW52YXM/Zy5jYW52YXM6bChnLmNhbnZhcyx7d2lkdGg6bnVsbCE9Zi53aWR0aD9mLndpZHRoOnIud2lkdGgsaGVpZ2h0Om51bGwhPWYuaGVpZ2h0P2YuaGVpZ2h0OnIuaGVpZ2h0LHRvcDpyLnRvcCxsZWZ0OnIubGVmdCx4OjAseTowfSksdChuLGYpLG99KX1mdW5jdGlvbiB0KGUsbil7bi5yZW1vdmVDb250YWluZXImJihlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksdihcIkNsZWFuZWQgdXAgY29udGFpbmVyXCIpKX1mdW5jdGlvbiBsKGUsbil7dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxvPU1hdGgubWluKGUud2lkdGgtMSxNYXRoLm1heCgwLG4ubGVmdCkpLGQ9TWF0aC5taW4oZS53aWR0aCxNYXRoLm1heCgxLG4ubGVmdCtuLndpZHRoKSksaT1NYXRoLm1pbihlLmhlaWdodC0xLE1hdGgubWF4KDAsbi50b3ApKSx0PU1hdGgubWluKGUuaGVpZ2h0LE1hdGgubWF4KDEsbi50b3Arbi5oZWlnaHQpKTtmLndpZHRoPW4ud2lkdGgsZi5oZWlnaHQ9bi5oZWlnaHQ7dmFyIGw9ZC1vLHM9dC1pO3JldHVybiB2KFwiQ3JvcHBpbmcgY2FudmFzIGF0OlwiLFwibGVmdDpcIixuLmxlZnQsXCJ0b3A6XCIsbi50b3AsXCJ3aWR0aDpcIixsLFwiaGVpZ2h0OlwiLHMpLHYoXCJSZXN1bHRpbmcgY3JvcCB3aXRoIHdpZHRoXCIsbi53aWR0aCxcImFuZCBoZWlnaHRcIixuLmhlaWdodCxcIndpdGggeFwiLG8sXCJhbmQgeVwiLGkpLGYuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShlLG8saSxsLHMsbi54LG4ueSxsLHMpLGZ9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gTWF0aC5tYXgoTWF0aC5tYXgoZS5ib2R5LnNjcm9sbFdpZHRoLGUuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoKSxNYXRoLm1heChlLmJvZHkub2Zmc2V0V2lkdGgsZS5kb2N1bWVudEVsZW1lbnQub2Zmc2V0V2lkdGgpLE1hdGgubWF4KGUuYm9keS5jbGllbnRXaWR0aCxlLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIE1hdGgubWF4KE1hdGgubWF4KGUuYm9keS5zY3JvbGxIZWlnaHQsZS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KSxNYXRoLm1heChlLmJvZHkub2Zmc2V0SGVpZ2h0LGUuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodCksTWF0aC5tYXgoZS5ib2R5LmNsaWVudEhlaWdodCxlLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpKX1mdW5jdGlvbiBhKGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3JldHVybiBuLmhyZWY9ZSxuLmhyZWY9bi5ocmVmLG59dmFyIHA9bihcIi4vc3VwcG9ydFwiKSxjPW4oXCIuL3JlbmRlcmVycy9jYW52YXNcIikseT1uKFwiLi9pbWFnZWxvYWRlclwiKSxtPW4oXCIuL25vZGVwYXJzZXJcIikscj1uKFwiLi9ub2RlY29udGFpbmVyXCIpLHY9bihcIi4vbG9nXCIpLHc9bihcIi4vdXRpbHNcIiksYj1uKFwiLi9jbG9uZVwiKSxnPW4oXCIuL3Byb3h5XCIpLmxvYWRVcmxEb2N1bWVudCxoPXcuZ2V0Qm91bmRzLHg9XCJkYXRhLWh0bWwyY2FudmFzLW5vZGVcIixqPTA7by5DYW52YXNSZW5kZXJlcj1jLG8uTm9kZUNvbnRhaW5lcj1yLG8ubG9nPXYsby51dGlscz13O3ZhciBrPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBkb2N1bWVudHx8XCJmdW5jdGlvblwiIT10eXBlb2YgT2JqZWN0LmNyZWF0ZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0P2Z1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KFwiTm8gY2FudmFzIHN1cHBvcnRcIil9Om87Zi5leHBvcnRzPWssXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZS5hbWQmJmUoXCJodG1sMmNhbnZhc1wiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGt9KX0se1wiLi9jbG9uZVwiOjIsXCIuL2ltYWdlbG9hZGVyXCI6MTEsXCIuL2xvZ1wiOjEzLFwiLi9ub2RlY29udGFpbmVyXCI6MTQsXCIuL25vZGVwYXJzZXJcIjoxNSxcIi4vcHJveHlcIjoxNixcIi4vcmVuZGVyZXJzL2NhbnZhc1wiOjIwLFwiLi9zdXBwb3J0XCI6MjIsXCIuL3V0aWxzXCI6MjZ9XSw1OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSl7aWYodGhpcy5zcmM9ZSxvKFwiRHVtbXlJbWFnZUNvbnRhaW5lciBmb3JcIixlKSwhdGhpcy5wcm9taXNlfHwhdGhpcy5pbWFnZSl7byhcIkluaXRpYXRpbmcgRHVtbXlJbWFnZUNvbnRhaW5lclwiKSxmLnByb3RvdHlwZS5pbWFnZT1uZXcgSW1hZ2U7dmFyIG49dGhpcy5pbWFnZTtmLnByb3RvdHlwZS5wcm9taXNlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsZil7bi5vbmxvYWQ9ZSxuLm9uZXJyb3I9ZixuLnNyYz1kKCksbi5jb21wbGV0ZT09PSEwJiZlKG4pfSl9fXZhciBvPWUoXCIuL2xvZ1wiKSxkPWUoXCIuL3V0aWxzXCIpLnNtYWxsSW1hZ2U7bi5leHBvcnRzPWZ9LHtcIi4vbG9nXCI6MTMsXCIuL3V0aWxzXCI6MjZ9XSw2OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuKXt2YXIgZixkLGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxzPVwiSGlkZGVuIFRleHRcIjtpLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixpLnN0eWxlLmZvbnRGYW1pbHk9ZSxpLnN0eWxlLmZvbnRTaXplPW4saS5zdHlsZS5tYXJnaW49MCxpLnN0eWxlLnBhZGRpbmc9MCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGkpLHQuc3JjPW8oKSx0LndpZHRoPTEsdC5oZWlnaHQ9MSx0LnN0eWxlLm1hcmdpbj0wLHQuc3R5bGUucGFkZGluZz0wLHQuc3R5bGUudmVydGljYWxBbGlnbj1cImJhc2VsaW5lXCIsbC5zdHlsZS5mb250RmFtaWx5PWUsbC5zdHlsZS5mb250U2l6ZT1uLGwuc3R5bGUubWFyZ2luPTAsbC5zdHlsZS5wYWRkaW5nPTAsbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzKSksaS5hcHBlbmRDaGlsZChsKSxpLmFwcGVuZENoaWxkKHQpLGY9dC5vZmZzZXRUb3AtbC5vZmZzZXRUb3ArMSxpLnJlbW92ZUNoaWxkKGwpLGkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocykpLGkuc3R5bGUubGluZUhlaWdodD1cIm5vcm1hbFwiLHQuc3R5bGUudmVydGljYWxBbGlnbj1cInN1cGVyXCIsZD10Lm9mZnNldFRvcC1pLm9mZnNldFRvcCsxLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaSksdGhpcy5iYXNlbGluZT1mLHRoaXMubGluZVdpZHRoPTEsdGhpcy5taWRkbGU9ZH12YXIgbz1lKFwiLi91dGlsc1wiKS5zbWFsbEltYWdlO24uZXhwb3J0cz1mfSx7XCIuL3V0aWxzXCI6MjZ9XSw3OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoKXt0aGlzLmRhdGE9e319dmFyIG89ZShcIi4vZm9udFwiKTtmLnByb3RvdHlwZS5nZXRNZXRyaWNzPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHZvaWQgMD09PXRoaXMuZGF0YVtlK1wiLVwiK25dJiYodGhpcy5kYXRhW2UrXCItXCIrbl09bmV3IG8oZSxuKSksdGhpcy5kYXRhW2UrXCItXCIrbl19LG4uZXhwb3J0cz1mfSx7XCIuL2ZvbnRcIjo2fV0sODpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKG4sZixvKXt0aGlzLmltYWdlPW51bGwsdGhpcy5zcmM9bjt2YXIgaT10aGlzLHQ9ZChuKTt0aGlzLnByb21pc2U9KGY/bmV3IFByb21pc2UoZnVuY3Rpb24oZSl7XCJhYm91dDpibGFua1wiPT09bi5jb250ZW50V2luZG93LmRvY3VtZW50LlVSTHx8bnVsbD09bi5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudD9uLmNvbnRlbnRXaW5kb3cub25sb2FkPW4ub25sb2FkPWZ1bmN0aW9uKCl7ZShuKX06ZShuKX0pOnRoaXMucHJveHlMb2FkKG8ucHJveHksdCxvKSkudGhlbihmdW5jdGlvbihuKXt2YXIgZj1lKFwiLi9jb3JlXCIpO3JldHVybiBmKG4uY29udGVudFdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQse3R5cGU6XCJ2aWV3XCIsd2lkdGg6bi53aWR0aCxoZWlnaHQ6bi5oZWlnaHQscHJveHk6by5wcm94eSxqYXZhc2NyaXB0RW5hYmxlZDpvLmphdmFzY3JpcHRFbmFibGVkLHJlbW92ZUNvbnRhaW5lcjpvLnJlbW92ZUNvbnRhaW5lcixhbGxvd1RhaW50Om8uYWxsb3dUYWludCxpbWFnZVRpbWVvdXQ6by5pbWFnZVRpbWVvdXQvMn0pfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gaS5pbWFnZT1lfSl9dmFyIG89ZShcIi4vdXRpbHNcIiksZD1vLmdldEJvdW5kcyxpPWUoXCIuL3Byb3h5XCIpLmxvYWRVcmxEb2N1bWVudDtmLnByb3RvdHlwZS5wcm94eUxvYWQ9ZnVuY3Rpb24oZSxuLGYpe3ZhciBvPXRoaXMuc3JjO3JldHVybiBpKG8uc3JjLGUsby5vd25lckRvY3VtZW50LG4ud2lkdGgsbi5oZWlnaHQsZil9LG4uZXhwb3J0cz1mfSx7XCIuL2NvcmVcIjo0LFwiLi9wcm94eVwiOjE2LFwiLi91dGlsc1wiOjI2fV0sOTpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUpe3RoaXMuc3JjPWUudmFsdWUsdGhpcy5jb2xvclN0b3BzPVtdLHRoaXMudHlwZT1udWxsLHRoaXMueDA9LjUsdGhpcy55MD0uNSx0aGlzLngxPS41LHRoaXMueTE9LjUsdGhpcy5wcm9taXNlPVByb21pc2UucmVzb2x2ZSghMCl9Zi5UWVBFUz17TElORUFSOjEsUkFESUFMOjJ9LGYuUkVHRVhQX0NPTE9SU1RPUD0vXlxccyoocmdiYT9cXChcXHMqXFxkezEsM30sXFxzKlxcZHsxLDN9LFxccypcXGR7MSwzfSg/OixcXHMqWzAtOVxcLl0rKT9cXHMqXFwpfFthLXpdezMsMjB9fCNbYS1mMC05XXszLDZ9KSg/OlxccysoXFxkezEsM30oPzpcXC5cXGQrKT8pKCV8cHgpPyk/KD86XFxzfCQpL2ksbi5leHBvcnRzPWZ9LHt9XSwxMDpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUsbil7dGhpcy5zcmM9ZSx0aGlzLmltYWdlPW5ldyBJbWFnZTt2YXIgZj10aGlzO3RoaXMudGFpbnRlZD1udWxsLHRoaXMucHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihvLGQpe2YuaW1hZ2Uub25sb2FkPW8sZi5pbWFnZS5vbmVycm9yPWQsbiYmKGYuaW1hZ2UuY3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIiksZi5pbWFnZS5zcmM9ZSxmLmltYWdlLmNvbXBsZXRlPT09ITAmJm8oZi5pbWFnZSl9KX1uLmV4cG9ydHM9Zn0se31dLDExOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuKXt0aGlzLmxpbms9bnVsbCx0aGlzLm9wdGlvbnM9ZSx0aGlzLnN1cHBvcnQ9bix0aGlzLm9yaWdpbj10aGlzLmdldE9yaWdpbih3aW5kb3cubG9jYXRpb24uaHJlZil9dmFyIG89ZShcIi4vbG9nXCIpLGQ9ZShcIi4vaW1hZ2Vjb250YWluZXJcIiksaT1lKFwiLi9kdW1teWltYWdlY29udGFpbmVyXCIpLHQ9ZShcIi4vcHJveHlpbWFnZWNvbnRhaW5lclwiKSxsPWUoXCIuL2ZyYW1lY29udGFpbmVyXCIpLHM9ZShcIi4vc3ZnY29udGFpbmVyXCIpLHU9ZShcIi4vc3Znbm9kZWNvbnRhaW5lclwiKSxhPWUoXCIuL2xpbmVhcmdyYWRpZW50Y29udGFpbmVyXCIpLHA9ZShcIi4vd2Via2l0Z3JhZGllbnRjb250YWluZXJcIiksYz1lKFwiLi91dGlsc1wiKS5iaW5kO2YucHJvdG90eXBlLmZpbmRJbWFnZXM9ZnVuY3Rpb24oZSl7dmFyIG49W107cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsbil7c3dpdGNoKG4ubm9kZS5ub2RlTmFtZSl7Y2FzZVwiSU1HXCI6cmV0dXJuIGUuY29uY2F0KFt7YXJnczpbbi5ub2RlLnNyY10sbWV0aG9kOlwidXJsXCJ9XSk7Y2FzZVwic3ZnXCI6Y2FzZVwiSUZSQU1FXCI6cmV0dXJuIGUuY29uY2F0KFt7YXJnczpbbi5ub2RlXSxtZXRob2Q6bi5ub2RlLm5vZGVOYW1lfV0pfXJldHVybiBlfSxbXSkuZm9yRWFjaCh0aGlzLmFkZEltYWdlKG4sdGhpcy5sb2FkSW1hZ2UpLHRoaXMpLG59LGYucHJvdG90eXBlLmZpbmRCYWNrZ3JvdW5kSW1hZ2U9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gbi5wYXJzZUJhY2tncm91bmRJbWFnZXMoKS5maWx0ZXIodGhpcy5oYXNJbWFnZUJhY2tncm91bmQpLmZvckVhY2godGhpcy5hZGRJbWFnZShlLHRoaXMubG9hZEltYWdlKSx0aGlzKSxlfSxmLnByb3RvdHlwZS5hZGRJbWFnZT1mdW5jdGlvbihlLG4pe3JldHVybiBmdW5jdGlvbihmKXtmLmFyZ3MuZm9yRWFjaChmdW5jdGlvbihkKXt0aGlzLmltYWdlRXhpc3RzKGUsZCl8fChlLnNwbGljZSgwLDAsbi5jYWxsKHRoaXMsZikpLG8oXCJBZGRlZCBpbWFnZSAjXCIrZS5sZW5ndGgsXCJzdHJpbmdcIj09dHlwZW9mIGQ/ZC5zdWJzdHJpbmcoMCwxMDApOmQpKX0sdGhpcyl9fSxmLnByb3RvdHlwZS5oYXNJbWFnZUJhY2tncm91bmQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJub25lXCIhPT1lLm1ldGhvZH0sZi5wcm90b3R5cGUubG9hZEltYWdlPWZ1bmN0aW9uKGUpe2lmKFwidXJsXCI9PT1lLm1ldGhvZCl7dmFyIG49ZS5hcmdzWzBdO3JldHVybiF0aGlzLmlzU1ZHKG4pfHx0aGlzLnN1cHBvcnQuc3ZnfHx0aGlzLm9wdGlvbnMuYWxsb3dUYWludD9uLm1hdGNoKC9kYXRhOmltYWdlXFwvLio7YmFzZTY0LC9pKT9uZXcgZChuLnJlcGxhY2UoL3VybFxcKFsnXCJdezAsfXxbJ1wiXXswLH1cXCkkL2dpLFwiXCIpLCExKTp0aGlzLmlzU2FtZU9yaWdpbihuKXx8dGhpcy5vcHRpb25zLmFsbG93VGFpbnQ9PT0hMHx8dGhpcy5pc1NWRyhuKT9uZXcgZChuLCExKTp0aGlzLnN1cHBvcnQuY29ycyYmIXRoaXMub3B0aW9ucy5hbGxvd1RhaW50JiZ0aGlzLm9wdGlvbnMudXNlQ09SUz9uZXcgZChuLCEwKTp0aGlzLm9wdGlvbnMucHJveHk/bmV3IHQobix0aGlzLm9wdGlvbnMucHJveHkpOm5ldyBpKG4pOm5ldyBzKG4pfXJldHVyblwibGluZWFyLWdyYWRpZW50XCI9PT1lLm1ldGhvZD9uZXcgYShlKTpcImdyYWRpZW50XCI9PT1lLm1ldGhvZD9uZXcgcChlKTpcInN2Z1wiPT09ZS5tZXRob2Q/bmV3IHUoZS5hcmdzWzBdLHRoaXMuc3VwcG9ydC5zdmcpOlwiSUZSQU1FXCI9PT1lLm1ldGhvZD9uZXcgbChlLmFyZ3NbMF0sdGhpcy5pc1NhbWVPcmlnaW4oZS5hcmdzWzBdLnNyYyksdGhpcy5vcHRpb25zKTpuZXcgaShlKX0sZi5wcm90b3R5cGUuaXNTVkc9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdmdcIj09PWUuc3Vic3RyaW5nKGUubGVuZ3RoLTMpLnRvTG93ZXJDYXNlKCl8fHMucHJvdG90eXBlLmlzSW5saW5lKGUpfSxmLnByb3RvdHlwZS5pbWFnZUV4aXN0cz1mdW5jdGlvbihlLG4pe3JldHVybiBlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3JjPT09bn0pfSxmLnByb3RvdHlwZS5pc1NhbWVPcmlnaW49ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0T3JpZ2luKGUpPT09dGhpcy5vcmlnaW59LGYucHJvdG90eXBlLmdldE9yaWdpbj1mdW5jdGlvbihlKXt2YXIgbj10aGlzLmxpbmt8fCh0aGlzLmxpbms9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIikpO3JldHVybiBuLmhyZWY9ZSxuLmhyZWY9bi5ocmVmLG4ucHJvdG9jb2wrbi5ob3N0bmFtZStuLnBvcnR9LGYucHJvdG90eXBlLmdldFByb21pc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGltZW91dChlLHRoaXMub3B0aW9ucy5pbWFnZVRpbWVvdXQpW1wiY2F0Y2hcIl0oZnVuY3Rpb24oKXt2YXIgbj1uZXcgaShlLnNyYyk7cmV0dXJuIG4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uKG4pe2UuaW1hZ2U9bn0pfSl9LGYucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgbj1udWxsO3JldHVybiB0aGlzLmltYWdlcy5zb21lKGZ1bmN0aW9uKGYpe3JldHVybihuPWYpLnNyYz09PWV9KT9uOm51bGx9LGYucHJvdG90eXBlLmZldGNoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmltYWdlcz1lLnJlZHVjZShjKHRoaXMuZmluZEJhY2tncm91bmRJbWFnZSx0aGlzKSx0aGlzLmZpbmRJbWFnZXMoZSkpLHRoaXMuaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24oZSxuKXtlLnByb21pc2UudGhlbihmdW5jdGlvbigpe28oXCJTdWNjZXNmdWxseSBsb2FkZWQgaW1hZ2UgI1wiKyhuKzEpLGUpfSxmdW5jdGlvbihmKXtvKFwiRmFpbGVkIGxvYWRpbmcgaW1hZ2UgI1wiKyhuKzEpLGUsZil9KX0pLHRoaXMucmVhZHk9UHJvbWlzZS5hbGwodGhpcy5pbWFnZXMubWFwKHRoaXMuZ2V0UHJvbWlzZSx0aGlzKSksbyhcIkZpbmlzaGVkIHNlYXJjaGluZyBpbWFnZXNcIiksdGhpc30sZi5wcm90b3R5cGUudGltZW91dD1mdW5jdGlvbihlLG4pe3ZhciBmLGQ9UHJvbWlzZS5yYWNlKFtlLnByb21pc2UsbmV3IFByb21pc2UoZnVuY3Rpb24oZCxpKXtmPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtvKFwiVGltZWQgb3V0IGxvYWRpbmcgaW1hZ2VcIixlKSxpKGUpfSxuKX0pXSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gY2xlYXJUaW1lb3V0KGYpLGV9KTtyZXR1cm4gZFtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGYpfSksZH0sbi5leHBvcnRzPWZ9LHtcIi4vZHVtbXlpbWFnZWNvbnRhaW5lclwiOjUsXCIuL2ZyYW1lY29udGFpbmVyXCI6OCxcIi4vaW1hZ2Vjb250YWluZXJcIjoxMCxcIi4vbGluZWFyZ3JhZGllbnRjb250YWluZXJcIjoxMixcIi4vbG9nXCI6MTMsXCIuL3Byb3h5aW1hZ2Vjb250YWluZXJcIjoxNyxcIi4vc3ZnY29udGFpbmVyXCI6MjMsXCIuL3N2Z25vZGVjb250YWluZXJcIjoyNCxcIi4vdXRpbHNcIjoyNixcIi4vd2Via2l0Z3JhZGllbnRjb250YWluZXJcIjoyN31dLDEyOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSl7by5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy50eXBlPW8uVFlQRVMuTElORUFSO3ZhciBuPWYuUkVHRVhQX0RJUkVDVElPTi50ZXN0KGUuYXJnc1swXSl8fCFvLlJFR0VYUF9DT0xPUlNUT1AudGVzdChlLmFyZ3NbMF0pO24/ZS5hcmdzWzBdLnNwbGl0KC9cXHMrLykucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24oZSxuKXtzd2l0Y2goZSl7Y2FzZVwibGVmdFwiOnRoaXMueDA9MCx0aGlzLngxPTE7YnJlYWs7Y2FzZVwidG9wXCI6dGhpcy55MD0wLHRoaXMueTE9MTticmVhaztjYXNlXCJyaWdodFwiOnRoaXMueDA9MSx0aGlzLngxPTA7YnJlYWs7Y2FzZVwiYm90dG9tXCI6dGhpcy55MD0xLHRoaXMueTE9MDticmVhaztjYXNlXCJ0b1wiOnZhciBmPXRoaXMueTAsbz10aGlzLngwO3RoaXMueTA9dGhpcy55MSx0aGlzLngwPXRoaXMueDEsdGhpcy54MT1vLHRoaXMueTE9ZjticmVhaztjYXNlXCJjZW50ZXJcIjpicmVhaztkZWZhdWx0OnZhciBkPS4wMSpwYXJzZUZsb2F0KGUsMTApO2lmKGlzTmFOKGQpKWJyZWFrOzA9PT1uPyh0aGlzLnkwPWQsdGhpcy55MT0xLXRoaXMueTApOih0aGlzLngwPWQsdGhpcy54MT0xLXRoaXMueDApfX0sdGhpcyk6KHRoaXMueTA9MCx0aGlzLnkxPTEpLHRoaXMuY29sb3JTdG9wcz1lLmFyZ3Muc2xpY2Uobj8xOjApLm1hcChmdW5jdGlvbihlKXt2YXIgbj1lLm1hdGNoKG8uUkVHRVhQX0NPTE9SU1RPUCksZj0rblsyXSxpPTA9PT1mP1wiJVwiOm5bM107cmV0dXJue2NvbG9yOm5ldyBkKG5bMV0pLHN0b3A6XCIlXCI9PT1pP2YvMTAwOm51bGx9fSksbnVsbD09PXRoaXMuY29sb3JTdG9wc1swXS5zdG9wJiYodGhpcy5jb2xvclN0b3BzWzBdLnN0b3A9MCksbnVsbD09PXRoaXMuY29sb3JTdG9wc1t0aGlzLmNvbG9yU3RvcHMubGVuZ3RoLTFdLnN0b3AmJih0aGlzLmNvbG9yU3RvcHNbdGhpcy5jb2xvclN0b3BzLmxlbmd0aC0xXS5zdG9wPTEpLHRoaXMuY29sb3JTdG9wcy5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7bnVsbD09PWUuc3RvcCYmdGhpcy5jb2xvclN0b3BzLnNsaWNlKG4pLnNvbWUoZnVuY3Rpb24oZixvKXtyZXR1cm4gbnVsbCE9PWYuc3RvcD8oZS5zdG9wPShmLnN0b3AtdGhpcy5jb2xvclN0b3BzW24tMV0uc3RvcCkvKG8rMSkrdGhpcy5jb2xvclN0b3BzW24tMV0uc3RvcCwhMCk6ITF9LHRoaXMpfSx0aGlzKX12YXIgbz1lKFwiLi9ncmFkaWVudGNvbnRhaW5lclwiKSxkPWUoXCIuL2NvbG9yXCIpO2YucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLGYuUkVHRVhQX0RJUkVDVElPTj0vXlxccyooPzp0b3xsZWZ0fHJpZ2h0fHRvcHxib3R0b218Y2VudGVyfFxcZHsxLDN9KD86XFwuXFxkKyk/JT8pKD86XFxzfCQpL2ksbi5leHBvcnRzPWZ9LHtcIi4vY29sb3JcIjozLFwiLi9ncmFkaWVudGNvbnRhaW5lclwiOjl9XSwxMzpbZnVuY3Rpb24oZSxuKXt2YXIgZj1mdW5jdGlvbigpe2Yub3B0aW9ucy5sb2dnaW5nJiZ3aW5kb3cuY29uc29sZSYmd2luZG93LmNvbnNvbGUubG9nJiZGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKHdpbmRvdy5jb25zb2xlLmxvZyx3aW5kb3cuY29uc29sZSkuYXBwbHkod2luZG93LmNvbnNvbGUsW0RhdGUubm93KCktZi5vcHRpb25zLnN0YXJ0K1wibXNcIixcImh0bWwyY2FudmFzOlwiXS5jb25jYXQoW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpKX07Zi5vcHRpb25zPXtsb2dnaW5nOiExfSxuLmV4cG9ydHM9Zn0se31dLDE0OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuKXt0aGlzLm5vZGU9ZSx0aGlzLnBhcmVudD1uLHRoaXMuc3RhY2s9bnVsbCx0aGlzLmJvdW5kcz1udWxsLHRoaXMuYm9yZGVycz1udWxsLHRoaXMuY2xpcD1bXSx0aGlzLmJhY2tncm91bmRDbGlwPVtdLHRoaXMub2Zmc2V0Qm91bmRzPW51bGwsdGhpcy52aXNpYmxlPW51bGwsdGhpcy5jb21wdXRlZFN0eWxlcz1udWxsLHRoaXMuY29sb3JzPXt9LHRoaXMuc3R5bGVzPXt9LHRoaXMuYmFja2dyb3VuZEltYWdlcz1udWxsLHRoaXMudHJhbnNmb3JtRGF0YT1udWxsLHRoaXMudHJhbnNmb3JtTWF0cml4PW51bGwsdGhpcy5pc1BzZXVkb0VsZW1lbnQ9ITEsdGhpcy5vcGFjaXR5PW51bGx9ZnVuY3Rpb24gbyhlKXt2YXIgbj1lLm9wdGlvbnNbZS5zZWxlY3RlZEluZGV4fHwwXTtyZXR1cm4gbj9uLnRleHR8fFwiXCI6XCJcIn1mdW5jdGlvbiBkKGUpe2lmKGUmJlwibWF0cml4XCI9PT1lWzFdKXJldHVybiBlWzJdLnNwbGl0KFwiLFwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlRmxvYXQoZS50cmltKCkpfSk7aWYoZSYmXCJtYXRyaXgzZFwiPT09ZVsxXSl7dmFyIG49ZVsyXS5zcGxpdChcIixcIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUZsb2F0KGUudHJpbSgpKX0pO3JldHVybltuWzBdLG5bMV0sbls0XSxuWzVdLG5bMTJdLG5bMTNdXX19ZnVuY3Rpb24gaShlKXtyZXR1cm4tMSE9PWUudG9TdHJpbmcoKS5pbmRleE9mKFwiJVwiKX1mdW5jdGlvbiB0KGUpe3JldHVybiBlLnJlcGxhY2UoXCJweFwiLFwiXCIpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIHBhcnNlRmxvYXQoZSl9dmFyIHM9ZShcIi4vY29sb3JcIiksdT1lKFwiLi91dGlsc1wiKSxhPXUuZ2V0Qm91bmRzLHA9dS5wYXJzZUJhY2tncm91bmRzLGM9dS5vZmZzZXRCb3VuZHM7Zi5wcm90b3R5cGUuY2xvbmVUbz1mdW5jdGlvbihlKXtlLnZpc2libGU9dGhpcy52aXNpYmxlLGUuYm9yZGVycz10aGlzLmJvcmRlcnMsZS5ib3VuZHM9dGhpcy5ib3VuZHMsZS5jbGlwPXRoaXMuY2xpcCxlLmJhY2tncm91bmRDbGlwPXRoaXMuYmFja2dyb3VuZENsaXAsZS5jb21wdXRlZFN0eWxlcz10aGlzLmNvbXB1dGVkU3R5bGVzLGUuc3R5bGVzPXRoaXMuc3R5bGVzLGUuYmFja2dyb3VuZEltYWdlcz10aGlzLmJhY2tncm91bmRJbWFnZXMsZS5vcGFjaXR5PXRoaXMub3BhY2l0eX0sZi5wcm90b3R5cGUuZ2V0T3BhY2l0eT1mdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5vcGFjaXR5P3RoaXMub3BhY2l0eT10aGlzLmNzc0Zsb2F0KFwib3BhY2l0eVwiKTp0aGlzLm9wYWNpdHl9LGYucHJvdG90eXBlLmFzc2lnblN0YWNrPWZ1bmN0aW9uKGUpe3RoaXMuc3RhY2s9ZSxlLmNoaWxkcmVuLnB1c2godGhpcyl9LGYucHJvdG90eXBlLmlzRWxlbWVudFZpc2libGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREU/dGhpcy5wYXJlbnQudmlzaWJsZTpcIm5vbmVcIiE9PXRoaXMuY3NzKFwiZGlzcGxheVwiKSYmXCJoaWRkZW5cIiE9PXRoaXMuY3NzKFwidmlzaWJpbGl0eVwiKSYmIXRoaXMubm9kZS5oYXNBdHRyaWJ1dGUoXCJkYXRhLWh0bWwyY2FudmFzLWlnbm9yZVwiKSYmKFwiSU5QVVRcIiE9PXRoaXMubm9kZS5ub2RlTmFtZXx8XCJoaWRkZW5cIiE9PXRoaXMubm9kZS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKX0sZi5wcm90b3R5cGUuY3NzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbXB1dGVkU3R5bGVzfHwodGhpcy5jb21wdXRlZFN0eWxlcz10aGlzLmlzUHNldWRvRWxlbWVudD90aGlzLnBhcmVudC5jb21wdXRlZFN0eWxlKHRoaXMuYmVmb3JlP1wiOmJlZm9yZVwiOlwiOmFmdGVyXCIpOnRoaXMuY29tcHV0ZWRTdHlsZShudWxsKSksdGhpcy5zdHlsZXNbZV18fCh0aGlzLnN0eWxlc1tlXT10aGlzLmNvbXB1dGVkU3R5bGVzW2VdKX0sZi5wcm90b3R5cGUucHJlZml4ZWRDc3M9ZnVuY3Rpb24oZSl7dmFyIG49W1wid2Via2l0XCIsXCJtb3pcIixcIm1zXCIsXCJvXCJdLGY9dGhpcy5jc3MoZSk7cmV0dXJuIHZvaWQgMD09PWYmJm4uc29tZShmdW5jdGlvbihuKXtyZXR1cm4gZj10aGlzLmNzcyhuK2Uuc3Vic3RyKDAsMSkudG9VcHBlckNhc2UoKStlLnN1YnN0cigxKSksdm9pZCAwIT09Zn0sdGhpcyksdm9pZCAwPT09Zj9udWxsOmZ9LGYucHJvdG90eXBlLmNvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUodGhpcy5ub2RlLGUpfSxmLnByb3RvdHlwZS5jc3NJbnQ9ZnVuY3Rpb24oZSl7dmFyIG49cGFyc2VJbnQodGhpcy5jc3MoZSksMTApO3JldHVybiBpc05hTihuKT8wOm59LGYucHJvdG90eXBlLmNvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbG9yc1tlXXx8KHRoaXMuY29sb3JzW2VdPW5ldyBzKHRoaXMuY3NzKGUpKSl9LGYucHJvdG90eXBlLmNzc0Zsb2F0PWZ1bmN0aW9uKGUpe3ZhciBuPXBhcnNlRmxvYXQodGhpcy5jc3MoZSkpO3JldHVybiBpc05hTihuKT8wOm59LGYucHJvdG90eXBlLmZvbnRXZWlnaHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNzcyhcImZvbnRXZWlnaHRcIik7c3dpdGNoKHBhcnNlSW50KGUsMTApKXtjYXNlIDQwMTplPVwiYm9sZFwiO2JyZWFrO2Nhc2UgNDAwOmU9XCJub3JtYWxcIn1yZXR1cm4gZX0sZi5wcm90b3R5cGUucGFyc2VDbGlwPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jc3MoXCJjbGlwXCIpLm1hdGNoKHRoaXMuQ0xJUCk7cmV0dXJuIGU/e3RvcDpwYXJzZUludChlWzFdLDEwKSxyaWdodDpwYXJzZUludChlWzJdLDEwKSxib3R0b206cGFyc2VJbnQoZVszXSwxMCksbGVmdDpwYXJzZUludChlWzRdLDEwKX06bnVsbH0sZi5wcm90b3R5cGUucGFyc2VCYWNrZ3JvdW5kSW1hZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmFja2dyb3VuZEltYWdlc3x8KHRoaXMuYmFja2dyb3VuZEltYWdlcz1wKHRoaXMuY3NzKFwiYmFja2dyb3VuZEltYWdlXCIpKSl9LGYucHJvdG90eXBlLmNzc0xpc3Q9ZnVuY3Rpb24oZSxuKXt2YXIgZj0odGhpcy5jc3MoZSl8fFwiXCIpLnNwbGl0KFwiLFwiKTtyZXR1cm4gZj1mW258fDBdfHxmWzBdfHxcImF1dG9cIixmPWYudHJpbSgpLnNwbGl0KFwiIFwiKSwxPT09Zi5sZW5ndGgmJihmPVtmWzBdLGkoZlswXSk/XCJhdXRvXCI6ZlswXV0pLGZ9LGYucHJvdG90eXBlLnBhcnNlQmFja2dyb3VuZFNpemU9ZnVuY3Rpb24oZSxuLGYpe3ZhciBvLGQsdD10aGlzLmNzc0xpc3QoXCJiYWNrZ3JvdW5kU2l6ZVwiLGYpO2lmKGkodFswXSkpbz1lLndpZHRoKnBhcnNlRmxvYXQodFswXSkvMTAwO2Vsc2V7aWYoL2NvbnRhaW58Y292ZXIvLnRlc3QodFswXSkpe3ZhciBsPWUud2lkdGgvZS5oZWlnaHQscz1uLndpZHRoL24uaGVpZ2h0O3JldHVybiBzPmxeXCJjb250YWluXCI9PT10WzBdP3t3aWR0aDplLmhlaWdodCpzLGhlaWdodDplLmhlaWdodH06e3dpZHRoOmUud2lkdGgsaGVpZ2h0OmUud2lkdGgvc319bz1wYXJzZUludCh0WzBdLDEwKX1yZXR1cm4gZD1cImF1dG9cIj09PXRbMF0mJlwiYXV0b1wiPT09dFsxXT9uLmhlaWdodDpcImF1dG9cIj09PXRbMV0/by9uLndpZHRoKm4uaGVpZ2h0OmkodFsxXSk/ZS5oZWlnaHQqcGFyc2VGbG9hdCh0WzFdKS8xMDA6cGFyc2VJbnQodFsxXSwxMCksXCJhdXRvXCI9PT10WzBdJiYobz1kL24uaGVpZ2h0Km4ud2lkdGgpLHt3aWR0aDpvLGhlaWdodDpkfX0sZi5wcm90b3R5cGUucGFyc2VCYWNrZ3JvdW5kUG9zaXRpb249ZnVuY3Rpb24oZSxuLGYsbyl7dmFyIGQsdCxsPXRoaXMuY3NzTGlzdChcImJhY2tncm91bmRQb3NpdGlvblwiLGYpO3JldHVybiBkPWkobFswXSk/KGUud2lkdGgtKG98fG4pLndpZHRoKSoocGFyc2VGbG9hdChsWzBdKS8xMDApOnBhcnNlSW50KGxbMF0sMTApLHQ9XCJhdXRvXCI9PT1sWzFdP2Qvbi53aWR0aCpuLmhlaWdodDppKGxbMV0pPyhlLmhlaWdodC0ob3x8bikuaGVpZ2h0KSpwYXJzZUZsb2F0KGxbMV0pLzEwMDpwYXJzZUludChsWzFdLDEwKSxcImF1dG9cIj09PWxbMF0mJihkPXQvbi5oZWlnaHQqbi53aWR0aCkse2xlZnQ6ZCx0b3A6dH19LGYucHJvdG90eXBlLnBhcnNlQmFja2dyb3VuZFJlcGVhdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jc3NMaXN0KFwiYmFja2dyb3VuZFJlcGVhdFwiLGUpWzBdfSxmLnByb3RvdHlwZS5wYXJzZVRleHRTaGFkb3dzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jc3MoXCJ0ZXh0U2hhZG93XCIpLG49W107aWYoZSYmXCJub25lXCIhPT1lKWZvcih2YXIgZj1lLm1hdGNoKHRoaXMuVEVYVF9TSEFET1dfUFJPUEVSVFkpLG89MDtmJiZvPGYubGVuZ3RoO28rKyl7dmFyIGQ9ZltvXS5tYXRjaCh0aGlzLlRFWFRfU0hBRE9XX1ZBTFVFUyk7bi5wdXNoKHtjb2xvcjpuZXcgcyhkWzBdKSxvZmZzZXRYOmRbMV0/cGFyc2VGbG9hdChkWzFdLnJlcGxhY2UoXCJweFwiLFwiXCIpKTowLG9mZnNldFk6ZFsyXT9wYXJzZUZsb2F0KGRbMl0ucmVwbGFjZShcInB4XCIsXCJcIikpOjAsYmx1cjpkWzNdP2RbM10ucmVwbGFjZShcInB4XCIsXCJcIik6MH0pfXJldHVybiBufSxmLnByb3RvdHlwZS5wYXJzZVRyYW5zZm9ybT1mdW5jdGlvbigpe2lmKCF0aGlzLnRyYW5zZm9ybURhdGEpaWYodGhpcy5oYXNUcmFuc2Zvcm0oKSl7dmFyIGU9dGhpcy5wYXJzZUJvdW5kcygpLG49dGhpcy5wcmVmaXhlZENzcyhcInRyYW5zZm9ybU9yaWdpblwiKS5zcGxpdChcIiBcIikubWFwKHQpLm1hcChsKTtuWzBdKz1lLmxlZnQsblsxXSs9ZS50b3AsdGhpcy50cmFuc2Zvcm1EYXRhPXtvcmlnaW46bixtYXRyaXg6dGhpcy5wYXJzZVRyYW5zZm9ybU1hdHJpeCgpfX1lbHNlIHRoaXMudHJhbnNmb3JtRGF0YT17b3JpZ2luOlswLDBdLG1hdHJpeDpbMSwwLDAsMSwwLDBdfTtyZXR1cm4gdGhpcy50cmFuc2Zvcm1EYXRhfSxmLnByb3RvdHlwZS5wYXJzZVRyYW5zZm9ybU1hdHJpeD1mdW5jdGlvbigpe2lmKCF0aGlzLnRyYW5zZm9ybU1hdHJpeCl7dmFyIGU9dGhpcy5wcmVmaXhlZENzcyhcInRyYW5zZm9ybVwiKSxuPWU/ZChlLm1hdGNoKHRoaXMuTUFUUklYX1BST1BFUlRZKSk6bnVsbDt0aGlzLnRyYW5zZm9ybU1hdHJpeD1uP246WzEsMCwwLDEsMCwwXX1yZXR1cm4gdGhpcy50cmFuc2Zvcm1NYXRyaXh9LGYucHJvdG90eXBlLnBhcnNlQm91bmRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm91bmRzfHwodGhpcy5ib3VuZHM9dGhpcy5oYXNUcmFuc2Zvcm0oKT9jKHRoaXMubm9kZSk6YSh0aGlzLm5vZGUpKX0sZi5wcm90b3R5cGUuaGFzVHJhbnNmb3JtPWZ1bmN0aW9uKCl7cmV0dXJuXCIxLDAsMCwxLDAsMFwiIT09dGhpcy5wYXJzZVRyYW5zZm9ybU1hdHJpeCgpLmpvaW4oXCIsXCIpfHx0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuaGFzVHJhbnNmb3JtKCl9LGYucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ub2RlLnZhbHVlfHxcIlwiO3JldHVyblwiU0VMRUNUXCI9PT10aGlzLm5vZGUudGFnTmFtZT9lPW8odGhpcy5ub2RlKTpcInBhc3N3b3JkXCI9PT10aGlzLm5vZGUudHlwZSYmKGU9QXJyYXkoZS5sZW5ndGgrMSkuam9pbihcIuKAolwiKSksMD09PWUubGVuZ3RoP3RoaXMubm9kZS5wbGFjZWhvbGRlcnx8XCJcIjplfSxmLnByb3RvdHlwZS5NQVRSSVhfUFJPUEVSVFk9LyhtYXRyaXh8bWF0cml4M2QpXFwoKC4rKVxcKS8sZi5wcm90b3R5cGUuVEVYVF9TSEFET1dfUFJPUEVSVFk9LygocmdiYXxyZ2IpXFwoW15cXCldK1xcKShcXHMtP1xcZCtweCl7MCx9KS9nLGYucHJvdG90eXBlLlRFWFRfU0hBRE9XX1ZBTFVFUz0vKC0/XFxkK3B4KXwoIy4rKXwocmdiXFwoLitcXCkpfChyZ2JhXFwoLitcXCkpL2csZi5wcm90b3R5cGUuQ0xJUD0vXnJlY3RcXCgoXFxkKylweCw/IChcXGQrKXB4LD8gKFxcZCspcHgsPyAoXFxkKylweFxcKSQvLG4uZXhwb3J0cz1mfSx7XCIuL2NvbG9yXCI6MyxcIi4vdXRpbHNcIjoyNn1dLDE1OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuLGYsbyxkKXtOKFwiU3RhcnRpbmcgTm9kZVBhcnNlclwiKSx0aGlzLnJlbmRlcmVyPW4sdGhpcy5vcHRpb25zPWQsdGhpcy5yYW5nZT1udWxsLHRoaXMuc3VwcG9ydD1mLHRoaXMucmVuZGVyUXVldWU9W10sdGhpcy5zdGFjaz1uZXcgVSghMCwxLGUub3duZXJEb2N1bWVudCxudWxsKTt2YXIgaT1uZXcgUChlLG51bGwpO2lmKGQuYmFja2dyb3VuZCYmbi5yZWN0YW5nbGUoMCwwLG4ud2lkdGgsbi5oZWlnaHQsbmV3IFQoZC5iYWNrZ3JvdW5kKSksZT09PWUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpe3ZhciB0PW5ldyBQKGkuY29sb3IoXCJiYWNrZ3JvdW5kQ29sb3JcIikuaXNUcmFuc3BhcmVudCgpP2Uub3duZXJEb2N1bWVudC5ib2R5OmUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsbnVsbCk7bi5yZWN0YW5nbGUoMCwwLG4ud2lkdGgsbi5oZWlnaHQsdC5jb2xvcihcImJhY2tncm91bmRDb2xvclwiKSl9aS52aXNpYmlsZT1pLmlzRWxlbWVudFZpc2libGUoKSx0aGlzLmNyZWF0ZVBzZXVkb0hpZGVTdHlsZXMoZS5vd25lckRvY3VtZW50KSx0aGlzLmRpc2FibGVBbmltYXRpb25zKGUub3duZXJEb2N1bWVudCksdGhpcy5ub2Rlcz1JKFtpXS5jb25jYXQodGhpcy5nZXRDaGlsZHJlbihpKSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnZpc2libGU9ZS5pc0VsZW1lbnRWaXNpYmxlKCl9KS5tYXAodGhpcy5nZXRQc2V1ZG9FbGVtZW50cyx0aGlzKSksdGhpcy5mb250TWV0cmljcz1uZXcgUyxOKFwiRmV0Y2hlZCBub2RlcywgdG90YWw6XCIsdGhpcy5ub2Rlcy5sZW5ndGgpLE4oXCJDYWxjdWxhdGUgb3ZlcmZsb3cgY2xpcHNcIiksdGhpcy5jYWxjdWxhdGVPdmVyZmxvd0NsaXBzKCksTihcIlN0YXJ0IGZldGNoaW5nIGltYWdlc1wiKSx0aGlzLmltYWdlcz1vLmZldGNoKHRoaXMubm9kZXMuZmlsdGVyKEEpKSx0aGlzLnJlYWR5PXRoaXMuaW1hZ2VzLnJlYWR5LnRoZW4oVyhmdW5jdGlvbigpe3JldHVybiBOKFwiSW1hZ2VzIGxvYWRlZCwgc3RhcnRpbmcgcGFyc2luZ1wiKSxOKFwiQ3JlYXRpbmcgc3RhY2tpbmcgY29udGV4dHNcIiksdGhpcy5jcmVhdGVTdGFja2luZ0NvbnRleHRzKCksTihcIlNvcnRpbmcgc3RhY2tpbmcgY29udGV4dHNcIiksdGhpcy5zb3J0U3RhY2tpbmdDb250ZXh0cyh0aGlzLnN0YWNrKSx0aGlzLnBhcnNlKHRoaXMuc3RhY2spLE4oXCJSZW5kZXIgcXVldWUgY3JlYXRlZCB3aXRoIFwiK3RoaXMucmVuZGVyUXVldWUubGVuZ3RoK1wiIGl0ZW1zXCIpLG5ldyBQcm9taXNlKFcoZnVuY3Rpb24oZSl7ZC5hc3luYz9cImZ1bmN0aW9uXCI9PXR5cGVvZiBkLmFzeW5jP2QuYXN5bmMuY2FsbCh0aGlzLHRoaXMucmVuZGVyUXVldWUsZSk6dGhpcy5yZW5kZXJRdWV1ZS5sZW5ndGg+MD8odGhpcy5yZW5kZXJJbmRleD0wLHRoaXMuYXN5bmNSZW5kZXJlcih0aGlzLnJlbmRlclF1ZXVlLGUpKTplKCk6KHRoaXMucmVuZGVyUXVldWUuZm9yRWFjaCh0aGlzLnBhaW50LHRoaXMpLGUoKSl9LHRoaXMpKX0sdGhpcykpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGUucGFyZW50JiZlLnBhcmVudC5jbGlwLmxlbmd0aH1mdW5jdGlvbiBkKGUpe3JldHVybiBlLnJlcGxhY2UoLyhcXC1bYS16XSkvZyxmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoXCItXCIsXCJcIil9KX1mdW5jdGlvbiBpKCl7fWZ1bmN0aW9uIHQoZSxuLGYsbyl7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGQsaSl7aWYoZC53aWR0aD4wKXt2YXIgdD1uLmxlZnQsbD1uLnRvcCxzPW4ud2lkdGgsdT1uLmhlaWdodC1lWzJdLndpZHRoO3N3aXRjaChpKXtjYXNlIDA6dT1lWzBdLndpZHRoLGQuYXJncz1hKHtjMTpbdCxsXSxjMjpbdCtzLGxdLGMzOlt0K3MtZVsxXS53aWR0aCxsK3VdLGM0Olt0K2VbM10ud2lkdGgsbCt1XX0sb1swXSxvWzFdLGYudG9wTGVmdE91dGVyLGYudG9wTGVmdElubmVyLGYudG9wUmlnaHRPdXRlcixmLnRvcFJpZ2h0SW5uZXIpO2JyZWFrO2Nhc2UgMTp0PW4ubGVmdCtuLndpZHRoLWVbMV0ud2lkdGgscz1lWzFdLndpZHRoLGQuYXJncz1hKHtjMTpbdCtzLGxdLGMyOlt0K3MsbCt1K2VbMl0ud2lkdGhdLGMzOlt0LGwrdV0sYzQ6W3QsbCtlWzBdLndpZHRoXX0sb1sxXSxvWzJdLGYudG9wUmlnaHRPdXRlcixmLnRvcFJpZ2h0SW5uZXIsZi5ib3R0b21SaWdodE91dGVyLGYuYm90dG9tUmlnaHRJbm5lcik7YnJlYWs7Y2FzZSAyOmw9bCtuLmhlaWdodC1lWzJdLndpZHRoLHU9ZVsyXS53aWR0aCxkLmFyZ3M9YSh7YzE6W3QrcyxsK3VdLGMyOlt0LGwrdV0sYzM6W3QrZVszXS53aWR0aCxsXSxjNDpbdCtzLWVbM10ud2lkdGgsbF19LG9bMl0sb1szXSxmLmJvdHRvbVJpZ2h0T3V0ZXIsZi5ib3R0b21SaWdodElubmVyLGYuYm90dG9tTGVmdE91dGVyLGYuYm90dG9tTGVmdElubmVyKTticmVhaztjYXNlIDM6cz1lWzNdLndpZHRoLGQuYXJncz1hKHtjMTpbdCxsK3UrZVsyXS53aWR0aF0sYzI6W3QsbF0sYzM6W3QrcyxsK2VbMF0ud2lkdGhdLGM0Olt0K3MsbCt1XX0sb1szXSxvWzBdLGYuYm90dG9tTGVmdE91dGVyLGYuYm90dG9tTGVmdElubmVyLGYudG9wTGVmdE91dGVyLGYudG9wTGVmdElubmVyKX19cmV0dXJuIGR9KX1mdW5jdGlvbiBsKGUsbixmLG8pe3ZhciBkPTQqKChNYXRoLnNxcnQoMiktMSkvMyksaT1mKmQsdD1vKmQsbD1lK2Yscz1uK287cmV0dXJue3RvcExlZnQ6dSh7eDplLHk6c30se3g6ZSx5OnMtdH0se3g6bC1pLHk6bn0se3g6bCx5Om59KSx0b3BSaWdodDp1KHt4OmUseTpufSx7eDplK2kseTpufSx7eDpsLHk6cy10fSx7eDpsLHk6c30pLGJvdHRvbVJpZ2h0OnUoe3g6bCx5Om59LHt4OmwseTpuK3R9LHt4OmUraSx5OnN9LHt4OmUseTpzfSksYm90dG9tTGVmdDp1KHt4OmwseTpzfSx7eDpsLWkseTpzfSx7eDplLHk6bit0fSx7eDplLHk6bn0pfX1mdW5jdGlvbiBzKGUsbixmKXt2YXIgbz1lLmxlZnQsZD1lLnRvcCxpPWUud2lkdGgsdD1lLmhlaWdodCxzPW5bMF1bMF08aS8yP25bMF1bMF06aS8yLHU9blswXVsxXTx0LzI/blswXVsxXTp0LzIsYT1uWzFdWzBdPGkvMj9uWzFdWzBdOmkvMixwPW5bMV1bMV08dC8yP25bMV1bMV06dC8yLGM9blsyXVswXTxpLzI/blsyXVswXTppLzIseT1uWzJdWzFdPHQvMj9uWzJdWzFdOnQvMixtPW5bM11bMF08aS8yP25bM11bMF06aS8yLHI9blszXVsxXTx0LzI/blszXVsxXTp0LzIsdj1pLWEsdz10LXksYj1pLWMsZz10LXI7cmV0dXJue3RvcExlZnRPdXRlcjpsKG8sZCxzLHUpLnRvcExlZnQuc3ViZGl2aWRlKC41KSx0b3BMZWZ0SW5uZXI6bChvK2ZbM10ud2lkdGgsZCtmWzBdLndpZHRoLE1hdGgubWF4KDAscy1mWzNdLndpZHRoKSxNYXRoLm1heCgwLHUtZlswXS53aWR0aCkpLnRvcExlZnQuc3ViZGl2aWRlKC41KSx0b3BSaWdodE91dGVyOmwobyt2LGQsYSxwKS50b3BSaWdodC5zdWJkaXZpZGUoLjUpLHRvcFJpZ2h0SW5uZXI6bChvK01hdGgubWluKHYsaStmWzNdLndpZHRoKSxkK2ZbMF0ud2lkdGgsdj5pK2ZbM10ud2lkdGg/MDphLWZbM10ud2lkdGgscC1mWzBdLndpZHRoKS50b3BSaWdodC5zdWJkaXZpZGUoLjUpLGJvdHRvbVJpZ2h0T3V0ZXI6bChvK2IsZCt3LGMseSkuYm90dG9tUmlnaHQuc3ViZGl2aWRlKC41KSxib3R0b21SaWdodElubmVyOmwobytNYXRoLm1pbihiLGktZlszXS53aWR0aCksZCtNYXRoLm1pbih3LHQrZlswXS53aWR0aCksTWF0aC5tYXgoMCxjLWZbMV0ud2lkdGgpLHktZlsyXS53aWR0aCkuYm90dG9tUmlnaHQuc3ViZGl2aWRlKC41KSxib3R0b21MZWZ0T3V0ZXI6bChvLGQrZyxtLHIpLmJvdHRvbUxlZnQuc3ViZGl2aWRlKC41KSxib3R0b21MZWZ0SW5uZXI6bChvK2ZbM10ud2lkdGgsZCtnLE1hdGgubWF4KDAsbS1mWzNdLndpZHRoKSxyLWZbMl0ud2lkdGgpLmJvdHRvbUxlZnQuc3ViZGl2aWRlKC41KX1cbn1mdW5jdGlvbiB1KGUsbixmLG8pe3ZhciBkPWZ1bmN0aW9uKGUsbixmKXtyZXR1cm57eDplLngrKG4ueC1lLngpKmYseTplLnkrKG4ueS1lLnkpKmZ9fTtyZXR1cm57c3RhcnQ6ZSxzdGFydENvbnRyb2w6bixlbmRDb250cm9sOmYsZW5kOm8sc3ViZGl2aWRlOmZ1bmN0aW9uKGkpe3ZhciB0PWQoZSxuLGkpLGw9ZChuLGYsaSkscz1kKGYsbyxpKSxhPWQodCxsLGkpLHA9ZChsLHMsaSksYz1kKGEscCxpKTtyZXR1cm5bdShlLHQsYSxjKSx1KGMscCxzLG8pXX0sY3VydmVUbzpmdW5jdGlvbihlKXtlLnB1c2goW1wiYmV6aWVyQ3VydmVcIixuLngsbi55LGYueCxmLnksby54LG8ueV0pfSxjdXJ2ZVRvUmV2ZXJzZWQ6ZnVuY3Rpb24obyl7by5wdXNoKFtcImJlemllckN1cnZlXCIsZi54LGYueSxuLngsbi55LGUueCxlLnldKX19fWZ1bmN0aW9uIGEoZSxuLGYsbyxkLGksdCl7dmFyIGw9W107cmV0dXJuIG5bMF0+MHx8blsxXT4wPyhsLnB1c2goW1wibGluZVwiLG9bMV0uc3RhcnQueCxvWzFdLnN0YXJ0LnldKSxvWzFdLmN1cnZlVG8obCkpOmwucHVzaChbXCJsaW5lXCIsZS5jMVswXSxlLmMxWzFdXSksZlswXT4wfHxmWzFdPjA/KGwucHVzaChbXCJsaW5lXCIsaVswXS5zdGFydC54LGlbMF0uc3RhcnQueV0pLGlbMF0uY3VydmVUbyhsKSxsLnB1c2goW1wibGluZVwiLHRbMF0uZW5kLngsdFswXS5lbmQueV0pLHRbMF0uY3VydmVUb1JldmVyc2VkKGwpKToobC5wdXNoKFtcImxpbmVcIixlLmMyWzBdLGUuYzJbMV1dKSxsLnB1c2goW1wibGluZVwiLGUuYzNbMF0sZS5jM1sxXV0pKSxuWzBdPjB8fG5bMV0+MD8obC5wdXNoKFtcImxpbmVcIixkWzFdLmVuZC54LGRbMV0uZW5kLnldKSxkWzFdLmN1cnZlVG9SZXZlcnNlZChsKSk6bC5wdXNoKFtcImxpbmVcIixlLmM0WzBdLGUuYzRbMV1dKSxsfWZ1bmN0aW9uIHAoZSxuLGYsbyxkLGksdCl7blswXT4wfHxuWzFdPjA/KGUucHVzaChbXCJsaW5lXCIsb1swXS5zdGFydC54LG9bMF0uc3RhcnQueV0pLG9bMF0uY3VydmVUbyhlKSxvWzFdLmN1cnZlVG8oZSkpOmUucHVzaChbXCJsaW5lXCIsaSx0XSksKGZbMF0+MHx8ZlsxXT4wKSYmZS5wdXNoKFtcImxpbmVcIixkWzBdLnN0YXJ0LngsZFswXS5zdGFydC55XSl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZS5jc3NJbnQoXCJ6SW5kZXhcIik8MH1mdW5jdGlvbiB5KGUpe3JldHVybiBlLmNzc0ludChcInpJbmRleFwiKT4wfWZ1bmN0aW9uIG0oZSl7cmV0dXJuIDA9PT1lLmNzc0ludChcInpJbmRleFwiKX1mdW5jdGlvbiByKGUpe3JldHVybi0xIT09W1wiaW5saW5lXCIsXCJpbmxpbmUtYmxvY2tcIixcImlubGluZS10YWJsZVwiXS5pbmRleE9mKGUuY3NzKFwiZGlzcGxheVwiKSl9ZnVuY3Rpb24gdihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIFV9ZnVuY3Rpb24gdyhlKXtyZXR1cm4gZS5ub2RlLmRhdGEudHJpbSgpLmxlbmd0aD4wfWZ1bmN0aW9uIGIoZSl7cmV0dXJuL14obm9ybWFsfG5vbmV8MHB4KSQvLnRlc3QoZS5wYXJlbnQuY3NzKFwibGV0dGVyU3BhY2luZ1wiKSl9ZnVuY3Rpb24gZyhlKXtyZXR1cm5bXCJUb3BMZWZ0XCIsXCJUb3BSaWdodFwiLFwiQm90dG9tUmlnaHRcIixcIkJvdHRvbUxlZnRcIl0ubWFwKGZ1bmN0aW9uKG4pe3ZhciBmPWUuY3NzKFwiYm9yZGVyXCIrbitcIlJhZGl1c1wiKSxvPWYuc3BsaXQoXCIgXCIpO3JldHVybiBvLmxlbmd0aDw9MSYmKG9bMV09b1swXSksby5tYXAoRil9KX1mdW5jdGlvbiBoKGUpe3JldHVybiBlLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREV8fGUubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERX1mdW5jdGlvbiB4KGUpe3ZhciBuPWUuY3NzKFwicG9zaXRpb25cIiksZj0tMSE9PVtcImFic29sdXRlXCIsXCJyZWxhdGl2ZVwiLFwiZml4ZWRcIl0uaW5kZXhPZihuKT9lLmNzcyhcInpJbmRleFwiKTpcImF1dG9cIjtyZXR1cm5cImF1dG9cIiE9PWZ9ZnVuY3Rpb24gaihlKXtyZXR1cm5cInN0YXRpY1wiIT09ZS5jc3MoXCJwb3NpdGlvblwiKX1mdW5jdGlvbiBrKGUpe3JldHVyblwibm9uZVwiIT09ZS5jc3MoXCJmbG9hdFwiKX1mdW5jdGlvbiBxKGUpe3JldHVybi0xIT09W1wiaW5saW5lLWJsb2NrXCIsXCJpbmxpbmUtdGFibGVcIl0uaW5kZXhPZihlLmNzcyhcImRpc3BsYXlcIikpfWZ1bmN0aW9uIHooZSl7dmFyIG49dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hZS5hcHBseShuLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIEEoZSl7cmV0dXJuIGUubm9kZS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFfWZ1bmN0aW9uIEIoZSl7cmV0dXJuIGUuaXNQc2V1ZG9FbGVtZW50PT09ITB9ZnVuY3Rpb24gQyhlKXtyZXR1cm4gZS5ub2RlLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREV9ZnVuY3Rpb24gRChlKXtyZXR1cm4gZnVuY3Rpb24obixmKXtyZXR1cm4gbi5jc3NJbnQoXCJ6SW5kZXhcIikrZS5pbmRleE9mKG4pL2UubGVuZ3RoLShmLmNzc0ludChcInpJbmRleFwiKStlLmluZGV4T2YoZikvZS5sZW5ndGgpfX1mdW5jdGlvbiBFKGUpe3JldHVybiBlLmdldE9wYWNpdHkoKTwxfWZ1bmN0aW9uIEYoZSl7cmV0dXJuIHBhcnNlSW50KGUsMTApfWZ1bmN0aW9uIEcoZSl7cmV0dXJuIGUud2lkdGh9ZnVuY3Rpb24gSChlKXtyZXR1cm4gZS5ub2RlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fC0xPT09W1wiU0NSSVBUXCIsXCJIRUFEXCIsXCJUSVRMRVwiLFwiT0JKRUNUXCIsXCJCUlwiLFwiT1BUSU9OXCJdLmluZGV4T2YoZS5ub2RlLm5vZGVOYW1lKX1mdW5jdGlvbiBJKGUpe3JldHVybltdLmNvbmNhdC5hcHBseShbXSxlKX1mdW5jdGlvbiBKKGUpe3ZhciBuPWUuc3Vic3RyKDAsMSk7cmV0dXJuIG49PT1lLnN1YnN0cihlLmxlbmd0aC0xKSYmbi5tYXRjaCgvJ3xcIi8pP2Uuc3Vic3RyKDEsZS5sZW5ndGgtMik6ZX1mdW5jdGlvbiBLKGUpe2Zvcih2YXIgbixmPVtdLG89MCxkPSExO2UubGVuZ3RoOylMKGVbb10pPT09ZD8obj1lLnNwbGljZSgwLG8pLG4ubGVuZ3RoJiZmLnB1c2goTy51Y3MyLmVuY29kZShuKSksZD0hZCxvPTApOm8rKyxvPj1lLmxlbmd0aCYmKG49ZS5zcGxpY2UoMCxvKSxuLmxlbmd0aCYmZi5wdXNoKE8udWNzMi5lbmNvZGUobikpKTtyZXR1cm4gZn1mdW5jdGlvbiBMKGUpe3JldHVybi0xIT09WzMyLDEzLDEwLDksNDVdLmluZGV4T2YoZSl9ZnVuY3Rpb24gTShlKXtyZXR1cm4vW15cXHUwMDAwLVxcdTAwZmZdLy50ZXN0KGUpfXZhciBOPWUoXCIuL2xvZ1wiKSxPPWUoXCJwdW55Y29kZVwiKSxQPWUoXCIuL25vZGVjb250YWluZXJcIiksUT1lKFwiLi90ZXh0Y29udGFpbmVyXCIpLFI9ZShcIi4vcHNldWRvZWxlbWVudGNvbnRhaW5lclwiKSxTPWUoXCIuL2ZvbnRtZXRyaWNzXCIpLFQ9ZShcIi4vY29sb3JcIiksVT1lKFwiLi9zdGFja2luZ2NvbnRleHRcIiksVj1lKFwiLi91dGlsc1wiKSxXPVYuYmluZCxYPVYuZ2V0Qm91bmRzLFk9Vi5wYXJzZUJhY2tncm91bmRzLFo9Vi5vZmZzZXRCb3VuZHM7Zi5wcm90b3R5cGUuY2FsY3VsYXRlT3ZlcmZsb3dDbGlwcz1mdW5jdGlvbigpe3RoaXMubm9kZXMuZm9yRWFjaChmdW5jdGlvbihlKXtpZihBKGUpKXtCKGUpJiZlLmFwcGVuZFRvRE9NKCksZS5ib3JkZXJzPXRoaXMucGFyc2VCb3JkZXJzKGUpO3ZhciBuPVwiaGlkZGVuXCI9PT1lLmNzcyhcIm92ZXJmbG93XCIpP1tlLmJvcmRlcnMuY2xpcF06W10sZj1lLnBhcnNlQ2xpcCgpO2YmJi0xIT09W1wiYWJzb2x1dGVcIixcImZpeGVkXCJdLmluZGV4T2YoZS5jc3MoXCJwb3NpdGlvblwiKSkmJm4ucHVzaChbW1wicmVjdFwiLGUuYm91bmRzLmxlZnQrZi5sZWZ0LGUuYm91bmRzLnRvcCtmLnRvcCxmLnJpZ2h0LWYubGVmdCxmLmJvdHRvbS1mLnRvcF1dKSxlLmNsaXA9byhlKT9lLnBhcmVudC5jbGlwLmNvbmNhdChuKTpuLGUuYmFja2dyb3VuZENsaXA9XCJoaWRkZW5cIiE9PWUuY3NzKFwib3ZlcmZsb3dcIik/ZS5jbGlwLmNvbmNhdChbZS5ib3JkZXJzLmNsaXBdKTplLmNsaXAsQihlKSYmZS5jbGVhbkRPTSgpfWVsc2UgQyhlKSYmKGUuY2xpcD1vKGUpP2UucGFyZW50LmNsaXA6W10pO0IoZSl8fChlLmJvdW5kcz1udWxsKX0sdGhpcyl9LGYucHJvdG90eXBlLmFzeW5jUmVuZGVyZXI9ZnVuY3Rpb24oZSxuLGYpe2Y9Znx8RGF0ZS5ub3coKSx0aGlzLnBhaW50KGVbdGhpcy5yZW5kZXJJbmRleCsrXSksZS5sZW5ndGg9PT10aGlzLnJlbmRlckluZGV4P24oKTpmKzIwPkRhdGUubm93KCk/dGhpcy5hc3luY1JlbmRlcmVyKGUsbixmKTpzZXRUaW1lb3V0KFcoZnVuY3Rpb24oKXt0aGlzLmFzeW5jUmVuZGVyZXIoZSxuKX0sdGhpcyksMCl9LGYucHJvdG90eXBlLmNyZWF0ZVBzZXVkb0hpZGVTdHlsZXM9ZnVuY3Rpb24oZSl7dGhpcy5jcmVhdGVTdHlsZXMoZSxcIi5cIitSLnByb3RvdHlwZS5QU0VVRE9fSElERV9FTEVNRU5UX0NMQVNTX0JFRk9SRSsnOmJlZm9yZSB7IGNvbnRlbnQ6IFwiXCIgIWltcG9ydGFudDsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9LicrUi5wcm90b3R5cGUuUFNFVURPX0hJREVfRUxFTUVOVF9DTEFTU19BRlRFUisnOmFmdGVyIHsgY29udGVudDogXCJcIiAhaW1wb3J0YW50OyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nKX0sZi5wcm90b3R5cGUuZGlzYWJsZUFuaW1hdGlvbnM9ZnVuY3Rpb24oZSl7dGhpcy5jcmVhdGVTdHlsZXMoZSxcIiogeyAtd2Via2l0LWFuaW1hdGlvbjogbm9uZSAhaW1wb3J0YW50OyAtbW96LWFuaW1hdGlvbjogbm9uZSAhaW1wb3J0YW50OyAtby1hbmltYXRpb246IG5vbmUgIWltcG9ydGFudDsgYW5pbWF0aW9uOiBub25lICFpbXBvcnRhbnQ7IC13ZWJraXQtdHJhbnNpdGlvbjogbm9uZSAhaW1wb3J0YW50OyAtbW96LXRyYW5zaXRpb246IG5vbmUgIWltcG9ydGFudDsgLW8tdHJhbnNpdGlvbjogbm9uZSAhaW1wb3J0YW50OyB0cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7fVwiKX0sZi5wcm90b3R5cGUuY3JlYXRlU3R5bGVzPWZ1bmN0aW9uKGUsbil7dmFyIGY9ZS5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7Zi5pbm5lckhUTUw9bixlLmJvZHkuYXBwZW5kQ2hpbGQoZil9LGYucHJvdG90eXBlLmdldFBzZXVkb0VsZW1lbnRzPWZ1bmN0aW9uKGUpe3ZhciBuPVtbZV1dO2lmKGUubm9kZS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgZj10aGlzLmdldFBzZXVkb0VsZW1lbnQoZSxcIjpiZWZvcmVcIiksbz10aGlzLmdldFBzZXVkb0VsZW1lbnQoZSxcIjphZnRlclwiKTtmJiZuLnB1c2goZiksbyYmbi5wdXNoKG8pfXJldHVybiBJKG4pfSxmLnByb3RvdHlwZS5nZXRQc2V1ZG9FbGVtZW50PWZ1bmN0aW9uKGUsbil7dmFyIGY9ZS5jb21wdXRlZFN0eWxlKG4pO2lmKCFmfHwhZi5jb250ZW50fHxcIm5vbmVcIj09PWYuY29udGVudHx8XCItbW96LWFsdC1jb250ZW50XCI9PT1mLmNvbnRlbnR8fFwibm9uZVwiPT09Zi5kaXNwbGF5KXJldHVybiBudWxsO2Zvcih2YXIgbz1KKGYuY29udGVudCksaT1cInVybFwiPT09by5zdWJzdHIoMCwzKSx0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaT9cImltZ1wiOlwiaHRtbDJjYW52YXNwc2V1ZG9lbGVtZW50XCIpLGw9bmV3IFIodCxlLG4pLHM9Zi5sZW5ndGgtMTtzPj0wO3MtLSl7dmFyIHU9ZChmLml0ZW0ocykpO3Quc3R5bGVbdV09Zlt1XX1pZih0LmNsYXNzTmFtZT1SLnByb3RvdHlwZS5QU0VVRE9fSElERV9FTEVNRU5UX0NMQVNTX0JFRk9SRStcIiBcIitSLnByb3RvdHlwZS5QU0VVRE9fSElERV9FTEVNRU5UX0NMQVNTX0FGVEVSLGkpcmV0dXJuIHQuc3JjPVkobylbMF0uYXJnc1swXSxbbF07dmFyIGE9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobyk7cmV0dXJuIHQuYXBwZW5kQ2hpbGQoYSksW2wsbmV3IFEoYSxsKV19LGYucHJvdG90eXBlLmdldENoaWxkcmVuPWZ1bmN0aW9uKGUpe3JldHVybiBJKFtdLmZpbHRlci5jYWxsKGUubm9kZS5jaGlsZE5vZGVzLGgpLm1hcChmdW5jdGlvbihuKXt2YXIgZj1bbi5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFP25ldyBRKG4sZSk6bmV3IFAobixlKV0uZmlsdGVyKEgpO3JldHVybiBuLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUmJmYubGVuZ3RoJiZcIlRFWFRBUkVBXCIhPT1uLnRhZ05hbWU/ZlswXS5pc0VsZW1lbnRWaXNpYmxlKCk/Zi5jb25jYXQodGhpcy5nZXRDaGlsZHJlbihmWzBdKSk6W106Zn0sdGhpcykpfSxmLnByb3RvdHlwZS5uZXdTdGFja2luZ0NvbnRleHQ9ZnVuY3Rpb24oZSxuKXt2YXIgZj1uZXcgVShuLGUuZ2V0T3BhY2l0eSgpLGUubm9kZSxlLnBhcmVudCk7ZS5jbG9uZVRvKGYpO3ZhciBvPW4/Zi5nZXRQYXJlbnRTdGFjayh0aGlzKTpmLnBhcmVudC5zdGFjaztvLmNvbnRleHRzLnB1c2goZiksZS5zdGFjaz1mfSxmLnByb3RvdHlwZS5jcmVhdGVTdGFja2luZ0NvbnRleHRzPWZ1bmN0aW9uKCl7dGhpcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe0EoZSkmJih0aGlzLmlzUm9vdEVsZW1lbnQoZSl8fEUoZSl8fHgoZSl8fHRoaXMuaXNCb2R5V2l0aFRyYW5zcGFyZW50Um9vdChlKXx8ZS5oYXNUcmFuc2Zvcm0oKSk/dGhpcy5uZXdTdGFja2luZ0NvbnRleHQoZSwhMCk6QShlKSYmKGooZSkmJm0oZSl8fHEoZSl8fGsoZSkpP3RoaXMubmV3U3RhY2tpbmdDb250ZXh0KGUsITEpOmUuYXNzaWduU3RhY2soZS5wYXJlbnQuc3RhY2spfSx0aGlzKX0sZi5wcm90b3R5cGUuaXNCb2R5V2l0aFRyYW5zcGFyZW50Um9vdD1mdW5jdGlvbihlKXtyZXR1cm5cIkJPRFlcIj09PWUubm9kZS5ub2RlTmFtZSYmZS5wYXJlbnQuY29sb3IoXCJiYWNrZ3JvdW5kQ29sb3JcIikuaXNUcmFuc3BhcmVudCgpfSxmLnByb3RvdHlwZS5pc1Jvb3RFbGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZS5wYXJlbnR9LGYucHJvdG90eXBlLnNvcnRTdGFja2luZ0NvbnRleHRzPWZ1bmN0aW9uKGUpe2UuY29udGV4dHMuc29ydChEKGUuY29udGV4dHMuc2xpY2UoMCkpKSxlLmNvbnRleHRzLmZvckVhY2godGhpcy5zb3J0U3RhY2tpbmdDb250ZXh0cyx0aGlzKX0sZi5wcm90b3R5cGUucGFyc2VUZXh0Qm91bmRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihuLGYsbyl7aWYoXCJub25lXCIhPT1lLnBhcmVudC5jc3MoXCJ0ZXh0RGVjb3JhdGlvblwiKS5zdWJzdHIoMCw0KXx8MCE9PW4udHJpbSgpLmxlbmd0aCl7aWYodGhpcy5zdXBwb3J0LnJhbmdlQm91bmRzJiYhZS5wYXJlbnQuaGFzVHJhbnNmb3JtKCkpe3ZhciBkPW8uc2xpY2UoMCxmKS5qb2luKFwiXCIpLmxlbmd0aDtyZXR1cm4gdGhpcy5nZXRSYW5nZUJvdW5kcyhlLm5vZGUsZCxuLmxlbmd0aCl9aWYoZS5ub2RlJiZcInN0cmluZ1wiPT10eXBlb2YgZS5ub2RlLmRhdGEpe3ZhciBpPWUubm9kZS5zcGxpdFRleHQobi5sZW5ndGgpLHQ9dGhpcy5nZXRXcmFwcGVyQm91bmRzKGUubm9kZSxlLnBhcmVudC5oYXNUcmFuc2Zvcm0oKSk7cmV0dXJuIGUubm9kZT1pLHR9fWVsc2UoIXRoaXMuc3VwcG9ydC5yYW5nZUJvdW5kc3x8ZS5wYXJlbnQuaGFzVHJhbnNmb3JtKCkpJiYoZS5ub2RlPWUubm9kZS5zcGxpdFRleHQobi5sZW5ndGgpKTtyZXR1cm57fX19LGYucHJvdG90eXBlLmdldFdyYXBwZXJCb3VuZHM9ZnVuY3Rpb24oZSxuKXt2YXIgZj1lLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImh0bWwyY2FudmFzd3JhcHBlclwiKSxvPWUucGFyZW50Tm9kZSxkPWUuY2xvbmVOb2RlKCEwKTtmLmFwcGVuZENoaWxkKGUuY2xvbmVOb2RlKCEwKSksby5yZXBsYWNlQ2hpbGQoZixlKTt2YXIgaT1uP1ooZik6WChmKTtyZXR1cm4gby5yZXBsYWNlQ2hpbGQoZCxmKSxpfSxmLnByb3RvdHlwZS5nZXRSYW5nZUJvdW5kcz1mdW5jdGlvbihlLG4sZil7dmFyIG89dGhpcy5yYW5nZXx8KHRoaXMucmFuZ2U9ZS5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCkpO3JldHVybiBvLnNldFN0YXJ0KGUsbiksby5zZXRFbmQoZSxuK2YpLG8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9LGYucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGUpe3ZhciBuPWUuY29udGV4dHMuZmlsdGVyKGMpLGY9ZS5jaGlsZHJlbi5maWx0ZXIoQSksbz1mLmZpbHRlcih6KGspKSxkPW8uZmlsdGVyKHooaikpLmZpbHRlcih6KHIpKSx0PWYuZmlsdGVyKHooaikpLmZpbHRlcihrKSxsPW8uZmlsdGVyKHooaikpLmZpbHRlcihyKSxzPWUuY29udGV4dHMuY29uY2F0KG8uZmlsdGVyKGopKS5maWx0ZXIobSksdT1lLmNoaWxkcmVuLmZpbHRlcihDKS5maWx0ZXIodyksYT1lLmNvbnRleHRzLmZpbHRlcih5KTtuLmNvbmNhdChkKS5jb25jYXQodCkuY29uY2F0KGwpLmNvbmNhdChzKS5jb25jYXQodSkuY29uY2F0KGEpLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5yZW5kZXJRdWV1ZS5wdXNoKGUpLHYoZSkmJih0aGlzLnBhcnNlKGUpLHRoaXMucmVuZGVyUXVldWUucHVzaChuZXcgaSkpfSx0aGlzKX0sZi5wcm90b3R5cGUucGFpbnQ9ZnVuY3Rpb24oZSl7dHJ5e2UgaW5zdGFuY2VvZiBpP3RoaXMucmVuZGVyZXIuY3R4LnJlc3RvcmUoKTpDKGUpPyhCKGUucGFyZW50KSYmZS5wYXJlbnQuYXBwZW5kVG9ET00oKSx0aGlzLnBhaW50VGV4dChlKSxCKGUucGFyZW50KSYmZS5wYXJlbnQuY2xlYW5ET00oKSk6dGhpcy5wYWludE5vZGUoZSl9Y2F0Y2gobil7aWYoTihuKSx0aGlzLm9wdGlvbnMuc3RyaWN0KXRocm93IG59fSxmLnByb3RvdHlwZS5wYWludE5vZGU9ZnVuY3Rpb24oZSl7dihlKSYmKHRoaXMucmVuZGVyZXIuc2V0T3BhY2l0eShlLm9wYWNpdHkpLHRoaXMucmVuZGVyZXIuY3R4LnNhdmUoKSxlLmhhc1RyYW5zZm9ybSgpJiZ0aGlzLnJlbmRlcmVyLnNldFRyYW5zZm9ybShlLnBhcnNlVHJhbnNmb3JtKCkpKSxcIklOUFVUXCI9PT1lLm5vZGUubm9kZU5hbWUmJlwiY2hlY2tib3hcIj09PWUubm9kZS50eXBlP3RoaXMucGFpbnRDaGVja2JveChlKTpcIklOUFVUXCI9PT1lLm5vZGUubm9kZU5hbWUmJlwicmFkaW9cIj09PWUubm9kZS50eXBlP3RoaXMucGFpbnRSYWRpbyhlKTp0aGlzLnBhaW50RWxlbWVudChlKX0sZi5wcm90b3R5cGUucGFpbnRFbGVtZW50PWZ1bmN0aW9uKGUpe3ZhciBuPWUucGFyc2VCb3VuZHMoKTt0aGlzLnJlbmRlcmVyLmNsaXAoZS5iYWNrZ3JvdW5kQ2xpcCxmdW5jdGlvbigpe3RoaXMucmVuZGVyZXIucmVuZGVyQmFja2dyb3VuZChlLG4sZS5ib3JkZXJzLmJvcmRlcnMubWFwKEcpKX0sdGhpcyksdGhpcy5yZW5kZXJlci5jbGlwKGUuY2xpcCxmdW5jdGlvbigpe3RoaXMucmVuZGVyZXIucmVuZGVyQm9yZGVycyhlLmJvcmRlcnMuYm9yZGVycyl9LHRoaXMpLHRoaXMucmVuZGVyZXIuY2xpcChlLmJhY2tncm91bmRDbGlwLGZ1bmN0aW9uKCl7c3dpdGNoKGUubm9kZS5ub2RlTmFtZSl7Y2FzZVwic3ZnXCI6Y2FzZVwiSUZSQU1FXCI6dmFyIGY9dGhpcy5pbWFnZXMuZ2V0KGUubm9kZSk7Zj90aGlzLnJlbmRlcmVyLnJlbmRlckltYWdlKGUsbixlLmJvcmRlcnMsZik6TihcIkVycm9yIGxvYWRpbmcgPFwiK2Uubm9kZS5ub2RlTmFtZStcIj5cIixlLm5vZGUpO2JyZWFrO2Nhc2VcIklNR1wiOnZhciBvPXRoaXMuaW1hZ2VzLmdldChlLm5vZGUuc3JjKTtvP3RoaXMucmVuZGVyZXIucmVuZGVySW1hZ2UoZSxuLGUuYm9yZGVycyxvKTpOKFwiRXJyb3IgbG9hZGluZyA8aW1nPlwiLGUubm9kZS5zcmMpO2JyZWFrO2Nhc2VcIkNBTlZBU1wiOnRoaXMucmVuZGVyZXIucmVuZGVySW1hZ2UoZSxuLGUuYm9yZGVycyx7aW1hZ2U6ZS5ub2RlfSk7YnJlYWs7Y2FzZVwiU0VMRUNUXCI6Y2FzZVwiSU5QVVRcIjpjYXNlXCJURVhUQVJFQVwiOnRoaXMucGFpbnRGb3JtVmFsdWUoZSl9fSx0aGlzKX0sZi5wcm90b3R5cGUucGFpbnRDaGVja2JveD1mdW5jdGlvbihlKXt2YXIgbj1lLnBhcnNlQm91bmRzKCksZj1NYXRoLm1pbihuLndpZHRoLG4uaGVpZ2h0KSxvPXt3aWR0aDpmLTEsaGVpZ2h0OmYtMSx0b3A6bi50b3AsbGVmdDpuLmxlZnR9LGQ9WzMsM10saT1bZCxkLGQsZF0sbD1bMSwxLDEsMV0ubWFwKGZ1bmN0aW9uKGUpe3JldHVybntjb2xvcjpuZXcgVChcIiNBNUE1QTVcIiksd2lkdGg6ZX19KSx1PXMobyxpLGwpO3RoaXMucmVuZGVyZXIuY2xpcChlLmJhY2tncm91bmRDbGlwLGZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJlci5yZWN0YW5nbGUoby5sZWZ0KzEsby50b3ArMSxvLndpZHRoLTIsby5oZWlnaHQtMixuZXcgVChcIiNERURFREVcIikpLHRoaXMucmVuZGVyZXIucmVuZGVyQm9yZGVycyh0KGwsbyx1LGkpKSxlLm5vZGUuY2hlY2tlZCYmKHRoaXMucmVuZGVyZXIuZm9udChuZXcgVChcIiM0MjQyNDJcIiksXCJub3JtYWxcIixcIm5vcm1hbFwiLFwiYm9sZFwiLGYtMytcInB4XCIsXCJhcmlhbFwiKSx0aGlzLnJlbmRlcmVyLnRleHQoXCLinJRcIixvLmxlZnQrZi82LG8udG9wK2YtMSkpfSx0aGlzKX0sZi5wcm90b3R5cGUucGFpbnRSYWRpbz1mdW5jdGlvbihlKXt2YXIgbj1lLnBhcnNlQm91bmRzKCksZj1NYXRoLm1pbihuLndpZHRoLG4uaGVpZ2h0KS0yO3RoaXMucmVuZGVyZXIuY2xpcChlLmJhY2tncm91bmRDbGlwLGZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJlci5jaXJjbGVTdHJva2Uobi5sZWZ0KzEsbi50b3ArMSxmLG5ldyBUKFwiI0RFREVERVwiKSwxLG5ldyBUKFwiI0E1QTVBNVwiKSksZS5ub2RlLmNoZWNrZWQmJnRoaXMucmVuZGVyZXIuY2lyY2xlKE1hdGguY2VpbChuLmxlZnQrZi80KSsxLE1hdGguY2VpbChuLnRvcCtmLzQpKzEsTWF0aC5mbG9vcihmLzIpLG5ldyBUKFwiIzQyNDI0MlwiKSl9LHRoaXMpfSxmLnByb3RvdHlwZS5wYWludEZvcm1WYWx1ZT1mdW5jdGlvbihlKXt2YXIgbj1lLmdldFZhbHVlKCk7aWYobi5sZW5ndGg+MCl7dmFyIGY9ZS5ub2RlLm93bmVyRG9jdW1lbnQsbz1mLmNyZWF0ZUVsZW1lbnQoXCJodG1sMmNhbnZhc3dyYXBwZXJcIiksZD1bXCJsaW5lSGVpZ2h0XCIsXCJ0ZXh0QWxpZ25cIixcImZvbnRGYW1pbHlcIixcImZvbnRXZWlnaHRcIixcImZvbnRTaXplXCIsXCJjb2xvclwiLFwicGFkZGluZ0xlZnRcIixcInBhZGRpbmdUb3BcIixcInBhZGRpbmdSaWdodFwiLFwicGFkZGluZ0JvdHRvbVwiLFwid2lkdGhcIixcImhlaWdodFwiLFwiYm9yZGVyTGVmdFN0eWxlXCIsXCJib3JkZXJUb3BTdHlsZVwiLFwiYm9yZGVyTGVmdFdpZHRoXCIsXCJib3JkZXJUb3BXaWR0aFwiLFwiYm94U2l6aW5nXCIsXCJ3aGl0ZVNwYWNlXCIsXCJ3b3JkV3JhcFwiXTtkLmZvckVhY2goZnVuY3Rpb24obil7dHJ5e28uc3R5bGVbbl09ZS5jc3Mobil9Y2F0Y2goZil7TihcImh0bWwyY2FudmFzOiBQYXJzZTogRXhjZXB0aW9uIGNhdWdodCBpbiByZW5kZXJGb3JtVmFsdWU6IFwiK2YubWVzc2FnZSl9fSk7dmFyIGk9ZS5wYXJzZUJvdW5kcygpO28uc3R5bGUucG9zaXRpb249XCJmaXhlZFwiLG8uc3R5bGUubGVmdD1pLmxlZnQrXCJweFwiLG8uc3R5bGUudG9wPWkudG9wK1wicHhcIixvLnRleHRDb250ZW50PW4sZi5ib2R5LmFwcGVuZENoaWxkKG8pLHRoaXMucGFpbnRUZXh0KG5ldyBRKG8uZmlyc3RDaGlsZCxlKSksZi5ib2R5LnJlbW92ZUNoaWxkKG8pfX0sZi5wcm90b3R5cGUucGFpbnRUZXh0PWZ1bmN0aW9uKGUpe2UuYXBwbHlUZXh0VHJhbnNmb3JtKCk7dmFyIG49Ty51Y3MyLmRlY29kZShlLm5vZGUuZGF0YSksZj10aGlzLm9wdGlvbnMubGV0dGVyUmVuZGVyaW5nJiYhYihlKXx8TShlLm5vZGUuZGF0YSk/bi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIE8udWNzMi5lbmNvZGUoW2VdKX0pOksobiksbz1lLnBhcmVudC5mb250V2VpZ2h0KCksZD1lLnBhcmVudC5jc3MoXCJmb250U2l6ZVwiKSxpPWUucGFyZW50LmNzcyhcImZvbnRGYW1pbHlcIiksdD1lLnBhcmVudC5wYXJzZVRleHRTaGFkb3dzKCk7dGhpcy5yZW5kZXJlci5mb250KGUucGFyZW50LmNvbG9yKFwiY29sb3JcIiksZS5wYXJlbnQuY3NzKFwiZm9udFN0eWxlXCIpLGUucGFyZW50LmNzcyhcImZvbnRWYXJpYW50XCIpLG8sZCxpKSx0Lmxlbmd0aD90aGlzLnJlbmRlcmVyLmZvbnRTaGFkb3codFswXS5jb2xvcix0WzBdLm9mZnNldFgsdFswXS5vZmZzZXRZLHRbMF0uYmx1cik6dGhpcy5yZW5kZXJlci5jbGVhclNoYWRvdygpLHRoaXMucmVuZGVyZXIuY2xpcChlLnBhcmVudC5jbGlwLGZ1bmN0aW9uKCl7Zi5tYXAodGhpcy5wYXJzZVRleHRCb3VuZHMoZSksdGhpcykuZm9yRWFjaChmdW5jdGlvbihuLG8pe24mJih0aGlzLnJlbmRlcmVyLnRleHQoZltvXSxuLmxlZnQsbi5ib3R0b20pLHRoaXMucmVuZGVyVGV4dERlY29yYXRpb24oZS5wYXJlbnQsbix0aGlzLmZvbnRNZXRyaWNzLmdldE1ldHJpY3MoaSxkKSkpfSx0aGlzKX0sdGhpcyl9LGYucHJvdG90eXBlLnJlbmRlclRleHREZWNvcmF0aW9uPWZ1bmN0aW9uKGUsbixmKXtzd2l0Y2goZS5jc3MoXCJ0ZXh0RGVjb3JhdGlvblwiKS5zcGxpdChcIiBcIilbMF0pe2Nhc2VcInVuZGVybGluZVwiOnRoaXMucmVuZGVyZXIucmVjdGFuZ2xlKG4ubGVmdCxNYXRoLnJvdW5kKG4udG9wK2YuYmFzZWxpbmUrZi5saW5lV2lkdGgpLG4ud2lkdGgsMSxlLmNvbG9yKFwiY29sb3JcIikpO2JyZWFrO2Nhc2VcIm92ZXJsaW5lXCI6dGhpcy5yZW5kZXJlci5yZWN0YW5nbGUobi5sZWZ0LE1hdGgucm91bmQobi50b3ApLG4ud2lkdGgsMSxlLmNvbG9yKFwiY29sb3JcIikpO2JyZWFrO2Nhc2VcImxpbmUtdGhyb3VnaFwiOnRoaXMucmVuZGVyZXIucmVjdGFuZ2xlKG4ubGVmdCxNYXRoLmNlaWwobi50b3ArZi5taWRkbGUrZi5saW5lV2lkdGgpLG4ud2lkdGgsMSxlLmNvbG9yKFwiY29sb3JcIikpfX07dmFyICQ9e2luc2V0OltbXCJkYXJrZW5cIiwuNl0sW1wiZGFya2VuXCIsLjFdLFtcImRhcmtlblwiLC4xXSxbXCJkYXJrZW5cIiwuNl1dfTtmLnByb3RvdHlwZS5wYXJzZUJvcmRlcnM9ZnVuY3Rpb24oZSl7dmFyIG49ZS5wYXJzZUJvdW5kcygpLGY9ZyhlKSxvPVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXS5tYXAoZnVuY3Rpb24obixmKXt2YXIgbz1lLmNzcyhcImJvcmRlclwiK24rXCJTdHlsZVwiKSxkPWUuY29sb3IoXCJib3JkZXJcIituK1wiQ29sb3JcIik7XCJpbnNldFwiPT09byYmZC5pc0JsYWNrKCkmJihkPW5ldyBUKFsyNTUsMjU1LDI1NSxkLmFdKSk7dmFyIGk9JFtvXT8kW29dW2ZdOm51bGw7cmV0dXJue3dpZHRoOmUuY3NzSW50KFwiYm9yZGVyXCIrbitcIldpZHRoXCIpLGNvbG9yOmk/ZFtpWzBdXShpWzFdKTpkLGFyZ3M6bnVsbH19KSxkPXMobixmLG8pO3JldHVybntjbGlwOnRoaXMucGFyc2VCYWNrZ3JvdW5kQ2xpcChlLGQsbyxmLG4pLGJvcmRlcnM6dChvLG4sZCxmKX19LGYucHJvdG90eXBlLnBhcnNlQmFja2dyb3VuZENsaXA9ZnVuY3Rpb24oZSxuLGYsbyxkKXt2YXIgaT1lLmNzcyhcImJhY2tncm91bmRDbGlwXCIpLHQ9W107c3dpdGNoKGkpe2Nhc2VcImNvbnRlbnQtYm94XCI6Y2FzZVwicGFkZGluZy1ib3hcIjpwKHQsb1swXSxvWzFdLG4udG9wTGVmdElubmVyLG4udG9wUmlnaHRJbm5lcixkLmxlZnQrZlszXS53aWR0aCxkLnRvcCtmWzBdLndpZHRoKSxwKHQsb1sxXSxvWzJdLG4udG9wUmlnaHRJbm5lcixuLmJvdHRvbVJpZ2h0SW5uZXIsZC5sZWZ0K2Qud2lkdGgtZlsxXS53aWR0aCxkLnRvcCtmWzBdLndpZHRoKSxwKHQsb1syXSxvWzNdLG4uYm90dG9tUmlnaHRJbm5lcixuLmJvdHRvbUxlZnRJbm5lcixkLmxlZnQrZC53aWR0aC1mWzFdLndpZHRoLGQudG9wK2QuaGVpZ2h0LWZbMl0ud2lkdGgpLHAodCxvWzNdLG9bMF0sbi5ib3R0b21MZWZ0SW5uZXIsbi50b3BMZWZ0SW5uZXIsZC5sZWZ0K2ZbM10ud2lkdGgsZC50b3ArZC5oZWlnaHQtZlsyXS53aWR0aCk7YnJlYWs7ZGVmYXVsdDpwKHQsb1swXSxvWzFdLG4udG9wTGVmdE91dGVyLG4udG9wUmlnaHRPdXRlcixkLmxlZnQsZC50b3ApLHAodCxvWzFdLG9bMl0sbi50b3BSaWdodE91dGVyLG4uYm90dG9tUmlnaHRPdXRlcixkLmxlZnQrZC53aWR0aCxkLnRvcCkscCh0LG9bMl0sb1szXSxuLmJvdHRvbVJpZ2h0T3V0ZXIsbi5ib3R0b21MZWZ0T3V0ZXIsZC5sZWZ0K2Qud2lkdGgsZC50b3ArZC5oZWlnaHQpLHAodCxvWzNdLG9bMF0sbi5ib3R0b21MZWZ0T3V0ZXIsbi50b3BMZWZ0T3V0ZXIsZC5sZWZ0LGQudG9wK2QuaGVpZ2h0KX1yZXR1cm4gdH0sbi5leHBvcnRzPWZ9LHtcIi4vY29sb3JcIjozLFwiLi9mb250bWV0cmljc1wiOjcsXCIuL2xvZ1wiOjEzLFwiLi9ub2RlY29udGFpbmVyXCI6MTQsXCIuL3BzZXVkb2VsZW1lbnRjb250YWluZXJcIjoxOCxcIi4vc3RhY2tpbmdjb250ZXh0XCI6MjEsXCIuL3RleHRjb250YWluZXJcIjoyNSxcIi4vdXRpbHNcIjoyNixwdW55Y29kZToxfV0sMTY6W2Z1bmN0aW9uKGUsbixmKXtmdW5jdGlvbiBvKGUsbixmKXt2YXIgbz1cIndpdGhDcmVkZW50aWFsc1wiaW4gbmV3IFhNTEh0dHBSZXF1ZXN0O2lmKCFuKXJldHVybiBQcm9taXNlLnJlamVjdChcIk5vIHByb3h5IGNvbmZpZ3VyZWRcIik7dmFyIGQ9dChvKSxzPWwobixlLGQpO3JldHVybiBvP2Eocyk6aShmLHMsZCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbShlLmNvbnRlbnQpfSl9ZnVuY3Rpb24gZChlLG4sZil7dmFyIG89XCJjcm9zc09yaWdpblwiaW4gbmV3IEltYWdlLGQ9dChvKSxzPWwobixlLGQpO3JldHVybiBvP1Byb21pc2UucmVzb2x2ZShzKTppKGYscyxkKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVyblwiZGF0YTpcIitlLnR5cGUrXCI7YmFzZTY0LFwiK2UuY29udGVudH0pfWZ1bmN0aW9uIGkoZSxuLGYpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihvLGQpe3ZhciBpPWUuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSx0PWZ1bmN0aW9uKCl7ZGVsZXRlIHdpbmRvdy5odG1sMmNhbnZhcy5wcm94eVtmXSxlLmJvZHkucmVtb3ZlQ2hpbGQoaSl9O3dpbmRvdy5odG1sMmNhbnZhcy5wcm94eVtmXT1mdW5jdGlvbihlKXt0KCksbyhlKX0saS5zcmM9bixpLm9uZXJyb3I9ZnVuY3Rpb24oZSl7dCgpLGQoZSl9LGUuYm9keS5hcHBlbmRDaGlsZChpKX0pfWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGU/XCJcIjpcImh0bWwyY2FudmFzX1wiK0RhdGUubm93KCkrXCJfXCIrICsrcitcIl9cIitNYXRoLnJvdW5kKDFlNSpNYXRoLnJhbmRvbSgpKX1mdW5jdGlvbiBsKGUsbixmKXtyZXR1cm4gZStcIj91cmw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KG4pKyhmLmxlbmd0aD9cIiZjYWxsYmFjaz1odG1sMmNhbnZhcy5wcm94eS5cIitmOlwiXCIpfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBmLG89bmV3IERPTVBhcnNlcjt0cnl7Zj1vLnBhcnNlRnJvbVN0cmluZyhuLFwidGV4dC9odG1sXCIpfWNhdGNoKGQpe2MoXCJET01QYXJzZXIgbm90IHN1cHBvcnRlZCwgZmFsbGluZyBiYWNrIHRvIGNyZWF0ZUhUTUxEb2N1bWVudFwiKSxmPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKTt0cnl7Zi5vcGVuKCksZi53cml0ZShuKSxmLmNsb3NlKCl9Y2F0Y2goaSl7YyhcImNyZWF0ZUhUTUxEb2N1bWVudCB3cml0ZSBub3Qgc3VwcG9ydGVkLCBmYWxsaW5nIGJhY2sgdG8gZG9jdW1lbnQuYm9keS5pbm5lckhUTUxcIiksZi5ib2R5LmlubmVySFRNTD1ufX12YXIgdD1mLnF1ZXJ5U2VsZWN0b3IoXCJiYXNlXCIpO2lmKCF0fHwhdC5ocmVmLmhvc3Qpe3ZhciBsPWYuY3JlYXRlRWxlbWVudChcImJhc2VcIik7bC5ocmVmPWUsZi5oZWFkLmluc2VydEJlZm9yZShsLGYuaGVhZC5maXJzdENoaWxkKX1yZXR1cm4gZn19ZnVuY3Rpb24gdShlLG4sZixkLGksdCl7cmV0dXJuIG5ldyBvKGUsbix3aW5kb3cuZG9jdW1lbnQpLnRoZW4ocyhlKSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4geShlLGYsZCxpLHQsMCwwKX0pfXZhciBhPWUoXCIuL3hoclwiKSxwPWUoXCIuL3V0aWxzXCIpLGM9ZShcIi4vbG9nXCIpLHk9ZShcIi4vY2xvbmVcIiksbT1wLmRlY29kZTY0LHI9MDtmLlByb3h5PW8sZi5Qcm94eVVSTD1kLGYubG9hZFVybERvY3VtZW50PXV9LHtcIi4vY2xvbmVcIjoyLFwiLi9sb2dcIjoxMyxcIi4vdXRpbHNcIjoyNixcIi4veGhyXCI6Mjh9XSwxNzpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUsbil7dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7Zi5ocmVmPWUsZT1mLmhyZWYsdGhpcy5zcmM9ZSx0aGlzLmltYWdlPW5ldyBJbWFnZTt2YXIgZD10aGlzO3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihmLGkpe2QuaW1hZ2UuY3Jvc3NPcmlnaW49XCJBbm9ueW1vdXNcIixkLmltYWdlLm9ubG9hZD1mLGQuaW1hZ2Uub25lcnJvcj1pLG5ldyBvKGUsbixkb2N1bWVudCkudGhlbihmdW5jdGlvbihlKXtkLmltYWdlLnNyYz1lfSlbXCJjYXRjaFwiXShpKX0pfXZhciBvPWUoXCIuL3Byb3h5XCIpLlByb3h5VVJMO24uZXhwb3J0cz1mfSx7XCIuL3Byb3h5XCI6MTZ9XSwxODpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUsbixmKXtvLmNhbGwodGhpcyxlLG4pLHRoaXMuaXNQc2V1ZG9FbGVtZW50PSEwLHRoaXMuYmVmb3JlPVwiOmJlZm9yZVwiPT09Zn12YXIgbz1lKFwiLi9ub2RlY29udGFpbmVyXCIpO2YucHJvdG90eXBlLmNsb25lVG89ZnVuY3Rpb24oZSl7Zi5wcm90b3R5cGUuY2xvbmVUby5jYWxsKHRoaXMsZSksZS5pc1BzZXVkb0VsZW1lbnQ9ITAsZS5iZWZvcmU9dGhpcy5iZWZvcmV9LGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLGYucHJvdG90eXBlLmFwcGVuZFRvRE9NPWZ1bmN0aW9uKCl7dGhpcy5iZWZvcmU/dGhpcy5wYXJlbnQubm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLHRoaXMucGFyZW50Lm5vZGUuZmlyc3RDaGlsZCk6dGhpcy5wYXJlbnQubm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpLHRoaXMucGFyZW50Lm5vZGUuY2xhc3NOYW1lKz1cIiBcIit0aGlzLmdldEhpZGVDbGFzcygpfSxmLnByb3RvdHlwZS5jbGVhbkRPTT1mdW5jdGlvbigpe3RoaXMubm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMubm9kZSksdGhpcy5wYXJlbnQubm9kZS5jbGFzc05hbWU9dGhpcy5wYXJlbnQubm9kZS5jbGFzc05hbWUucmVwbGFjZSh0aGlzLmdldEhpZGVDbGFzcygpLFwiXCIpfSxmLnByb3RvdHlwZS5nZXRIaWRlQ2xhc3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tcIlBTRVVET19ISURFX0VMRU1FTlRfQ0xBU1NfXCIrKHRoaXMuYmVmb3JlP1wiQkVGT1JFXCI6XCJBRlRFUlwiKV19LGYucHJvdG90eXBlLlBTRVVET19ISURFX0VMRU1FTlRfQ0xBU1NfQkVGT1JFPVwiX19faHRtbDJjYW52YXNfX19wc2V1ZG9lbGVtZW50X2JlZm9yZVwiLGYucHJvdG90eXBlLlBTRVVET19ISURFX0VMRU1FTlRfQ0xBU1NfQUZURVI9XCJfX19odG1sMmNhbnZhc19fX3BzZXVkb2VsZW1lbnRfYWZ0ZXJcIixuLmV4cG9ydHM9Zn0se1wiLi9ub2RlY29udGFpbmVyXCI6MTR9XSwxOTpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUsbixmLG8sZCl7dGhpcy53aWR0aD1lLHRoaXMuaGVpZ2h0PW4sdGhpcy5pbWFnZXM9Zix0aGlzLm9wdGlvbnM9byx0aGlzLmRvY3VtZW50PWR9dmFyIG89ZShcIi4vbG9nXCIpO2YucHJvdG90eXBlLnJlbmRlckltYWdlPWZ1bmN0aW9uKGUsbixmLG8pe3ZhciBkPWUuY3NzSW50KFwicGFkZGluZ0xlZnRcIiksaT1lLmNzc0ludChcInBhZGRpbmdUb3BcIiksdD1lLmNzc0ludChcInBhZGRpbmdSaWdodFwiKSxsPWUuY3NzSW50KFwicGFkZGluZ0JvdHRvbVwiKSxzPWYuYm9yZGVycyx1PW4ud2lkdGgtKHNbMV0ud2lkdGgrc1szXS53aWR0aCtkK3QpLGE9bi5oZWlnaHQtKHNbMF0ud2lkdGgrc1syXS53aWR0aCtpK2wpO3RoaXMuZHJhd0ltYWdlKG8sMCwwLG8uaW1hZ2Uud2lkdGh8fHUsby5pbWFnZS5oZWlnaHR8fGEsbi5sZWZ0K2Qrc1szXS53aWR0aCxuLnRvcCtpK3NbMF0ud2lkdGgsdSxhKX0sZi5wcm90b3R5cGUucmVuZGVyQmFja2dyb3VuZD1mdW5jdGlvbihlLG4sZil7bi5oZWlnaHQ+MCYmbi53aWR0aD4wJiYodGhpcy5yZW5kZXJCYWNrZ3JvdW5kQ29sb3IoZSxuKSx0aGlzLnJlbmRlckJhY2tncm91bmRJbWFnZShlLG4sZikpfSxmLnByb3RvdHlwZS5yZW5kZXJCYWNrZ3JvdW5kQ29sb3I9ZnVuY3Rpb24oZSxuKXt2YXIgZj1lLmNvbG9yKFwiYmFja2dyb3VuZENvbG9yXCIpO2YuaXNUcmFuc3BhcmVudCgpfHx0aGlzLnJlY3RhbmdsZShuLmxlZnQsbi50b3Asbi53aWR0aCxuLmhlaWdodCxmKX0sZi5wcm90b3R5cGUucmVuZGVyQm9yZGVycz1mdW5jdGlvbihlKXtlLmZvckVhY2godGhpcy5yZW5kZXJCb3JkZXIsdGhpcyl9LGYucHJvdG90eXBlLnJlbmRlckJvcmRlcj1mdW5jdGlvbihlKXtlLmNvbG9yLmlzVHJhbnNwYXJlbnQoKXx8bnVsbD09PWUuYXJnc3x8dGhpcy5kcmF3U2hhcGUoZS5hcmdzLGUuY29sb3IpfSxmLnByb3RvdHlwZS5yZW5kZXJCYWNrZ3JvdW5kSW1hZ2U9ZnVuY3Rpb24oZSxuLGYpe3ZhciBkPWUucGFyc2VCYWNrZ3JvdW5kSW1hZ2VzKCk7ZC5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbihkLGksdCl7c3dpdGNoKGQubWV0aG9kKXtjYXNlXCJ1cmxcIjp2YXIgbD10aGlzLmltYWdlcy5nZXQoZC5hcmdzWzBdKTtsP3RoaXMucmVuZGVyQmFja2dyb3VuZFJlcGVhdGluZyhlLG4sbCx0Lmxlbmd0aC0oaSsxKSxmKTpvKFwiRXJyb3IgbG9hZGluZyBiYWNrZ3JvdW5kLWltYWdlXCIsZC5hcmdzWzBdKTticmVhaztjYXNlXCJsaW5lYXItZ3JhZGllbnRcIjpjYXNlXCJncmFkaWVudFwiOnZhciBzPXRoaXMuaW1hZ2VzLmdldChkLnZhbHVlKTtzP3RoaXMucmVuZGVyQmFja2dyb3VuZEdyYWRpZW50KHMsbixmKTpvKFwiRXJyb3IgbG9hZGluZyBiYWNrZ3JvdW5kLWltYWdlXCIsZC5hcmdzWzBdKTticmVhaztjYXNlXCJub25lXCI6YnJlYWs7ZGVmYXVsdDpvKFwiVW5rbm93biBiYWNrZ3JvdW5kLWltYWdlIHR5cGVcIixkLmFyZ3NbMF0pfX0sdGhpcyl9LGYucHJvdG90eXBlLnJlbmRlckJhY2tncm91bmRSZXBlYXRpbmc9ZnVuY3Rpb24oZSxuLGYsbyxkKXt2YXIgaT1lLnBhcnNlQmFja2dyb3VuZFNpemUobixmLmltYWdlLG8pLHQ9ZS5wYXJzZUJhY2tncm91bmRQb3NpdGlvbihuLGYuaW1hZ2UsbyxpKSxsPWUucGFyc2VCYWNrZ3JvdW5kUmVwZWF0KG8pO3N3aXRjaChsKXtjYXNlXCJyZXBlYXQteFwiOmNhc2VcInJlcGVhdCBuby1yZXBlYXRcIjp0aGlzLmJhY2tncm91bmRSZXBlYXRTaGFwZShmLHQsaSxuLG4ubGVmdCtkWzNdLG4udG9wK3QudG9wK2RbMF0sOTk5OTksaS5oZWlnaHQsZCk7YnJlYWs7Y2FzZVwicmVwZWF0LXlcIjpjYXNlXCJuby1yZXBlYXQgcmVwZWF0XCI6dGhpcy5iYWNrZ3JvdW5kUmVwZWF0U2hhcGUoZix0LGksbixuLmxlZnQrdC5sZWZ0K2RbM10sbi50b3ArZFswXSxpLndpZHRoLDk5OTk5LGQpO2JyZWFrO2Nhc2VcIm5vLXJlcGVhdFwiOnRoaXMuYmFja2dyb3VuZFJlcGVhdFNoYXBlKGYsdCxpLG4sbi5sZWZ0K3QubGVmdCtkWzNdLG4udG9wK3QudG9wK2RbMF0saS53aWR0aCxpLmhlaWdodCxkKTticmVhaztkZWZhdWx0OnRoaXMucmVuZGVyQmFja2dyb3VuZFJlcGVhdChmLHQsaSx7dG9wOm4udG9wLGxlZnQ6bi5sZWZ0fSxkWzNdLGRbMF0pfX0sbi5leHBvcnRzPWZ9LHtcIi4vbG9nXCI6MTN9XSwyMDpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUsbil7ZC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5jYW52YXM9dGhpcy5vcHRpb25zLmNhbnZhc3x8dGhpcy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHRoaXMub3B0aW9ucy5jYW52YXN8fCh0aGlzLmNhbnZhcy53aWR0aD1lLHRoaXMuY2FudmFzLmhlaWdodD1uKSx0aGlzLmN0eD10aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksdGhpcy50YWludEN0eD10aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIpLHRoaXMuY3R4LnRleHRCYXNlbGluZT1cImJvdHRvbVwiLHRoaXMudmFyaWFibGVzPXt9LHQoXCJJbml0aWFsaXplZCBDYW52YXNSZW5kZXJlciB3aXRoIHNpemVcIixlLFwieFwiLG4pfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGUubGVuZ3RoPjB9dmFyIGQ9ZShcIi4uL3JlbmRlcmVyXCIpLGk9ZShcIi4uL2xpbmVhcmdyYWRpZW50Y29udGFpbmVyXCIpLHQ9ZShcIi4uL2xvZ1wiKTtmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQucHJvdG90eXBlKSxmLnByb3RvdHlwZS5zZXRGaWxsU3R5bGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3R4LmZpbGxTdHlsZT1cIm9iamVjdFwiPT10eXBlb2YgZSYmZS5pc0NvbG9yP2UudG9TdHJpbmcoKTplLHRoaXMuY3R4fSxmLnByb3RvdHlwZS5yZWN0YW5nbGU9ZnVuY3Rpb24oZSxuLGYsbyxkKXt0aGlzLnNldEZpbGxTdHlsZShkKS5maWxsUmVjdChlLG4sZixvKX0sZi5wcm90b3R5cGUuY2lyY2xlPWZ1bmN0aW9uKGUsbixmLG8pe3RoaXMuc2V0RmlsbFN0eWxlKG8pLHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4LmFyYyhlK2YvMixuK2YvMixmLzIsMCwyKk1hdGguUEksITApLHRoaXMuY3R4LmNsb3NlUGF0aCgpLHRoaXMuY3R4LmZpbGwoKX0sZi5wcm90b3R5cGUuY2lyY2xlU3Ryb2tlPWZ1bmN0aW9uKGUsbixmLG8sZCxpKXt0aGlzLmNpcmNsZShlLG4sZixvKSx0aGlzLmN0eC5zdHJva2VTdHlsZT1pLnRvU3RyaW5nKCksdGhpcy5jdHguc3Ryb2tlKCl9LGYucHJvdG90eXBlLmRyYXdTaGFwZT1mdW5jdGlvbihlLG4pe3RoaXMuc2hhcGUoZSksdGhpcy5zZXRGaWxsU3R5bGUobikuZmlsbCgpfSxmLnByb3RvdHlwZS50YWludHM9ZnVuY3Rpb24oZSl7aWYobnVsbD09PWUudGFpbnRlZCl7dGhpcy50YWludEN0eC5kcmF3SW1hZ2UoZS5pbWFnZSwwLDApO3RyeXt0aGlzLnRhaW50Q3R4LmdldEltYWdlRGF0YSgwLDAsMSwxKSxlLnRhaW50ZWQ9ITF9Y2F0Y2gobil7dGhpcy50YWludEN0eD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHQoXCIyZFwiKSxlLnRhaW50ZWQ9ITB9fXJldHVybiBlLnRhaW50ZWR9LGYucHJvdG90eXBlLmRyYXdJbWFnZT1mdW5jdGlvbihlLG4sZixvLGQsaSx0LGwscyl7KCF0aGlzLnRhaW50cyhlKXx8dGhpcy5vcHRpb25zLmFsbG93VGFpbnQpJiZ0aGlzLmN0eC5kcmF3SW1hZ2UoZS5pbWFnZSxuLGYsbyxkLGksdCxsLHMpfSxmLnByb3RvdHlwZS5jbGlwPWZ1bmN0aW9uKGUsbixmKXt0aGlzLmN0eC5zYXZlKCksZS5maWx0ZXIobykuZm9yRWFjaChmdW5jdGlvbihlKXt0aGlzLnNoYXBlKGUpLmNsaXAoKX0sdGhpcyksbi5jYWxsKGYpLHRoaXMuY3R4LnJlc3RvcmUoKX0sZi5wcm90b3R5cGUuc2hhcGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3R4LmJlZ2luUGF0aCgpLGUuZm9yRWFjaChmdW5jdGlvbihlLG4pe1wicmVjdFwiPT09ZVswXT90aGlzLmN0eC5yZWN0LmFwcGx5KHRoaXMuY3R4LGUuc2xpY2UoMSkpOnRoaXMuY3R4WzA9PT1uP1wibW92ZVRvXCI6ZVswXStcIlRvXCJdLmFwcGx5KHRoaXMuY3R4LGUuc2xpY2UoMSkpfSx0aGlzKSx0aGlzLmN0eC5jbG9zZVBhdGgoKSx0aGlzLmN0eH0sZi5wcm90b3R5cGUuZm9udD1mdW5jdGlvbihlLG4sZixvLGQsaSl7dGhpcy5zZXRGaWxsU3R5bGUoZSkuZm9udD1bbixmLG8sZCxpXS5qb2luKFwiIFwiKS5zcGxpdChcIixcIilbMF19LGYucHJvdG90eXBlLmZvbnRTaGFkb3c9ZnVuY3Rpb24oZSxuLGYsbyl7dGhpcy5zZXRWYXJpYWJsZShcInNoYWRvd0NvbG9yXCIsZS50b1N0cmluZygpKS5zZXRWYXJpYWJsZShcInNoYWRvd09mZnNldFlcIixuKS5zZXRWYXJpYWJsZShcInNoYWRvd09mZnNldFhcIixmKS5zZXRWYXJpYWJsZShcInNoYWRvd0JsdXJcIixvKX0sZi5wcm90b3R5cGUuY2xlYXJTaGFkb3c9ZnVuY3Rpb24oKXt0aGlzLnNldFZhcmlhYmxlKFwic2hhZG93Q29sb3JcIixcInJnYmEoMCwwLDAsMClcIil9LGYucHJvdG90eXBlLnNldE9wYWNpdHk9ZnVuY3Rpb24oZSl7dGhpcy5jdHguZ2xvYmFsQWxwaGE9ZX0sZi5wcm90b3R5cGUuc2V0VHJhbnNmb3JtPWZ1bmN0aW9uKGUpe3RoaXMuY3R4LnRyYW5zbGF0ZShlLm9yaWdpblswXSxlLm9yaWdpblsxXSksdGhpcy5jdHgudHJhbnNmb3JtLmFwcGx5KHRoaXMuY3R4LGUubWF0cml4KSx0aGlzLmN0eC50cmFuc2xhdGUoLWUub3JpZ2luWzBdLC1lLm9yaWdpblsxXSl9LGYucHJvdG90eXBlLnNldFZhcmlhYmxlPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHRoaXMudmFyaWFibGVzW2VdIT09biYmKHRoaXMudmFyaWFibGVzW2VdPXRoaXMuY3R4W2VdPW4pLHRoaXN9LGYucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24oZSxuLGYpe3RoaXMuY3R4LmZpbGxUZXh0KGUsbixmKX0sZi5wcm90b3R5cGUuYmFja2dyb3VuZFJlcGVhdFNoYXBlPWZ1bmN0aW9uKGUsbixmLG8sZCxpLHQsbCxzKXt2YXIgdT1bW1wibGluZVwiLE1hdGgucm91bmQoZCksTWF0aC5yb3VuZChpKV0sW1wibGluZVwiLE1hdGgucm91bmQoZCt0KSxNYXRoLnJvdW5kKGkpXSxbXCJsaW5lXCIsTWF0aC5yb3VuZChkK3QpLE1hdGgucm91bmQobCtpKV0sW1wibGluZVwiLE1hdGgucm91bmQoZCksTWF0aC5yb3VuZChsK2kpXV07dGhpcy5jbGlwKFt1XSxmdW5jdGlvbigpe3RoaXMucmVuZGVyQmFja2dyb3VuZFJlcGVhdChlLG4sZixvLHNbM10sc1swXSl9LHRoaXMpfSxmLnByb3RvdHlwZS5yZW5kZXJCYWNrZ3JvdW5kUmVwZWF0PWZ1bmN0aW9uKGUsbixmLG8sZCxpKXt2YXIgdD1NYXRoLnJvdW5kKG8ubGVmdCtuLmxlZnQrZCksbD1NYXRoLnJvdW5kKG8udG9wK24udG9wK2kpO3RoaXMuc2V0RmlsbFN0eWxlKHRoaXMuY3R4LmNyZWF0ZVBhdHRlcm4odGhpcy5yZXNpemVJbWFnZShlLGYpLFwicmVwZWF0XCIpKSx0aGlzLmN0eC50cmFuc2xhdGUodCxsKSx0aGlzLmN0eC5maWxsKCksdGhpcy5jdHgudHJhbnNsYXRlKC10LC1sKX0sZi5wcm90b3R5cGUucmVuZGVyQmFja2dyb3VuZEdyYWRpZW50PWZ1bmN0aW9uKGUsbil7aWYoZSBpbnN0YW5jZW9mIGkpe3ZhciBmPXRoaXMuY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KG4ubGVmdCtuLndpZHRoKmUueDAsbi50b3Arbi5oZWlnaHQqZS55MCxuLmxlZnQrbi53aWR0aCplLngxLG4udG9wK24uaGVpZ2h0KmUueTEpO2UuY29sb3JTdG9wcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2YuYWRkQ29sb3JTdG9wKGUuc3RvcCxlLmNvbG9yLnRvU3RyaW5nKCkpfSksdGhpcy5yZWN0YW5nbGUobi5sZWZ0LG4udG9wLG4ud2lkdGgsbi5oZWlnaHQsZil9fSxmLnByb3RvdHlwZS5yZXNpemVJbWFnZT1mdW5jdGlvbihlLG4pe3ZhciBmPWUuaW1hZ2U7aWYoZi53aWR0aD09PW4ud2lkdGgmJmYuaGVpZ2h0PT09bi5oZWlnaHQpcmV0dXJuIGY7dmFyIG8sZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3JldHVybiBkLndpZHRoPW4ud2lkdGgsZC5oZWlnaHQ9bi5oZWlnaHQsbz1kLmdldENvbnRleHQoXCIyZFwiKSxvLmRyYXdJbWFnZShmLDAsMCxmLndpZHRoLGYuaGVpZ2h0LDAsMCxuLndpZHRoLG4uaGVpZ2h0KSxkfSxuLmV4cG9ydHM9Zn0se1wiLi4vbGluZWFyZ3JhZGllbnRjb250YWluZXJcIjoxMixcIi4uL2xvZ1wiOjEzLFwiLi4vcmVuZGVyZXJcIjoxOX1dLDIxOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuLGYsZCl7by5jYWxsKHRoaXMsZixkKSx0aGlzLm93blN0YWNraW5nPWUsdGhpcy5jb250ZXh0cz1bXSx0aGlzLmNoaWxkcmVuPVtdLHRoaXMub3BhY2l0eT0odGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuc3RhY2sub3BhY2l0eToxKSpufXZhciBvPWUoXCIuL25vZGVjb250YWluZXJcIik7Zi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSksZi5wcm90b3R5cGUuZ2V0UGFyZW50U3RhY2s9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuc3RhY2s6bnVsbDtyZXR1cm4gbj9uLm93blN0YWNraW5nP246bi5nZXRQYXJlbnRTdGFjayhlKTplLnN0YWNrfSxuLmV4cG9ydHM9Zn0se1wiLi9ub2RlY29udGFpbmVyXCI6MTR9XSwyMjpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUpe3RoaXMucmFuZ2VCb3VuZHM9dGhpcy50ZXN0UmFuZ2VCb3VuZHMoZSksdGhpcy5jb3JzPXRoaXMudGVzdENPUlMoKSx0aGlzLnN2Zz10aGlzLnRlc3RTVkcoKX1mLnByb3RvdHlwZS50ZXN0UmFuZ2VCb3VuZHM9ZnVuY3Rpb24oZSl7dmFyIG4sZixvLGQsaT0hMTtyZXR1cm4gZS5jcmVhdGVSYW5nZSYmKG49ZS5jcmVhdGVSYW5nZSgpLG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0JiYoZj1lLmNyZWF0ZUVsZW1lbnQoXCJib3VuZHRlc3RcIiksZi5zdHlsZS5oZWlnaHQ9XCIxMjNweFwiLGYuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsZS5ib2R5LmFwcGVuZENoaWxkKGYpLG4uc2VsZWN0Tm9kZShmKSxvPW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZD1vLmhlaWdodCwxMjM9PT1kJiYoaT0hMCksZS5ib2R5LnJlbW92ZUNoaWxkKGYpKSksaX0sZi5wcm90b3R5cGUudGVzdENPUlM9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YobmV3IEltYWdlKS5jcm9zc09yaWdpbn0sZi5wcm90b3R5cGUudGVzdFNWRz1mdW5jdGlvbigpe3ZhciBlPW5ldyBJbWFnZSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksZj1uLmdldENvbnRleHQoXCIyZFwiKTtlLnNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbCw8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PC9zdmc+XCI7dHJ5e2YuZHJhd0ltYWdlKGUsMCwwKSxuLnRvRGF0YVVSTCgpfWNhdGNoKG8pe3JldHVybiExfXJldHVybiEwfSxuLmV4cG9ydHM9Zn0se31dLDIzOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSl7dGhpcy5zcmM9ZSx0aGlzLmltYWdlPW51bGw7dmFyIG49dGhpczt0aGlzLnByb21pc2U9dGhpcy5oYXNGYWJyaWMoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uaXNJbmxpbmUoZSk/UHJvbWlzZS5yZXNvbHZlKG4uaW5saW5lRm9ybWF0dGluZyhlKSk6byhlKX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGYpe3dpbmRvdy5odG1sMmNhbnZhcy5zdmcuZmFicmljLmxvYWRTVkdGcm9tU3RyaW5nKGUsbi5jcmVhdGVDYW52YXMuY2FsbChuLGYpKX0pfSl9dmFyIG89ZShcIi4veGhyXCIpLGQ9ZShcIi4vdXRpbHNcIikuZGVjb2RlNjQ7Zi5wcm90b3R5cGUuaGFzRmFicmljPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5odG1sMmNhbnZhcy5zdmcmJndpbmRvdy5odG1sMmNhbnZhcy5zdmcuZmFicmljP1Byb21pc2UucmVzb2x2ZSgpOlByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcImh0bWwyY2FudmFzLnN2Zy5qcyBpcyBub3QgbG9hZGVkLCBjYW5ub3QgcmVuZGVyIHN2Z1wiKSl9LGYucHJvdG90eXBlLmlubGluZUZvcm1hdHRpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuL15kYXRhOmltYWdlXFwvc3ZnXFwreG1sO2Jhc2U2NCwvLnRlc3QoZSk/dGhpcy5kZWNvZGU2NCh0aGlzLnJlbW92ZUNvbnRlbnRUeXBlKGUpKTp0aGlzLnJlbW92ZUNvbnRlbnRUeXBlKGUpfSxmLnByb3RvdHlwZS5yZW1vdmVDb250ZW50VHlwZT1mdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9eZGF0YTppbWFnZVxcL3N2Z1xcK3htbCg7YmFzZTY0KT8sLyxcIlwiKX0sZi5wcm90b3R5cGUuaXNJbmxpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuL15kYXRhOmltYWdlXFwvc3ZnXFwreG1sL2kudGVzdChlKX0sZi5wcm90b3R5cGUuY3JlYXRlQ2FudmFzPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGYsbyl7dmFyIGQ9bmV3IHdpbmRvdy5odG1sMmNhbnZhcy5zdmcuZmFicmljLlN0YXRpY0NhbnZhcyhcImNcIik7bi5pbWFnZT1kLmxvd2VyQ2FudmFzRWwsZC5zZXRXaWR0aChvLndpZHRoKS5zZXRIZWlnaHQoby5oZWlnaHQpLmFkZCh3aW5kb3cuaHRtbDJjYW52YXMuc3ZnLmZhYnJpYy51dGlsLmdyb3VwU1ZHRWxlbWVudHMoZixvKSkucmVuZGVyQWxsKCksZShkLmxvd2VyQ2FudmFzRWwpfX0sZi5wcm90b3R5cGUuZGVjb2RlNjQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2Ygd2luZG93LmF0b2I/d2luZG93LmF0b2IoZSk6ZChlKX0sbi5leHBvcnRzPWZ9LHtcIi4vdXRpbHNcIjoyNixcIi4veGhyXCI6Mjh9XSwyNDpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUsbil7dGhpcy5zcmM9ZSx0aGlzLmltYWdlPW51bGw7dmFyIGY9dGhpczt0aGlzLnByb21pc2U9bj9uZXcgUHJvbWlzZShmdW5jdGlvbihuLG8pe2YuaW1hZ2U9bmV3IEltYWdlLGYuaW1hZ2Uub25sb2FkPW4sZi5pbWFnZS5vbmVycm9yPW8sZi5pbWFnZS5zcmM9XCJkYXRhOmltYWdlL3N2Zyt4bWwsXCIrKG5ldyBYTUxTZXJpYWxpemVyKS5zZXJpYWxpemVUb1N0cmluZyhlKSxmLmltYWdlLmNvbXBsZXRlPT09ITAmJm4oZi5pbWFnZSl9KTp0aGlzLmhhc0ZhYnJpYygpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obil7d2luZG93Lmh0bWwyY2FudmFzLnN2Zy5mYWJyaWMucGFyc2VTVkdEb2N1bWVudChlLGYuY3JlYXRlQ2FudmFzLmNhbGwoZixuKSl9KX0pfXZhciBvPWUoXCIuL3N2Z2NvbnRhaW5lclwiKTtmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxuLmV4cG9ydHM9Zn0se1wiLi9zdmdjb250YWluZXJcIjoyM31dLDI1OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSxuKXtkLmNhbGwodGhpcyxlLG4pfWZ1bmN0aW9uIG8oZSxuLGYpe3JldHVybiBlLmxlbmd0aD4wP24rZi50b1VwcGVyQ2FzZSgpOnZvaWQgMH12YXIgZD1lKFwiLi9ub2RlY29udGFpbmVyXCIpO2YucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZC5wcm90b3R5cGUpLGYucHJvdG90eXBlLmFwcGx5VGV4dFRyYW5zZm9ybT1mdW5jdGlvbigpe3RoaXMubm9kZS5kYXRhPXRoaXMudHJhbnNmb3JtKHRoaXMucGFyZW50LmNzcyhcInRleHRUcmFuc2Zvcm1cIikpfSxmLnByb3RvdHlwZS50cmFuc2Zvcm09ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5ub2RlLmRhdGE7c3dpdGNoKGUpe2Nhc2VcImxvd2VyY2FzZVwiOnJldHVybiBuLnRvTG93ZXJDYXNlKCk7Y2FzZVwiY2FwaXRhbGl6ZVwiOnJldHVybiBuLnJlcGxhY2UoLyhefFxcc3w6fC18XFwofFxcKSkoW2Etel0pL2csbyk7Y2FzZVwidXBwZXJjYXNlXCI6cmV0dXJuIG4udG9VcHBlckNhc2UoKTtkZWZhdWx0OnJldHVybiBufX0sbi5leHBvcnRzPWZ9LHtcIi4vbm9kZWNvbnRhaW5lclwiOjE0fV0sMjY6W2Z1bmN0aW9uKGUsbixmKXtmLnNtYWxsSW1hZ2U9ZnVuY3Rpb24oKXtyZXR1cm5cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBN1wifSxmLmJpbmQ9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseShuLGFyZ3VtZW50cyl9fSxmLmRlY29kZTY0PWZ1bmN0aW9uKGUpe3ZhciBuLGYsbyxkLGksdCxsLHMsdT1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIixhPWUubGVuZ3RoLHA9XCJcIjtmb3Iobj0wO2E+bjtuKz00KWY9dS5pbmRleE9mKGVbbl0pLG89dS5pbmRleE9mKGVbbisxXSksZD11LmluZGV4T2YoZVtuKzJdKSxpPXUuaW5kZXhPZihlW24rM10pLHQ9Zjw8MnxvPj40LGw9KDE1Jm8pPDw0fGQ+PjIscz0oMyZkKTw8NnxpLHArPTY0PT09ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKHQpOjY0PT09aXx8LTE9PT1pP1N0cmluZy5mcm9tQ2hhckNvZGUodCxsKTpTdHJpbmcuZnJvbUNoYXJDb2RlKHQsbCxzKTtyZXR1cm4gcH0sZi5nZXRCb3VuZHM9ZnVuY3Rpb24oZSl7aWYoZS5nZXRCb3VuZGluZ0NsaWVudFJlY3Qpe3ZhciBuPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZj1udWxsPT1lLm9mZnNldFdpZHRoP24ud2lkdGg6ZS5vZmZzZXRXaWR0aDtyZXR1cm57dG9wOm4udG9wLGJvdHRvbTpuLmJvdHRvbXx8bi50b3Arbi5oZWlnaHQscmlnaHQ6bi5sZWZ0K2YsbGVmdDpuLmxlZnQsd2lkdGg6ZixoZWlnaHQ6bnVsbD09ZS5vZmZzZXRIZWlnaHQ/bi5oZWlnaHQ6ZS5vZmZzZXRIZWlnaHR9fXJldHVybnt9fSxmLm9mZnNldEJvdW5kcz1mdW5jdGlvbihlKXt2YXIgbj1lLm9mZnNldFBhcmVudD9mLm9mZnNldEJvdW5kcyhlLm9mZnNldFBhcmVudCk6e3RvcDowLGxlZnQ6MH07cmV0dXJue3RvcDplLm9mZnNldFRvcCtuLnRvcCxib3R0b206ZS5vZmZzZXRUb3ArZS5vZmZzZXRIZWlnaHQrbi50b3AscmlnaHQ6ZS5vZmZzZXRMZWZ0K24ubGVmdCtlLm9mZnNldFdpZHRoLGxlZnQ6ZS5vZmZzZXRMZWZ0K24ubGVmdCx3aWR0aDplLm9mZnNldFdpZHRoLGhlaWdodDplLm9mZnNldEhlaWdodH19LGYucGFyc2VCYWNrZ3JvdW5kcz1mdW5jdGlvbihlKXt2YXIgbixmLG8sZCxpLHQsbCxzPVwiIFxcclxcblx0XCIsdT1bXSxhPTAscD0wLGM9ZnVuY3Rpb24oKXtuJiYoJ1wiJz09PWYuc3Vic3RyKDAsMSkmJihmPWYuc3Vic3RyKDEsZi5sZW5ndGgtMikpLGYmJmwucHVzaChmKSxcIi1cIj09PW4uc3Vic3RyKDAsMSkmJihkPW4uaW5kZXhPZihcIi1cIiwxKSsxKT4wJiYobz1uLnN1YnN0cigwLGQpLG49bi5zdWJzdHIoZCkpLHUucHVzaCh7cHJlZml4Om8sbWV0aG9kOm4udG9Mb3dlckNhc2UoKSx2YWx1ZTppLGFyZ3M6bCxpbWFnZTpudWxsfSkpLGw9W10sbj1vPWY9aT1cIlwifTtyZXR1cm4gbD1bXSxuPW89Zj1pPVwiXCIsZS5zcGxpdChcIlwiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKCEoMD09PWEmJnMuaW5kZXhPZihlKT4tMSkpe3N3aXRjaChlKXtjYXNlJ1wiJzp0P3Q9PT1lJiYodD1udWxsKTp0PWU7YnJlYWs7Y2FzZVwiKFwiOmlmKHQpYnJlYWs7aWYoMD09PWEpcmV0dXJuIGE9MSx2b2lkKGkrPWUpO3ArKzticmVhaztjYXNlXCIpXCI6aWYodClicmVhaztpZigxPT09YSl7aWYoMD09PXApcmV0dXJuIGE9MCxpKz1lLHZvaWQgYygpO3AtLX1icmVhaztjYXNlXCIsXCI6aWYodClicmVhaztpZigwPT09YSlyZXR1cm4gdm9pZCBjKCk7aWYoMT09PWEmJjA9PT1wJiYhbi5tYXRjaCgvXnVybCQvaSkpcmV0dXJuIGwucHVzaChmKSxmPVwiXCIsdm9pZChpKz1lKX1pKz1lLDA9PT1hP24rPWU6Zis9ZX19KSxjKCksdX19LHt9XSwyNzpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBmKGUpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudHlwZT1cImxpbmVhclwiPT09ZS5hcmdzWzBdP28uVFlQRVMuTElORUFSOm8uVFlQRVMuUkFESUFMfXZhciBvPWUoXCIuL2dyYWRpZW50Y29udGFpbmVyXCIpO2YucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLG4uZXhwb3J0cz1mfSx7XCIuL2dyYWRpZW50Y29udGFpbmVyXCI6OX1dLDI4OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGYoZSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4sZil7dmFyIG89bmV3IFhNTEh0dHBSZXF1ZXN0O28ub3BlbihcIkdFVFwiLGUpLG8ub25sb2FkPWZ1bmN0aW9uKCl7MjAwPT09by5zdGF0dXM/bihvLnJlc3BvbnNlVGV4dCk6ZihuZXcgRXJyb3Ioby5zdGF0dXNUZXh0KSl9LG8ub25lcnJvcj1mdW5jdGlvbigpe2YobmV3IEVycm9yKFwiTmV0d29yayBFcnJvclwiKSl9LG8uc2VuZCgpfSl9bi5leHBvcnRzPWZ9LHt9XX0se30sWzRdKSg0KX0pOyJdfQ==
